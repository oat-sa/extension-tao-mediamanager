{"version":3,"names":["define","hb","template","container","depth0","helpers","partials","data","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","lambda","compiler","main","stack1","helper","hooks","helperMissing","nullContext","name","hash","loc","start","line","column","end","fn","program","inverse","noop","useData","_","$","__","binder","uri","section","request","router","loggerFactory","feedback","confirmDialog","alertDialog","urlUtil","relatedItemsPopupTpl","relatedItemsClassPopupTpl","forbiddenClassActionTpl","callConfirmModal","actionContext","message","url","resolve","reject","accept","cancel","callAlertModal","method","dataType","then","response","success","deleted","tree","trigger","id","classUri","msg","logger","register","instanciate","self","decode","JSON","stringify","label","cssClass","type","catch","err","isUndefined","error","sharedStimulusAuthoring","updateContentBlock","create","content","visible","show","$panel","attr","dispatch","remove","mediaRelationsData","context","sourceId","classId","signature","Promise","route","noToken","responseRelated","haveItemReferences","relations","text","trim","length","inUsageMessage","confirmationMessage","items","number","errorObject","code","Item","_generateIdentifier","pos","lastIndexOf","substr","creatorDummyItemData","sharedStimulusData","newItem","itemData","assign","bdy","rootElement","body","qtiClass","responseProcessing","attributes","responseRules","serial","class","handleStylesheetLoad","e","path","composedPath","linkTag","stylesheetUrl","href","split","rdf_styles","reverse","assets","each","h","asset","assetClassName","children","className","match","_formatStyles","sheet","_hideStyles","stylesheetSerial","dataset","passagesItem","passages","passageWrapper","find","passageItemClassName","passagesPreview","passagePreviewClassName","cssRules","CSSStyleSheet","values","map","index","rule","deleteRule","classNameFormated","scopedCssRules","_scopeStyles","newRules","insertRule","scopeSelector","toReplace","replacementSelector","scopedStyles","selectorText","rulesInBrackets","cssText","selectors","scopedSelectors","singleSelectorText","includes","numRepeat","toReplaceSelector","replace","RegExp","containsScopeSelector","startsWith","endsWith","push","join","filter","str","Loader","qtiClasses","formatStyles","qtiNamespace","qtiSchemaLocation","\"http://www.imsglobal.org/xsd/imsqti_v2p2\"","languagesUrl","creatorLoader","loadSharedStimulus","config","callback","languagesList","assetData","assetDataUrl","assetStyles","assetDataStyles","all","loader","forEach","stylesheet","link","stylesheets","media","title","onload","getComposingElements","setClassesLocation","loadItemData","loadedItem","namespaces","getNamespaces","setNamespaces","setSchemaLocations","getLoadedClasses","commonRenderConfig","assetManagerFactory","assetStrategies","assetManager","taomedia","external","base64","baseUrl","locations","defaults","_container","_tooltip","assessmentItem","figure","img","figcaption","math","object","table","options","Renderer","build","dom","creatorRenderer","get","reset","areaBroker","$bodyEltForm","properties","getOption","contains","lang","shuffleChoices","itemOptionForm","bodyElementOptionForm","getElementPropertyPanelArea","textOptionForm","mediaManager","appendContainer","browseUrl","getFilesUrl","uploadUrl","fileUploadUrl","deleteUrl","fileDeleteUrl","downloadUrl","fileDownloadUrl","fileExistsUrl","root","qtiCreatorContext","getAssetManager","setData","setAreaBroker","getCreatorContext","setOption","value","setOptions","load","done","isFunction","_len","arguments","rest","Array","_key","apply","UrlParser","cssTpl","featuresService","styleSheetManagerVisibilityKey","itemConfig","globalConfig","_getUri","action","_basename","substring","mainClassSelector","hashClassSelector","taoHashClassPrefix","hashClass","mainClass","style","customStylesheet","currentItem","$styleElem","styleElem","empty","append","common","deleteTxt","editLabelTxt","downloadTxt","preparingMessageHtml","failMessageHtml","isInValidLocalTxt","erase","dontAppend","css","mSelector","mProp","isEmpty","value1","key1","value2","key2","isPlainObject","selector","property","itemBodyClass","document","querySelector","classList","searchClass","groups","size","verifyInit","Error","save","extend","cssJson","stylesheetUri","deleteStylesheet","download","styleName","groupName","decodeURIComponent","fetch","resp","blob","window","URL","createObjectURL","a","createElement","display","appendChild","click","revokeObjectURL","addStylesheet","loadStylesheet","linkElement","stylesheetObject","isLocal","isValid","serialNumber","isInvalidLocal","tplData","fileName","order","listEntry","listLinks","insertedInList","before","addClass","cssLinks","inserted","serialCur","setTimeout","isInit","pendingStylesheetsInit","initializing","parser","isString","createStyleSheet","_link","render","_href","_sep","indexOf","Date","getTime","toString","checkCORS","when","ajax","addItemStylesheets","currentStylesheet","removeOrphanedStylesheets","getItem","init","item","_style","keys","key","selectorWithoutMainClass","isVisible","getStyle","getHashClass","getMainClass","setHashClass","setMainClass","generateHashClass","Math","random","generateMainClass","replaceHashClass","replaceMainClass","clearCache","off","styleEditor","Stylesheet","genericFeedbackPopup","$doc","styleSheetToggler","_createInfoBox","$messageBox","closeTrigger","on","fadeOut","cssToggler","uploader","customCssToggler","getContext","li","closest","stylesheetObj","input","labelBox","prev","val","isCustomCss","isDisabled","hasClass","cssUri","resourcemgr","pathParam","params","filters","select","files","styleListNames","styleList","i","styleGroup","cssRes","l","file","deleteFile","hide","downloadStylesheet","saveLabel","html","handleAvailability","disabled","removeClass","toggleClass","myLink","ready","target","parentElement","keyCode","fontStacks","fontSelector","$container","$selector","normalize","font","clean","resetButton","toLabel","$1","toUpperCase","format","state","originalOption","element","select2","applyToStylesEditor","styles","selectedFontFamily","optGroup","normalizeFont","option","fontFamily","formatResult","formatSelection","width","first","rgbToHex","color","toHexPair","inp","parseInt","slice","rgbArr","exec","isArray","additionalStylesToObject","additional","additionalStyles","keyValue","colorSelector","colorPicker","widget","widgetBox","titleElement","resetButtons","colorTriggers","colorTriggerLabels","currentProperty","widgetObj","setTitle","setTriggerColor","$trigger","targetOld","collectCommonAdditionalStyles","farbtastic","linkTo","add","$tmpTrigger","nodeName","toLowerCase","prop","setColor","is","has","$this","$colorTrigger","needToRemove","fontSizeChanger","$fontSizeChanger","itemSelector","figcaptionSelector","$resetBtn","parents","$input","itemFontSize","itemSelectorOld","resizeFont","figcaptionSize","min","preventDefault","blur","c","panel","setUpInteractionPanel","initSidebarAccordion","initFormVisibilityListener","elementClass","$passageEditor","handle","normalizeStrategy","XmlRenderer","Element","_xmlRenderer","_render","xml","interactionsToolbar","tagTitles","inlineInteractions","interactions","icon","description","short","tags","group","toggleInlineInteractionGroup","eventifier","qtiCreatorContextFactory","sharedStimulusLoader","commonRenderer","propertiesPanel","eventHelper","xmlRenderer","xmlNsHandler","interactionPanel","sharedStimulusCreatorFactory","pluginFactories","sharedStimulusCreator","plugins","pluginRun","execStack","plugin","TypeError","pluginFactory","getName","silent","restoreNs","contentType","getItemPanelArea","destroy","isObject","getUsedClasses","setContext","getInteractionPanelArea","elt","getRootElement","$itemContainer","isA","setRenderer","postRender","clone","getContainer","getPropertyPanelArea","initElementToWidgetListeners","getSharedStimulusId","getConfig","componentFactory","pluginLoaderFactory","areaBrokerFactory","componentTpl","sharedStimulusAuthoringFactory","defaultPlugins","pluginLoader","api","getAreaBroker","setTemplate","module","exclude","bundle","getElement","menu","menuLeft","menuRight","contentCreatorPanel","editorBar","toolbar","propertyPanel","itemPanel","itemPropertyPanel","itemStylePanel","modalContainer","elementPropertyPanel","getPlugins","spread","defer","category","serviceController","serviceExtension","manageMediaController","assetId","previewEnabled","permissions","loadCssUrl","saveCssUrl","downloadCssUrl","previewerFactory","qtiItemPreviewerFactory","testRunnerConfig","testDefinition","serviceCallId","providers","runner","proxy","communicator","view","readOnly","fullPage","pluginsOptions","hideActionBars","proxyProvider","loadFromBundle","itemState","itemRunner","setState","itemUri","loadItem","previewer","loadingBar","$previewer","mime","isPreviewEnabled","isPassage","stop","containerClass","binding","classuri","_resourceContext","MediaManager","deps","actions","editInstance","authoring","sharedStimulusId","promiseQueue","install","queue","identifier","_ref","cssFile","styleSheets","containerHelper","gridContentHelper","contentHelper","createElements","$dummy","getContent","newElts","$placeholder","$widget","$original","bind","changeInnerWidgetState","_changeInnerWidgetState","outerWidget","innerWidget","changeState","stateFactory","checkIfWidgetShouldSleep","outerContainer","getEditorBarArea","$modalFeedbacksArea","_widget","getContentCreatorPanelArea","Active","beforeStateInit","getSerial","composingElts","stopPropagation","offEvents","ckConfigurator","mathJax","_defaults","qtiImage","qtiMedia","qtiInclude","underline","removePlugins","horizontalRule","furiganaPlugin","editor","toolbarType","CKEditor","features","deletingHelper","featureFlag","languages","_buildEditor","$editable","$editableContainer","$toolbarArea","getToolbarArea","placeholder","removePluginName","languagePluginEnabled","ckConfig","dtdMode","autoParagraph","enterMode","ENTER_P","floatSpaceDockedOffsetY","language_list","sharedSpaces","top","taoQtiItem","insert","tempWidget","$newContent","$newImgPlaceholder","insertAfter","_htmlEncode","getData","createdWidget","createdElement","initContainer","rebuild","_activateInnerWidget","focusManager","instanceReady","widgets","debounce","markupChanged","_detectWidgetDeletion","change","leading","managePlaceholder","_rebuildWidgets","restoreState","shieldInnerContent","_shieldInnerContent","autofocus","_focus","focus","configLoaded","getTooltypeFromContainer","highlight","afterPaste","inline","togglePlaceholder","nonEmptyContent","removePlaceholder","placeholderClass","disableCellAlignment","_find","dataAttribute","$collection","elements","currentState","getCurrentState","widgetInner","_findWidgetContainer","w","undoCmd","getCommand","createInfoBox","resetUndo","undoManager","undo","addShield","$shield","containerWidget","listenToWidgetCreation","event","targetWidget","delay","encodedStr","editable","parentNode","range","createRange","moveToElementEditablePosition","getSelection","selectRanges","passthroughInnerContent","editorFactory","disableAutoInline","hasEditor","buildEditor","editorOptions","getList","useCKEFormatting","languagesData","buildTasks","destroyEditor","destructTasks","removeAttr","removeData","escape","htmlEditor","formElement","formTpl","wrapperCls","TextActive","buildStylesEditor","initForm","destroyStylesEditor","$form","changeCallback","getChangeCallback","$block","wrapInner","blockCls","test","$textEditor","textBlockCssClass","regex","unwrap","initWidget","setChangeCallbacks","factory","states","createBundle","Widget","toolbarTpl","TextWidget","initCreator","registerStates","buildContainer","$wrap","\"data-serial\"","\"data-qti-class\"","\"data-html-editable\"","createToolbar","$tlb","adderTpl","$editorPanel","_getItemBody","_initInsertion","_wrap","$colRow","wrap","after","_placeholder","prepend","_insertElement","_endInsertion","_done","_appendButton","$adder","$widgetParent","qtiElement","\"data-new\"","getBody","creator","$colParent","$widgetElem","widgetElem","replaceWith","$textBlock","Container","allQtiClasses","simpleParser","mathNs","parse","ns","htmls","markup","markupSelector","extractHtmlFromMarkup","loadRequiredClasses","containerEditors","renderer","setElement","setRootElement","metadata","related","loadContainer","resetRenderer","_ns","getNs","getNsModel","throttle","editorContent","cleanup","createFakeWidget","markupStr","$found","ret","blockAdder","getHost","hider","buttonTpl","SharedStimulusCreator","sharedStimulusConfig","$element","testId","disable","enable","getMenuArea","removeProp","history","back","backHandler","getMenuLeftArea","Figcaption","CreatorFigcaption","ActiveState","inlineHelper","FigureStateActive","alignmentHelper","FigureWidget","elem","initAlignment","checkFileExists","src","getRequiredOptions","buildBlockContainer","buildInlineContainer","$img","Figure","CreatorFigure","imageElem","metaData","ImgStateActive","ImgWidget","height","setAttribute","removeAttribute","FigureModel","findParentElement","CreatorImg","siblings","removeElement","figureRenderer","getRenderer","blockParams","depths","useDepths","ItemStateActive","enterActiveState","\"xml:lang\"","getAttributeChangeCallback","devTools","hasUnsupportedInteraction","$qti","ItemWidget","saveItemUrl","initTextWidgets","initGridEditor","debug","initUiComponents","$saveBtn","invalid","$itemBody","$itemEditorPanel","gridEditor","$eltWidget","eltwWdget","initTextWidget","_detachElements","containerElements","elementSerial","$originalContainer","subContainers","$row","$col","isTextBlock","contents","nodeType","nodeValue","$subElement","$subWidget","$clonedContainer","$originalTextBlock","textBlockId","$subContainer","subContainerElements","serializeElements","subContainerBody","serializedItemBody","itemBody","containerData","shift","setElements","listenStateChange","$code","$pre","liveXmlPreview","CommonRenderer","tpl","wrapTpl","CreatorItem","_normalizeItemBody","$child","mediaEditorComponent","_Mathmin","mediaEditor","$panelObjectSize","$panelMediaSize","_config","renderingThrottle","fileFilters","ObjectStateActive","refreshRendering","obj","previewOptions","resolveUrl","setMediaSizeEditor","_Mathmax","max","_Mathround","round","qtiObject","mediaplayer","originalSize","getMediaOriginalSize","containerWidth","scaleHeight","scaleWidth","scale","onChange","nMedia","newWidth","resize","$node","responsive","mediaDimension","active","showResponsiveToggle","hideShowPanels","_initUpload","$uploadTrigger","$src","_openResourceMgr","mediaSourcesUrl","open","close","alt","isNaN","qtiObjectAlt","align","qtiObjectAlign","positionFloat","ObjectWidget","CreatorObject","ckEditor","tableModelFactory","tableActionsFactory","replaceElementByItsContent","$elem","$tableTagContent","$pseudoContainer","newBody","addClassOnCurrentRow","currentCellPos","getCurrentCellPos","$currentCol","tableModel","getRowCells","y","addClassOnCurrentCol","getColCells","x","clearCellClasses","updateTable","update","getRowCount","rowActions","hideDelete","showDelete","getColCount","colActions","displayTableActions","hideTableActions","$tableContainer","selectedCells","$currentCell","hAlignWith","vAlignWith","currentCell","cellIndex","rowIndex","selection","tabletools","CKEDITOR","getSelectedCells","deleteColRow","insertRowAfter","insertColAfter","hAlignCenter","hAlignRight","TableStateActive","exit","$caption","$first","$curCap","$paragraphsInCaption","$p","classNames","hAlignOptions","selected","hAlign","t","$itemPanel","$tablePropTrigger","openTableProperties","execCommand","insertCol","deleteTitle","insertRow","currentSelection","$toolbars","eq","TableWidget","CreatorTable","defaultData","schemaLocations","xsi","forIn","getSchemaLocations","merge","adaptive","timeDependent","mapValues","d","s","getElementsByTagName","styleSheet","createTextNode"],"sources":["/Users/martinnicholson/work/currentgen/tao-community-handlebars4/tao/views/build/config-wrap-start-default.js","../qtiCreator/tpl/relatedItemsPopup!tpl","../qtiCreator/tpl/relatedItemsClassPopup!tpl","../qtiCreator/tpl/forbiddenClassAction!tpl","../../taoMediaManagerCss/media!css","../controller/actions.js","../qtiCreator/helper/createDummyItemData.js","../qtiCreator/helper/formatStyles.js","../qtiCreator/helper/sharedStimulusLoader.js","../qtiCreator/renderers/config.js","../qtiCreator/renderers/Renderer.js","../qtiCreator/helper/creatorRenderer.js","../qtiCreator/tpl/toolbars/cssToggler!tpl","../qtiCreator/editor/styleEditor/styleEditor.js","../qtiCreator/editor/styleEditor/styleSheetToggler.js","../qtiCreator/editor/styleEditor/fontSelector.js","../qtiCreator/editor/styleEditor/colorSelector.js","../qtiCreator/editor/styleEditor/fontSizeChanger.js","../qtiCreator/editor/propertiesPanel.js","../qtiXmlRenderer/renderers/config.js","../qtiXmlRenderer/renderers/Renderer.js","../qtiCreator/helper/xmlRenderer.js","../qtiCreator/editor/interactionsPanel.js","../qtiCreator/sharedStimulusCreator.js","../qtiCreator/component/tpl/sharedStimulusAuthoring!tpl","../qtiCreator/component/sharedStimulusAuthoring.js","../controller/authoring.js","../previewer/component/qtiSharedStimulusItem.js","../controller/editInstance.js","../controller/routes.js","../previewer/adapter/item/qtiSharedStimulusItem.js","../previewer/proxy/qtiSharedStimulusItem.js","../qtiCreator/widgets/helpers/content.js","../qtiCreator/widgets/states/Active.js","../qtiCreator/widgets/static/states/Active.js","../qtiCreator/helper/ckConfigurator.js","../qtiCreator/editor/ckEditor/htmlEditor.js","../qtiCreator/tpl/forms/static/text!tpl","../qtiCreator/widgets/static/text/states/Active.js","../qtiCreator/widgets/static/text/states/states.js","../qtiCreator/widgets/static/text/Widget.js","../qtiCreator/editor/blockAdder/blockAdder.js","../qtiCreator/editor/containerEditor.js","../qtiCreator/plugins/content/blockAdder.js","../qtiCreator/plugins/menu/preview.js","../qtiCreator/plugins/menu/save.js","../qtiCreator/plugins/navigation/back.js","../qtiCreator/renderers/Figcaption.js","../qtiCreator/widgets/static/figure/states/Active.js","../qtiCreator/widgets/static/figure/states/states.js","../qtiCreator/widgets/static/figure/Widget.js","../qtiCreator/renderers/Figure.js","../qtiCreator/widgets/static/img/states/Active.js","../qtiCreator/widgets/static/img/states/states.js","../qtiCreator/widgets/static/img/Widget.js","../qtiCreator/renderers/Img.js","../qtiCreator/tpl/forms/item!tpl","../qtiCreator/widgets/item/states/Active.js","../qtiCreator/widgets/item/states/states.js","../qtiCreator/widgets/item/Widget.js","../qtiCreator/renderers/tpl/wrap!tpl","../qtiCreator/renderers/Item.js","../qtiCreator/widgets/static/object/states/Active.js","../qtiCreator/widgets/static/object/states/states.js","../qtiCreator/widgets/static/object/Widget.js","../qtiCreator/renderers/Object.js","../qtiCreator/widgets/static/table/states/Active.js","../qtiCreator/widgets/static/table/states/states.js","../qtiCreator/widgets/static/table/Widget.js","../qtiCreator/renderers/Table.js","../qtiXmlRenderer/tpl/item!tpl","../qtiXmlRenderer/renderers/Item.js","onLayerEnd0.js","module-create.js","/Users/martinnicholson/work/currentgen/tao-community-handlebars4/tao/views/build/config-wrap-end-default.js"],"sourcesContent":["\n","\ndefine('tpl!taoMediaManager/qtiCreator/tpl/relatedItemsPopup', ['handlebars'], function(hb){ return hb.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"label\") : depth0), depth0))\n    + \"</li>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"inUsageMessage\") || (depth0 != null ? lookupProperty(depth0,\"inUsageMessage\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"inUsageMessage\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":1,\"column\":18}}}) : helper)))\n    + \"\\n<ul>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"items\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":3,\"column\":47}}})) != null ? stack1 : \"\")\n    + \"\\n</ul>\\n\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"confirmationMessage\") || (depth0 != null ? lookupProperty(depth0,\"confirmationMessage\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"confirmationMessage\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":0},\"end\":{\"line\":5,\"column\":23}}}) : helper)));\n},\"useData\":true}); });\n","\ndefine('tpl!taoMediaManager/qtiCreator/tpl/relatedItemsClassPopup', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<b>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Warning\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":3},\"end\":{\"line\":1,\"column\":19}}}))\n    + \"</b><br><br>\\n\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"You are about to delete the class\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":2,\"column\":42}}}))\n    + \" <b>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":46},\"end\":{\"line\":2,\"column\":54}}}) : helper)))\n    + \"</b>, \"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"which contains assets that are in use elsewhere.\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":60},\"end\":{\"line\":2,\"column\":117}}}))\n    + \"\\n\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Deleting this class will break the items and the tests that are currently using them.\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":3,\"column\":94}}}))\n    + \"<br><br>\\n\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Are you sure you want to delete this class and all of its content?\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":0},\"end\":{\"line\":4,\"column\":75}}}));\n},\"useData\":true}); });\n","\ndefine('tpl!taoMediaManager/qtiCreator/tpl/forbiddenClassAction', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<b>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Forbidden action\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":3},\"end\":{\"line\":1,\"column\":28}}}))\n    + \"</b><br><br>\\n\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"The class\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":2,\"column\":18}}}))\n    + \" <b>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":22},\"end\":{\"line\":2,\"column\":30}}}) : helper)))\n    + \"</b> \"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"you are trying to delete is too large and contains too many subclasses.\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":35},\"end\":{\"line\":2,\"column\":115}}}))\n    + \"<br>\\n\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Please delete the subclasses before.\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":3,\"column\":45}}}));\n},\"useData\":true}); });\n","\ndefine('css!taoMediaManagerCss/media',[],function(){});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * @author Juan Luis Gutierrez Dos Santos <juanluis.gutierrezdossantos@taotesting.com>\n */\n\ndefine('taoMediaManager/controller/actions',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'layout/actions/binder',\n    'uri',\n    'layout/section',\n    'core/request',\n    'core/router',\n    'core/logger',\n    'ui/feedback',\n    'ui/dialog/confirm',\n    'ui/dialog/alert',\n    'util/url',\n    'tpl!taoMediaManager/qtiCreator/tpl/relatedItemsPopup',\n    'tpl!taoMediaManager/qtiCreator/tpl/relatedItemsClassPopup',\n    'tpl!taoMediaManager/qtiCreator/tpl/forbiddenClassAction',\n    'css!taoMediaManagerCss/media.css'\n], function (\n    _,\n    $,\n    __,\n    binder,\n    uri,\n    section,\n    request,\n    router,\n    loggerFactory,\n    feedback,\n    confirmDialog,\n    alertDialog,\n    urlUtil,\n    relatedItemsPopupTpl,\n    relatedItemsClassPopupTpl,\n    forbiddenClassActionTpl\n) {\n    'use strict';\n\n    const logger = loggerFactory('taoMediaManager/manageMedia');\n\n    binder.register('newSharedStimulus', function instanciate(actionContext) {\n        const self = this;\n        const classUri = uri.decode(actionContext.classUri);\n\n        return request({\n            url: self.url,\n            data: JSON.stringify({ classUri: classUri }),\n            method: 'POST'\n        })\n            .then(function (response) {\n                //backward compat format for jstree\n                if (actionContext.tree) {\n                    $(actionContext.tree).trigger('addnode.taotree', [\n                        {\n                            uri: uri.decode(response.data.id),\n                            label: response.data.name,\n                            parent: uri.decode(actionContext.classUri),\n                            cssClass: 'node-instance'\n                        }\n                    ]);\n                }\n\n                //return format (resourceSelector)\n                return {\n                    uri: uri.decode(response.data.id),\n                    label: response.data.name,\n                    classUri: uri.decode(actionContext.classUri),\n                    type: 'instance'\n                };\n            })\n            .catch(err => {\n                if (!_.isUndefined(err.message)) {\n                    feedback().error(err.message);\n                }\n                logger.error(err);\n            });\n    });\n    binder.register('sharedStimulusAuthoring', function sharedStimulusAuthoring(actionContext) {\n        section\n            .updateContentBlock('')\n            .create({\n                id: 'authoring',\n                name: __('Authoring'),\n                url: this.url,\n                content: ' ',\n                visible: false\n            })\n            .show();\n        const $panel = $('#panel-authoring');\n        $panel.attr('data-id', actionContext.id);\n        $panel.attr('data-uri', actionContext.uri);\n        // duplicate behaviour of $doc.ajaxComplete in tao/views/js/controller/backoffice.js\n        // as in old way - request html from server\n        router.dispatch(`${this.url}?id=${actionContext.id}`);\n    });\n    binder.register('deleteSharedStimulus', function remove(actionContext) {\n        const self = this;\n        let data = {};\n        let mediaRelationsData = {type: 'media'};\n\n        if (actionContext.context[0] === 'instance') {\n            mediaRelationsData.sourceId = actionContext.id\n        } else {\n            mediaRelationsData.classId = actionContext.id\n        }\n        data.uri        = uri.decode(actionContext.uri);\n        data.classUri   = uri.decode(actionContext.classUri);\n        data.id         = actionContext.id;\n        data.signature  = actionContext.signature;\n        return new Promise(function (resolve, reject) {\n            request({\n                url: urlUtil.route('index', 'ResourceRelations', 'tao'),\n                data: mediaRelationsData,\n                method: 'GET',\n                noToken: true\n            }).then(function (responseRelated) {\n                let message;\n                const haveItemReferences = responseRelated.data.relations;\n                const name = $('a.clicked', actionContext.tree).text().trim();\n                if (actionContext.context[0] === 'instance') {\n                    if (haveItemReferences.length === 0) {\n                        message = `${__('Are you sure you want to delete this')} <b>${name}</b>?`;\n                    } else {\n                        message = relatedItemsPopupTpl({\n                            name,\n                            inUsageMessage:  __('This \"%s\" is currently used in %d item(s)', name, haveItemReferences.length),\n                            confirmationMessage: __('Are you sure you want to delete this \"%s\"?', name),\n                            items: haveItemReferences\n                        });\n                    }\n                } else if (actionContext.context[0] !== 'instance') {\n                    if (haveItemReferences.length === 0) {\n                        message = `${__('Are you sure you want to delete this class and all of its content?')}`;\n                    } else if (haveItemReferences.length !== 0) {\n                        message = relatedItemsClassPopupTpl({\n                            name,\n                            number: haveItemReferences.length,\n                            items: haveItemReferences\n                        });\n                    }\n                }\n                callConfirmModal(actionContext, message, self.url, data, resolve, reject)\n            }).catch(errorObject => {\n                let message;\n                if (actionContext.context[0] === 'class' && errorObject.response.code === 999) {\n                    message = forbiddenClassActionTpl();\n                }\n                callAlertModal(actionContext, message, reject)\n            });\n        });\n    });\n\n    function callConfirmModal(actionContext, message, url, data, resolve, reject) {\n        confirmDialog(\n            message,\n            () => accept(actionContext, url, data, resolve, reject),\n            () => cancel(reject)\n        );\n    }\n\n    function callAlertModal(actionContext, message, reject) {\n        alertDialog(\n            message,\n            () => cancel(reject)\n        );\n    }\n\n    function accept(actionContext, url, data, resolve, reject) {\n        return request({\n            url: url,\n            method: 'POST',\n            data: data,\n            dataType: 'json'\n        }).then(function (response) {\n            if (response.success && response.deleted) {\n                feedback().success(response.message || __('Resource deleted'));\n\n                if (actionContext.tree) {\n                    $(actionContext.tree).trigger('removenode.taotree', [\n                        {\n                            id: actionContext.uri || actionContext.classUri\n                        }\n                    ]);\n                }\n                return resolve({\n                    uri: actionContext.uri || actionContext.classUri\n                });\n            } else {\n                if (response.success && !response.deleted) {\n                    $(actionContext.tree).trigger('refresh.taotree');\n                    reject(response.msg\n                           || response.message\n                           || __('Unable to delete the selected resource because you do not have the required rights to delete part of its content.'));\n                }\n\n                reject(response.msg\n                       || response.message\n                       || __('Unable to delete the selected resource'));\n            }\n        });\n    }\n\n    function cancel(reject) {\n        reject({ cancel: true });\n    }\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n\ndefine('taoMediaManager/qtiCreator/helper/createDummyItemData',[\n    'taoQtiItem/qtiCreator/model/Item'\n], function(Item) {\n    'use strict';\n\n    const _generateIdentifier = function _generateIdentifier(uri) {\n        const pos = uri.lastIndexOf('#');\n        return uri.substr(pos + 1);\n    };\n\n    const creatorDummyItemData = function(sharedStimulusData) {\n        const newItem = new Item().id(_generateIdentifier(sharedStimulusData.id)).attr('title', sharedStimulusData.name);\n        newItem.data('new', true);\n        newItem.data('dummy', true);\n\n        const itemData = Object.assign({}, newItem);\n        delete itemData.bdy;\n        delete itemData.rootElement;\n\n        itemData.body = sharedStimulusData.body.body;\n        itemData.qtiClass = 'assessmentItem';\n        itemData.responseProcessing = {\n            attributes: {},\n            qtiClass: \"responseProcessing\",\n            responseRules: [],\n            serial: `response_${sharedStimulusData.body.serial}`\n        };\n        itemData.response = {};\n        if (sharedStimulusData.body.attributes['xml:lang']) {\n            itemData.attributes['xml:lang'] = sharedStimulusData.body.attributes['xml:lang'];\n        }\n        if (sharedStimulusData.body.attributes.class) {\n            itemData.attributes.class = sharedStimulusData.body.attributes.class;\n        }\n\n        return itemData;\n    };\n    return creatorDummyItemData;\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA ;\n */\ndefine('taoMediaManager/qtiCreator/helper/formatStyles',[\n    'jquery'\n], function ($) {\n    'use strict';\n\n    function handleStylesheetLoad(e) {\n        // get cssRules from owner link tag, referenced in load event\n        const path = e && e.composedPath && e.composedPath();\n        const linkTag = path[0];\n\n        if (linkTag) {\n\n            const stylesheetUrl = linkTag.href.split('&stylesheet=');\n            const rdf_styles = stylesheetUrl[0].split('%23').reverse()[0];\n\n            // Asset & Asset Preview\n            const assets = $(`[data-identifier='${rdf_styles}']`);\n            if (assets.length) {\n                assets.each((h, asset) => {\n                    const assetClassName = asset.children[0].className.match(/[\\w-]*tao-[\\w-]*/g) || asset.children[1].className.match(/[\\w-]*tao-[\\w-]*/g);\n                    if (assetClassName) {\n                        _formatStyles(linkTag.sheet, assetClassName[0]);\n                    } else {\n                        _hideStyles(linkTag.sheet);\n                    }\n                });\n                return;\n            }\n\n            // Passage on Item\n            const stylesheetSerial = linkTag.dataset.serial;\n            const passagesItem = $(`div[data-serial*='${stylesheetSerial}']`);\n            if (passagesItem.length) {\n                passagesItem.each((h, passages) => {\n                    const passageWrapper = $(passages).find('.qti-include > div');\n                    const passageItemClassName = passageWrapper[0] && passageWrapper[0].className && passageWrapper[0].className.match(/[\\w-]*tao-[\\w-]*/g);\n                    if (passageItemClassName) {\n                        _formatStyles(linkTag.sheet, passageItemClassName[0]);\n                    }\n                });\n                return;\n            }\n\n            // Item Preview\n            const passagesPreview = $(`[data-href*='${rdf_styles}']`);\n            if (passagesPreview.length) {\n                passagesPreview.each((h, passages) => {\n                    const passagePreviewClassName = passages.className.match(/[\\w-]*tao-[\\w-]*/g);\n                    if (passagePreviewClassName) {\n                        _formatStyles(linkTag.sheet, passagePreviewClassName[0]);\n                    }\n                });\n                return;\n            }\n        }\n    }\n\n    function _hideStyles(linkTag) {\n        /**\n         * @type {CSSRuleList}\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSRuleList\n         */\n        const { cssRules } = linkTag || {};\n        const CSSStyleSheet = linkTag || {};\n\n        if (cssRules) {\n            Object.values(cssRules).map((index, rule) => {\n                CSSStyleSheet.deleteRule(index);\n            });\n        }\n\n        return;\n    }\n\n    function _formatStyles(linkTag, className) {\n        /**\n         * @type {CSSRuleList}\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSRuleList\n         */\n        const { cssRules } = linkTag || {};\n        const CSSStyleSheet = linkTag || {};\n        const classNameFormated = className && className.length ? `.${className}` : '';\n\n        // prefix rules\n        const scopedCssRules = _scopeStyles(cssRules, classNameFormated, ['body', 'html', 'div.qti-item']);\n\n        if (cssRules && scopedCssRules) {\n            Object.values(cssRules).map((index, rule) => {\n                CSSStyleSheet.deleteRule(index);\n            });\n            const newRules = scopedCssRules.split('\\n');\n            Object.values(newRules).map(rule => {\n                CSSStyleSheet.insertRule(rule);\n            });\n        }\n\n        return;\n    };\n\n    /**\n     * Apply selector replacement and scope prefixing to a set of style rules\n     * @param {CSSRuleList} cssRules\n     * @param {String} scopeSelector - applied as prefix; also used as replacementSelector if none specified\n     * @param {String[]} toReplace - list of selectors to be replaced by replacementSelector\n     * @param {String} replacementSelector\n     * @returns {String} styles, with scopeSelector prefix applied\n     */\n    function _scopeStyles (cssRules, scopeSelector, toReplace, replacementSelector) {\n        if (!cssRules) {\n            return '';\n        }\n\n        if (!replacementSelector) {\n            replacementSelector = scopeSelector;\n        }\n\n        const scopedStyles = Object.values(cssRules).map(rule => {\n            // avoid @import, @media, @keyframes etc\n\n            if (!rule.selectorText) {\n                return '';\n            }\n\n            /**\n             * Need to split selectorList apart from rules, before splitting it by comma\n             * @example CSS:\n             *   selector1, selector2 { rules; }\n             */\n            const rulesInBrackets = rule.cssText.substr(rule.selectorText.length).trim();\n            const selectors = rule.selectorText.split(/\\s*,\\s*/);\n\n            const scopedSelectors = [];\n\n            for (let singleSelectorText of selectors) {\n                // avoid the most obvious top level single selectors that won't work even if scoped\n                if (['html', 'body', 'div.qti-item'].includes(singleSelectorText)) {\n                    continue;\n                }\n\n                // make the replacements\n                let numRepeat = 0;\n                if (scopeSelector && toReplace) {\n                    for (let toReplaceSelector of toReplace) {\n                        if (singleSelectorText.includes(toReplaceSelector)) {\n                            if (numRepeat > 0) {\n                                replacementSelector = '';\n                            }\n                            singleSelectorText = singleSelectorText.replace(\n                                new RegExp(toReplaceSelector, 'ig'),\n                                replacementSelector\n                            );\n                            numRepeat++;\n                        }\n                    }\n                }\n\n                // has desired scoping been applied to the rule?\n                const containsScopeSelector =\n                    singleSelectorText.includes(`${scopeSelector} `) ||\n                    singleSelectorText.startsWith(scopeSelector) ||\n                    singleSelectorText.endsWith(scopeSelector);\n\n                // scope unscoped rule by the scope selector\n                if (scopeSelector && !containsScopeSelector) {\n                    scopedSelectors.push(`${scopeSelector} ${singleSelectorText}`);\n                } else {\n                    scopedSelectors.push(singleSelectorText);\n                }\n            }\n\n            if (scopedSelectors.length) {\n                return `${scopedSelectors.join(',')} ${rulesInBrackets}`;\n            }\n            return '';\n        });\n\n        return scopedStyles.filter(str => str.length > 0).join('\\n');\n    }\n\n    return {\n        handleStylesheetLoad\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n\ndefine('taoMediaManager/qtiCreator/helper/sharedStimulusLoader',[\n    'jquery',\n    'taoQtiItem/qtiItem/core/Loader',\n    'taoQtiItem/qtiCreator/model/qtiClasses',\n    'taoMediaManager/qtiCreator/helper/createDummyItemData',\n    'core/dataProvider/request',\n    'util/url',\n    'taoMediaManager/qtiCreator/helper/formatStyles'\n], function ($, Loader, qtiClasses, creatorDummyItemData, request, urlUtil, formatStyles ) {\n    'use strict';\n\n    const qtiNamespace = 'http://www.imsglobal.org/xsd/imsqti_v2p2';\n\n    const qtiSchemaLocation = {\n        'http://www.imsglobal.org/xsd/imsqti_v2p2' : 'http://www.imsglobal.org/xsd/qti/qtiv2p2/imsqti_v2p2.xsd'\n    };\n\n    const languagesUrl = urlUtil.route('index', 'Languages', 'tao');\n\n    const creatorLoader = {\n        loadSharedStimulus(config, callback) {\n\n            if (config.id) {\n                const languagesList = request(languagesUrl);\n                const assetData = request(config.assetDataUrl, { id: config.id });\n                const assetStyles = request(config.assetDataStyles, { uri: config.id });\n                Promise.all([languagesList, assetData, assetStyles]).then((values) => {\n                    let loader, itemData;\n\n                    itemData = creatorDummyItemData(values[1]);\n\n                    if (values[2].children.length) {\n                        values[2].children.forEach((stylesheet, index) => {\n                            if (stylesheet.name !== 'tao-user-styles.css') {\n                                const serial = `creator_${index}`;\n                                const link = urlUtil.route('loadStylesheet', 'SharedStimulusStyling', 'taoMediaManager', {\n                                    uri: config.id,\n                                    stylesheet: stylesheet.name\n                                });\n                                // avoid adding the CSS file on Preview list everytime Asset is clicked\n                                itemData.stylesheets[serial] = {\n                                    qtiClass: 'stylesheet',\n                                    attributes: {\n                                        href: link,\n                                        media: 'all',\n                                        title: stylesheet.name,\n                                        type: 'text/css',\n                                        onload: (e => formatStyles.handleStylesheetLoad(e))\n                                    },\n                                    serial,\n                                    getComposingElements: () => ({})\n                                };\n                            }\n                        });\n                    }\n\n\n                    loader = new Loader().setClassesLocation(qtiClasses);\n                    loader.loadItemData(itemData, function(loadedItem) {\n                        let namespaces;\n\n                        // convert item to current QTI version\n                        namespaces = loadedItem.getNamespaces();\n                        namespaces[''] = qtiNamespace;\n                        loadedItem.setNamespaces(namespaces);\n                        loadedItem.setSchemaLocations(qtiSchemaLocation);\n\n                        //add languages list to the item\n                        if (languagesList) {\n                            loadedItem.data('languagesList', values[0]);\n                        }\n\n                        callback(loadedItem, this.getLoadedClasses());\n                    });\n                });\n            }\n        }\n    };\n\n    return creatorLoader;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA;\n */\n\ndefine('taoMediaManager/qtiCreator/renderers/config',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/config',\n    'taoItems/assets/manager',\n    'taoItems/assets/strategies'\n], function (_, commonRenderConfig, assetManagerFactory, assetStrategies) {\n    'use strict';\n\n    //asset manager using base url\n    const assetManager = assetManagerFactory(\n        [assetStrategies.taomedia, assetStrategies.external, assetStrategies.base64, assetStrategies.baseUrl],\n        { baseUrl: '' }\n    );\n\n    const locations = _.defaults(\n        {\n            _container: 'taoQtiItem/qtiCreator/renderers/Container',\n            _tooltip: 'taoQtiItem/qtiCreator/renderers/Tooltip',\n            assessmentItem: 'taoMediaManager/qtiCreator/renderers/Item',\n            figure: 'taoMediaManager/qtiCreator/renderers/Figure',\n            img: 'taoMediaManager/qtiCreator/renderers/Img',\n            figcaption: 'taoMediaManager/qtiCreator/renderers/Figcaption',\n            math: 'taoQtiItem/qtiCreator/renderers/Math',\n            object: 'taoMediaManager/qtiCreator/renderers/Object',\n            table: 'taoMediaManager/qtiCreator/renderers/Table'\n        },\n        commonRenderConfig.locations\n    );\n\n    return {\n        name: 'creatorRenderer',\n        locations: locations,\n        options: {\n            assetManager: assetManager\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * Define the Qti Item Creator Renderer\n */\ndefine('taoMediaManager/qtiCreator/renderers/Renderer',[\n    'taoQtiItem/qtiRunner/core/Renderer',\n    'taoMediaManager/qtiCreator/renderers/config'\n], function(Renderer, config){\n    'use strict';\n\n    return Renderer.build(config.locations, config.name, config.options);\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\ndefine('taoMediaManager/qtiCreator/helper/creatorRenderer',[\n    'jquery',\n    'lodash',\n    'taoMediaManager/qtiCreator/renderers/Renderer',\n    'taoItems/assets/manager',\n    'taoItems/assets/strategies',\n    'util/dom'\n], function ($, _, Renderer, assetManagerFactory, assetStrategies, dom) {\n    'use strict';\n\n    //configure and instanciate once only:\n    let creatorRenderer = null;\n\n    /**\n     * Get a preconfigured renderer singleton\n     *\n     * @param {Boolean} reset\n     * @param {Object} config\n     * @param {Object} areaBroker - the QtiCreator area broker\n     * @returns {Object} - a configured instance of creatorRenderer\n     */\n    const get = function (reset, config, areaBroker) {\n        let $bodyEltForm;\n\n        config = config || {};\n        config.properties = config.properties || {};\n\n        if (!creatorRenderer || reset) {\n            $bodyEltForm = creatorRenderer ? creatorRenderer.getOption('bodyElementOptionForm') : null;\n            if (reset || !$bodyEltForm || !$bodyEltForm.length || !dom.contains($bodyEltForm)) {\n                // Renderer with binded locations from taoMediaManager/qtiCreator/renderers/config.js\n                creatorRenderer = new Renderer({\n                    lang: '',\n                    uri: '',\n                    shuffleChoices: false,\n                    itemOptionForm: $('#item-editor-item-property-bar #sidebar-right-passage-properties .panel'),\n                    bodyElementOptionForm: areaBroker.getElementPropertyPanelArea(),\n                    textOptionForm: $('#item-editor-text-property-bar #sidebar-right-text-block-properties .panel'),\n                    mediaManager: {\n                        appendContainer: '#mediaManager',\n                        browseUrl: config.properties.getFilesUrl,\n                        uploadUrl: config.properties.fileUploadUrl,\n                        deleteUrl: config.properties.fileDeleteUrl,\n                        downloadUrl: config.properties.fileDownloadUrl,\n                        fileExistsUrl: config.properties.fileExistsUrl,\n                        path: config.properties.path,\n                        root: config.properties.root\n                    },\n                    qtiCreatorContext: config.qtiCreatorContext,\n                    locations: config.properties.locations\n                });\n\n                //update the resolver baseUrl\n                creatorRenderer.getAssetManager().setData({ baseUrl: config.properties.baseUrl || '' });\n\n                creatorRenderer.setAreaBroker(areaBroker);\n\n                // extend creator renderer to give access to the creator context\n                _.assign(creatorRenderer, {\n                    getCreatorContext: function getCreatorContext() {\n                        return this.getOption('qtiCreatorContext');\n                    }\n                });\n            }\n        }\n\n        return creatorRenderer;\n    };\n\n    return {\n        get: get,\n\n        setOption: function (name, value) {\n            return get().setOption(name, value);\n        },\n        setOptions: function (options) {\n            return get().setOptions(options);\n        },\n        load: function (qtiClasses, done) {\n            return get().load(function (...rest) {\n                if (_.isFunction(done)) {\n                    done.apply(this, rest);\n                }\n            }, qtiClasses);\n        }\n    };\n});\n\n","\ndefine('tpl!taoMediaManager/qtiCreator/tpl/toolbars/cssToggler', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li data-css-res=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"path\") || (depth0 != null ? lookupProperty(depth0,\"path\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":18},\"end\":{\"line\":1,\"column\":26}}}) : helper)))\n    + \"\\\" data-order=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"order\") || (depth0 != null ? lookupProperty(depth0,\"order\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"order\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":40},\"end\":{\"line\":1,\"column\":49}}}) : helper)))\n    + \"\\\">\\n    <span class=\\\"icon-preview style-sheet-toggler\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":58},\"end\":{\"line\":2,\"column\":67}}}) : helper)))\n    + \"\\\"></span>\\n    <span class=\\\"file-label truncate\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"editLabelTxt\") || (depth0 != null ? lookupProperty(depth0,\"editLabelTxt\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"editLabelTxt\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":45},\"end\":{\"line\":3,\"column\":61}}}) : helper)))\n    + \"\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"label\") || (depth0 != null ? lookupProperty(depth0,\"label\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"label\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":63},\"end\":{\"line\":3,\"column\":72}}}) : helper)))\n    + \"</span>\\n    <input type=\\\"text\\\" class=\\\"style-sheet-label-editor\\\" value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"label\") || (depth0 != null ? lookupProperty(depth0,\"label\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"label\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":63},\"end\":{\"line\":4,\"column\":72}}}) : helper)))\n    + \"\\\">\\n    <span class=\\\"icon-bin\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"deleteTxt\") || (depth0 != null ? lookupProperty(depth0,\"deleteTxt\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"deleteTxt\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":34},\"end\":{\"line\":5,\"column\":47}}}) : helper)))\n    + \"\\\" data-role=\\\"css-delete\\\"></span>\\n    <span class=\\\"icon-download\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"downloadTxt\") || (depth0 != null ? lookupProperty(depth0,\"downloadTxt\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"downloadTxt\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":39},\"end\":{\"line\":6,\"column\":54}}}) : helper)))\n    + \"\\\" data-role=\\\"css-download\\\"></span>\\n</li>\";\n},\"useData\":true}); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * @author dieter <dieter@taotesting.com>\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\n\ndefine('taoMediaManager/qtiCreator/editor/styleEditor/styleEditor',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/urlParser',\n    'core/dataProvider/request',\n    'tpl!taoMediaManager/qtiCreator/tpl/toolbars/cssToggler',\n    'taoMediaManager/qtiCreator/helper/formatStyles',\n    'util/url',\n    'services/features',\n    'jquery.fileDownload'\n], function ($, _, __, UrlParser, request, cssTpl, formatStyles, urlUtil, featuresService) {\n    'use strict';\n\n    const styleSheetManagerVisibilityKey = 'taoMediaManager/creator/StyleSheetManager';\n    let itemConfig;\n\n    /**\n     * qtiItemCreator config provided from QtiCreator\n     * used for generation of the ajax uri\n     */\n    let globalConfig;\n\n    /**\n     * generate Ajax URI\n     * @param {String} action\n     * @returns {*}\n     */\n    const _getUri = function (action) {\n        return globalConfig[`${action}CssUrl`];\n    };\n\n    /**\n     * Extract the file name from a path\n     * @param {String} path\n     * @returns {*}\n     * @private\n     */\n    const _basename = function (path) {\n        return path.substring(path.lastIndexOf('/') + 1);\n    };\n\n    // hash class for shared stimulus styles\n    const mainClassSelector = 'mainClass';\n    const hashClassSelector = 'hashClass';\n    const taoHashClassPrefix = 'tao-';\n    let hashClass = '';\n    let mainClass = '';\n\n    // stylesheet as object\n    let style = {},\n        currentItem,\n        customStylesheet = '';\n    // DOM element to hold the style\n    const $styleElem = (function () {\n            let styleElem = $('#item-editor-user-styles');\n            if (!styleElem.length) {\n                styleElem = $('<style>', { id: 'item-editor-user-styles' });\n                $('head').append(styleElem);\n            } else {\n                styleElem.empty();\n            }\n            return styleElem;\n        })(),\n        common = {\n            title: __('Disable this stylesheet temporarily'),\n            deleteTxt: __('Remove this stylesheet'),\n            editLabelTxt: __('Edit stylesheet label'),\n            downloadTxt: __('Download this stylesheet'),\n            preparingMessageHtml: __('Preparing CSS, please wait'),\n            failMessageHtml: __('There was a problem downloading your CSS, please try again.'),\n            isInValidLocalTxt: __(\n                'This stylesheet has not been found on the server. you may want to delete this reference'\n            )\n        };\n    /**\n     * Delete all custom styles\n     * @returns {Boolean}\n     */\n    const erase = function () {\n        style = {};\n        $styleElem.text('');\n        return false;\n    };\n\n    /**\n     * Create CSS and add it to DOM\n     *\n     * @param {Boolean} dontAppend whether or not to append the stylesheet to the DOM. This is used by the iframe preview\n     * @returns {Boolean}\n     */\n    const create = function (dontAppend) {\n        let mSelector, // selector inside a media query\n            mProp, // property inside a media query\n            css = '';\n\n        if (_.isEmpty(style)) {\n            return erase();\n        }\n\n        // rebuild CSS\n        _.forEach(style, (value1, key1) => {\n            // first level key, could be selector or media query\n            css += `${key1}{`;\n            _.forEach(value1, (value2, key2) => {\n                // second level key, could be css property or selector\n                // in the case of a surrounding media query\n                if (_.isPlainObject(value2)) {\n                    for (mSelector in value2) {\n                        css += `${key2}{`;\n                        for (mProp in value2) {\n                            css += `${mProp}:${value2[mSelector]};`;\n                        }\n                        css += '}';\n                    }\n                } else {\n                    // regular selectors\n                    css += `${key2}:${value2};`;\n                }\n            });\n            css += '}\\n';\n        });\n\n        if (!dontAppend) {\n            $styleElem.text(css);\n        }\n        return css;\n    };\n\n    /**\n     * Apply rule to CSS\n     *\n     * @param {{string}} selector\n     * @param {{string}} property\n     * @param {{string}} value\n     */\n    const apply = function (selector, property, value) {\n        const itemBodyClass = document.querySelector('.qti-itemBody').classList;\n        itemBodyClass.forEach(function (className) {\n            const searchClass = className.match(/(?<className>tao-\\w+)?/); // eslint-disable-line\n            if (searchClass.groups.className) {\n                mainClass = searchClass.groups.className;\n            }\n        });\n        selector = selector.replace(mainClassSelector, mainClass);\n        selector = selector.replace(hashClassSelector, hashClass);\n\n        style[selector] = style[selector] || {};\n\n        // delete this rule\n        if (!value) {\n            delete style[selector][property];\n            if (_.size(style[selector]) === 0) {\n                delete style[selector];\n            }\n        } else {\n            // add this rule\n            value = value.includes('!important') ? value : `${value} !important`;\n            style[selector][property] = value;\n        }\n\n        // apply rule\n        create();\n\n        /**\n         * Fires a change notification on the item style\n         * @event taoQtiItem/qtiCreator/editor/styleEditor/styleEditor#stylechange.qti-creator\n         * @property {Object} [detail] An object providing some additional detail on the event\n         * @property {Boolean} [detail.initializing] Tells if the stylechange occurs at init time\n         */\n        $(document).trigger('stylechange.qti-creator');\n    };\n\n    /**\n     * Has the class been initialized\n     *\n     * @returns {Boolean}\n     */\n    const verifyInit = function verifyInit() {\n        if (!itemConfig) {\n            throw new Error('Missing itemConfig, did you call styleEditor.init()?');\n        }\n        return true;\n    };\n\n    /**\n     * Save the resulting CSS to a file\n     * @returns {Promise}\n     */\n    const save = function save() {\n        verifyInit();\n        return request(\n            _getUri('save'),\n            _.extend({}, itemConfig, {\n                cssJson: JSON.stringify(style),\n                stylesheetUri: customStylesheet.attr('href')\n            }),\n            'POST'\n        );\n    };\n\n    const deleteStylesheet = function (stylesheet) {\n        verifyInit();\n        return request(\n            _getUri('save'),\n            _.extend({}, itemConfig, {\n                cssJson: JSON.stringify({}),\n                stylesheetUri: `css/${stylesheet}`\n            }),\n            'POST'\n        );\n    };\n\n    /**\n     * Download CSS as file\n     * @param {String} uri\n     */\n    const download = function (uri, name) {\n        verifyInit();\n        let style = uri.match(/stylesheet=(?<groupName>.+\\.css)?/);\n        if (!style) {\n            style = uri.match(/\\/(?<groupName>.+\\.css)?/);\n        }\n        let styleName = '';\n        if (style && style.groups && style.groups.groupName) {\n            styleName = decodeURIComponent(style.groups.groupName);\n        }\n        const downloadUrl = urlUtil.build(_getUri('download'), {\n            uri: globalConfig['id'],\n            stylesheet: styleName\n        });\n\n        if (!name.length) {\n            name = styleName;\n        }\n\n        fetch(downloadUrl)\n            .then(resp => resp.blob())\n            .then(blob => {\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.style.display = 'none';\n                a.href = url;\n                a.download = name;\n                document.body.appendChild(a);\n                a.click();\n                window.URL.revokeObjectURL(url);\n            })\n            .catch(() => common.failMessageHtml);\n    };\n\n    /**\n     * Add a single stylesheet, the custom stylesheet will be loaded as object\n     *\n     * @param {Object} stylesheet\n     */\n    const addStylesheet = function (stylesheet, itemConfig) {\n        let fileName, link, listEntry, parser;\n        function loadStylesheet(linkElement, stylesheetObject, isLocal, isValid) {\n            // asynhroniusly loaded stylesheets should be inserted in right order\n            // relays on data-serial=\"creator_X\" attribute, where X is order number\n            // see taoMediaManager/views/js/qtiCreator/helper/sharedStimulusLoader.js\n            const serialNumber = Number(linkElement.data('serial').replace('creator_', ''));\n            \n            // in the given scenario we cannot test whether a remote stylesheet really exists\n            // this would require to pipe all remote css via php curl\n            const isInvalidLocal = isLocal && !isValid,\n                tplData = {\n                    path: stylesheetObject.attr('href'),\n                    label: stylesheetObject.attr('title') || fileName,\n                    title: common.title,\n                    deleteTxt: common.deleteTxt,\n                    downloadTxt: common.downloadTxt,\n                    editLabelTxt: isInvalidLocal ? common.isInValidLocalTxt : common.editLabelTxt,\n                    order: serialNumber\n                };\n\n            // create list entry\n            listEntry = $(cssTpl(tplData));\n\n            listEntry.data('stylesheetObj', stylesheetObject);\n\n            // initialize download button\n            const listLinks = $('#style-sheet-toggler').find('[data-order]');\n            let insertedInList = false;\n            listLinks.each(function (){\n                const order = Number($(this).data('order'));\n                if (!insertedInList && order > serialNumber) {\n                    $(this).before(listEntry);\n                    insertedInList = true;\n                }\n            });\n            if (!insertedInList) {\n                $('#style-sheet-toggler').append(listEntry);\n            }\n\n            if (isInvalidLocal) {\n                listEntry.addClass('not-available');\n                listEntry.find('[data-role=\"css-download\"], .style-sheet-toggler').css('visibility', 'hidden');\n                return;\n            }\n            // insert link according order\n            const cssLinks = $('link[data-serial^=\"creator\"]');\n            let inserted = false;\n            cssLinks.each(function (){\n                const serialCur = Number($(this).data('serial').replace('creator_', ''));\n                if (!inserted && serialCur > serialNumber) {\n                    $(this).before(linkElement);\n                    inserted = true;\n                }\n            });\n            if (!inserted) {\n                $styleElem.before(linkElement);\n            }\n\n            // time difference between loading the css file and applying the styles\n            setTimeout(\n                function () {\n                    let isInit = false;\n                    $(document).trigger('customcssloaded.styleeditor', [style]);\n                    $(window).trigger('resize');\n                    if (currentItem.pendingStylesheetsInit) {\n                        isInit = true;\n                        currentItem.pendingStylesheetsInit--;\n                    }\n\n                    /**\n                     * Fires a change notification on the item style\n                     * @event taoQtiItem/qtiCreator/editor/styleEditor/styleEditor#stylechange.qti-creator\n                     * @property {Object} [detail] An object providing some additional detail on the event\n                     * @property {Boolean} [detail.initializing] Tells if the stylechange occurs at init time\n                     */\n                    $(document).trigger('stylechange.qti-creator', [{ initializing: isInit }]);\n                },\n                isLocal ? 500 : 3500\n            );\n        }\n\n        // argument is uri\n        if (_.isString(stylesheet)) {\n            stylesheet = currentItem.createStyleSheet(stylesheet);\n        }\n\n        fileName = _basename(stylesheet.attr('href'));\n        // link with cache buster\n        link = (function () {\n            const _link = $(stylesheet.render());\n            const _href =\n                (itemConfig &&\n                    urlUtil.route('loadStylesheet', 'SharedStimulusStyling', 'taoMediaManager', {\n                        uri: itemConfig.id,\n                        stylesheet: fileName\n                    })) ||\n                _link.attr('href');\n            const _sep = _href.indexOf('?') > -1 ? '&' : '?';\n            _link.attr('href', _href + _sep + new Date().getTime().toString());\n            _link[0].onload = e => formatStyles.handleStylesheetLoad(e);\n            return _link;\n        })();\n\n        // cache css before applying allows for a pretty good guess\n        // when the stylesheet is loaded and the buttons in the style editor\n        // can be changed\n        parser = new UrlParser(link.attr('href'));\n        if (parser.checkCORS()) {\n            $.when($.ajax(link.attr('href'))).then(\n                function () {\n                    loadStylesheet(link, stylesheet, true, true);\n                },\n                // add file to list even on failure to be able to remove it from the item\n                function () {\n                    loadStylesheet(link, stylesheet, true, false);\n                }\n            );\n        } else {\n            // otherwise load it with a big timeout and hope for the best\n            // unfortunately this dirty way is the only possibility in cross domain environments\n            loadStylesheet(link, stylesheet, false);\n        }\n    };\n\n    /**\n     * Add style sheets to toggler\n     */\n    const addItemStylesheets = function () {\n        let currentStylesheet;\n        currentItem.pendingStylesheetsInit = _.size(currentItem.stylesheets);\n\n        _.forEach(currentItem.stylesheets, value => {\n            currentStylesheet = value;\n\n            if ('tao-user-styles.css' === _basename(currentStylesheet.attr('href'))) {\n                customStylesheet = currentStylesheet;\n            } else {\n                // add those that are loaded synchronously\n                addStylesheet(value);\n            }\n        });\n\n        // if no custom css had been found, add empty stylesheet anyway\n        if (!customStylesheet) {\n            customStylesheet = currentItem.createStyleSheet('css/tao-user-styles.css');\n        }\n    };\n\n    /**\n     * Remove orphaned stylesheets. These would be present if previously another item has been edited\n     */\n    const removeOrphanedStylesheets = function () {\n        $('link[data-serial]').remove();\n        customStylesheet = null;\n        erase();\n    };\n\n    /**\n     * retrieve the current item\n     *\n     * @returns {*}\n     */\n    const getItem = function () {\n        return currentItem;\n    };\n\n    /**\n     * Initialize class\n     * @param {Object} item\n     * @param {Object} config\n     */\n    const init = function (item, config) {\n        let href;\n\n        globalConfig = config;\n        // promise\n        currentItem = item;\n\n        //prepare config object\n        itemConfig = {\n            uri: config.id,\n            lang: config.lang\n        };\n\n        removeOrphanedStylesheets();\n\n        // this creates at the same time customStylesheet in case it doesn't exist yet\n        addItemStylesheets();\n\n        href = customStylesheet.attr('href');\n\n        currentItem.data('responsive', true);\n\n        request(_getUri('load'), _.extend({}, itemConfig, { stylesheetUri: href })).then(function (_style) {\n            // copy style to global style\n            style = {};\n\n            Object.keys(_style).forEach(key => {\n                if (!key.includes(mainClass)) {\n                    style[key] = _style[key];\n                } else {\n                    const selectorWithoutMainClass = key.replace(` .${mainClass}`, '').trim();\n                    style[selectorWithoutMainClass] = _style[key];\n                }\n            })\n\n            // apply rules\n            create();\n\n            // inform editors about custom sheet\n            $(document).trigger('customcssloaded.styleeditor', [style]);\n        });\n\n        if (featuresService.isVisible(styleSheetManagerVisibilityKey, false)) {\n            $('#sidebar-right-css-manager').show();\n        }\n    };\n\n    const getStyle = function () {\n        return style;\n    };\n\n    const getHashClass = function () {\n        return hashClass;\n    };\n\n    const getMainClass = function () {\n        return mainClass;\n    };\n\n    const setHashClass = function (cssClass) {\n        hashClass = cssClass;\n    };\n\n    const setMainClass = function (cssClass) {\n        mainClass = cssClass;\n    };\n\n    const generateHashClass = function () {\n        return (hashClass = `${taoHashClassPrefix}${Math.random().toString(36).substr(2, 9)}`);\n    };\n\n    const generateMainClass = function () {\n        return (mainClass = `${taoHashClassPrefix}${Math.random().toString(36).substr(2, 9)}`);\n    };\n\n    const replaceHashClass = function (selector) {\n        return (hashClass && selector.replace(hashClassSelector, hashClass)) || selector;\n    };\n\n    const replaceMainClass = function (selector) {\n        return (mainClass && selector.replace(mainClassSelector, mainClass)) || selector;\n    };\n\n    const clearCache = function () {\n        removeOrphanedStylesheets();\n        $(document).off('customcssloaded.styleeditor');\n    };\n\n    return {\n        apply: apply,\n        save: save,\n        deleteStylesheet: deleteStylesheet,\n        download: download,\n        erase: erase,\n        init: init,\n        create: create,\n        getItem: getItem,\n        getStyle: getStyle,\n        addStylesheet: addStylesheet,\n        getHashClass: getHashClass,\n        setHashClass: setHashClass,\n        generateHashClass: generateHashClass,\n        replaceHashClass: replaceHashClass,\n        getMainClass: getMainClass,\n        setMainClass: setMainClass,\n        generateMainClass: generateMainClass,\n        replaceMainClass: replaceMainClass,\n        clearCache: clearCache\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/editor/styleEditor/styleSheetToggler',[\n    'jquery',\n    'taoMediaManager/qtiCreator/editor/styleEditor/styleEditor',\n    'i18n',\n    'lodash',\n    'util/url',\n    'taoQtiItem/qtiCreator/model/Stylesheet',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup',\n    'ui/resourcemgr'\n], function ($, styleEditor, __, _, urlUtil, Stylesheet, genericFeedbackPopup) {\n    'use strict';\n\n    var $doc = $(document);\n\n    var styleSheetToggler = (function () {\n\n        var init = function (itemConfig) {\n\n            const _createInfoBox = function (data) {\n                var $messageBox = $(genericFeedbackPopup(data)),\n                    closeTrigger = $messageBox.find('.close-trigger');\n\n                $('body').append($messageBox);\n\n                closeTrigger.on('click', function () {\n                    $messageBox.fadeOut(function () {\n                        $(this).remove();\n                    });\n                });\n\n                setTimeout(function () {\n                    closeTrigger.trigger('click');\n                }, 4000);\n\n                return $messageBox;\n            };\n\n            const cssToggler = $('#style-sheet-toggler');\n            const uploader = $('#stylesheet-uploader');\n            const customCssToggler = $('[data-custom-css]');\n            const getContext = function (trigger) {\n                trigger = $(trigger);\n                const li = trigger.closest('li');\n                const stylesheetObj = li.data('stylesheetObj') || new Stylesheet({ href: li.data('css-res') });\n                const input = li.find('.style-sheet-label-editor');\n                const labelBox = input.prev('.file-label');\n                const label = input.val();\n\n                return {\n                    li: li,\n                    input: input,\n                    label: label,\n                    labelBox: labelBox,\n                    isCustomCss: !!li.data('custom-css'),\n                    isDisabled: li.find('.icon-preview').hasClass('disabled'),\n                    stylesheetObj: stylesheetObj,\n                    cssUri: stylesheetObj.attr('href')\n                };\n            };\n\n\n\n            /**\n             * Upload custom stylesheets\n             */\n            uploader.on('click', function () {\n\n                uploader.resourcemgr({\n                    className: 'stylesheets',\n                    appendContainer: '#mediaManager',\n                    pathParam: 'stylesheet',\n                    path: 'taomedia://mediamanager/',\n                    stylesheet: 'taomedia://mediamanager/',\n                    root: 'local',\n                    browseUrl: urlUtil.route('getStylesheets', 'SharedStimulusStyling', 'taoMediaManager'),\n                    uploadUrl: urlUtil.route('upload', 'SharedStimulusStyling', 'taoMediaManager'),\n                    deleteUrl: urlUtil.route('fileDeleteUrl', 'SharedStimulusStyling', 'taoMediaManager'),\n                    downloadUrl: urlUtil.route('loadStylesheet', 'SharedStimulusStyling', 'taoMediaManager'),\n                    params: {\n                        uri: itemConfig.id,\n                        lang: itemConfig.lang,\n                        filters: 'text/css'\n                    },\n                    select: function (e, files) {\n                        let styleListNames = ['/tao-user-styles.css'];\n                        let styleList = $('[data-css-res]');\n                        if (styleList.length > 0) {\n                            styleList.each((i, style) => {\n                                let styleGroup = style.dataset && style.dataset.cssRes && style.dataset.cssRes.match(/stylesheet=(?<groupName>.+\\.css)?/);\n                                if (!styleGroup) {\n                                    // new added files, don't have 'stylesheet=' in cssRes\n                                    styleGroup = style.dataset && style.dataset.cssRes && style.dataset.cssRes.match(/\\/(?<groupName>.+\\.css)?/);\n                                }\n                                if (styleGroup && styleGroup.groups && styleGroup.groups.groupName) {\n                                    styleListNames.push(`/${decodeURIComponent(styleGroup.groups.groupName)}`);\n                                }\n                            });\n                        }\n\n                        const l = files.length;\n                        for (let i = 0; i < l; i++) {\n                            if (styleListNames.includes(files[i].file)) {\n                                _createInfoBox({\n                                    message: __('A stylesheet named <b>%s</b> is already attached to the passage.').replace('%s', files[i].file.substring(1)),\n                                    type: 'error'\n                                });\n                            } else {\n                                styleEditor.addStylesheet(files[i].file, itemConfig);\n                            }\n                        }\n                    }\n                });\n            });\n\n            /**\n             * Confirm to save the item\n             * @param {Object} trigger\n             */\n            const deleteStylesheet = function(trigger) {\n                var context = getContext(trigger),\n                    attr = context.isDisabled ? 'disabled-href' : 'href',\n                    cssLinks = $('head link');\n\n                let cssUri = context.cssUri;\n                if (context.cssUri[0] === '/') {\n                    cssUri = context.cssUri.split('/').reverse()[0];\n                }\n                const deleteFile = context.stylesheetObj.attr('title') || cssUri;\n                styleEditor.deleteStylesheet(deleteFile);\n\n                // remove file from resourceMgr if it is cached\n                const mediaManager = $('#mediaManager');\n                if (mediaManager.children.length) {\n                    $('#mediaManager').children().trigger('filedelete.resourcemgr', [`/${context.label}`]);\n                }\n\n                cssLinks.filter(`[${attr}*=\"${cssUri}\"]`).remove();\n                context.li.remove();\n\n\n                $('.feedback-info').hide();\n                _createInfoBox({\n                    message: __('Style Sheet <b>%s</b> removed<br> Click <i>Add Style Sheet</i> to re-apply.').replace('%s', context.label),\n                    type: 'info'\n                });\n            };\n\n\n            /**\n             * Download current stylesheet\n             *\n             * @param {Object} trigger\n             */\n            const downloadStylesheet = function(trigger) {\n                styleEditor.download(getContext(trigger).stylesheetObj.attributes.href, getContext(trigger).stylesheetObj.attributes.title);\n            };\n\n            /**\n             * Modify stylesheet title (save modification)\n             * @param {Object} trigger\n             * @returns {Boolean}\n             */\n            const saveLabel = function (trigger) {\n                var context = getContext(trigger),\n                    title = $.trim(context.input.val());\n\n                if (!title) {\n                    context.stylesheetObj.attr('title', '');\n                    return false;\n                }\n\n                context.stylesheetObj.attr('title', title);\n                context.input.hide();\n                context.labelBox.html(title).show();\n            };\n\n            /**\n             * Dis/enable style sheets\n             * @param {Object} trigger\n             */\n            const handleAvailability = function (trigger) {\n                const context = getContext(trigger);\n\n                // custom styles are handled in a style element, not in a link\n                if (context.isCustomCss || context.label === 'tao-user-styles.css') {\n                    if (context.isDisabled) {\n                        $('#item-editor-user-styles')[0].disabled = false;\n                        customCssToggler.removeClass('not-available');\n                    } else {\n                        $('#item-editor-user-styles')[0].disabled = true;\n                        customCssToggler.addClass('not-available');\n                    }\n                    // add some visual feed back to the triggers\n                    $(trigger).toggleClass('disabled');\n                } else {\n                    // all other styles are handled via their link element\n                    const myLink = $(`link[data-serial=${context.stylesheetObj.serial}`);\n                    myLink.ready(() => {\n                        if (context.isDisabled) {\n                            myLink[0].sheet.disabled = false;\n                            context.li.removeClass('not-available');\n                        } else {\n                            myLink[0].sheet.disabled = true;\n                            context.li.addClass('not-available');\n                        }\n                        // add some visual feed back to the triggers\n                        $(trigger).toggleClass('disabled');\n                    });\n                }\n            };\n\n            /**\n             * Distribute click events\n             */\n            cssToggler.on('click', function (e) {\n                var target = e.target,\n                    className = target.className;\n\n                // distribute click actions\n                if (className.indexOf('icon-preview') > -1) {\n                    handleAvailability(e.target);\n                } else if (target.parentElement.className !== 'not-available') {\n                    if (className.indexOf('icon-bin') > -1) {\n                        deleteStylesheet(e.target);\n                    } else if (className.indexOf('icon-download') > -1) {\n                        downloadStylesheet(e.target);\n                    }\n                }\n            });\n\n\n            /**\n             * Handle renaming on enter\n             */\n            cssToggler.on('keydown', 'input', function (e) {\n                if (e.keyCode === 13) {\n                    $(e.target).trigger('blur');\n                }\n            });\n\n            /**\n             * Handle renaming on blur\n             */\n            cssToggler.on('blur', 'input', function (e) {\n                saveLabel(e.target);\n            });\n\n\n        };\n\n        return {\n            init: init\n        };\n\n    })();\n\n    return styleSheetToggler;\n});\n\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA;\n *\n */\n\ndefine('taoMediaManager/qtiCreator/editor/styleEditor/fontSelector',[\n    'jquery',\n    'lodash',\n    'json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json',\n    'taoMediaManager/qtiCreator/editor/styleEditor/styleEditor',\n    'i18n',\n    'select2'\n], function ($, _, fontStacks, styleEditor, __) {\n    'use strict';\n\n    /**\n     * Populate a select box with a list of fonts to select from.\n     * On change apply the selected font to the specified target.\n     *\n     * @example\n     * The expected mark-up must be like this:\n     * <select\n     *   data-target=\"selector-of-targeted-element\"\n     *   data-not-selected=\"Select a font\n     *   data-selected=\"Reset to default\">\n     * <option value=\"\"></option>\n     *\n     * The function is called like this:\n     * fontSelector();\n     *\n     * @param {JQuery} $container\n     */\n    const fontSelector = function ($container) {\n        const selector = 'select#item-editor-font-selector',\n            $selector = $container.find(selector);\n        let target = styleEditor.replaceHashClass($selector.data('target'));\n        let normalize = function (font) {\n                return font.replace(/\"/g, \"'\").replace(/, /g, ',');\n            },\n            clean = function (font) {\n                return font.substring(0, font.indexOf(',')).replace(/'/g, '').replace(/\"/g, '');\n            },\n            resetButton = $selector.parent().find('[data-role=\"font-selector-reset\"]'),\n            toLabel = function (font) {\n                font = font.replace(/-/g, ' ');\n                return font.replace(/^([a-z\\u00E0-\\u00FC])|\\s+([a-z\\u00E0-\\u00FC])/g, function ($1) {\n                    return $1.toUpperCase();\n                });\n            },\n            format = function (state) {\n                const originalOption = state.element;\n                if (!state.id) {\n                    return state.text;\n                }\n                return `<span style=\"font-size: 12px;${$(originalOption).attr('style')}\">${state.text}</span>`;\n            },\n            reset = function () {\n                styleEditor.apply(target, 'font-family');\n                $selector.select2('val', '');\n            };\n        let applyToStylesEditor = true;\n\n        $selector.empty();\n        $selector.append(`<option value=\"\">${__('Default')}</option>`);\n\n        // initiate font family for Block\n        const styles = styleEditor.getStyle() || {};\n        const selectedFontFamily = styles[target] && styles[target]['font-family'] && clean(styles[target]['font-family']);\n\n        _.forEach(fontStacks, (value, key) => {\n            const optGroup = $('<optgroup>', { label: toLabel(key) });\n            _.forEach(value, font => {\n                const normalizeFont = normalize(font);\n                const option = $('<option>', {\n                    value: normalizeFont,\n                    text: clean(normalizeFont)\n                }).css({\n                    fontFamily: normalizeFont\n                });\n                if (clean(normalizeFont) === selectedFontFamily) {\n                    option.attr('selected', true);\n                }\n                optGroup.append(option);\n            });\n            $selector.append(optGroup);\n        });\n\n        resetButton.off('click').on('click', reset);\n\n        $selector.select2({\n            formatResult: format,\n            formatSelection: format,\n            width: 'resolve'\n        });\n\n        $selector.off('change').on('change', function () {\n            if (applyToStylesEditor) {\n                styleEditor.apply(target, 'font-family', $(this).val());\n            } else {\n                applyToStylesEditor = true;\n            }\n        });\n\n        /**\n         * style loaded from style sheet\n         */\n        $(document).on('customcssloaded.styleeditor', function (e, style) {\n            if (style[target] && style[target]['font-family']) {\n                $selector.select2('val', style[target]['font-family'].replace(' !important', ''));\n                $(`${selector} option:selected`).first().attr('selected', 'selected');\n            }\n            applyToStylesEditor = false;\n            $selector.trigger('change');\n        });\n    };\n\n    return fontSelector;\n});\n\n","define('taoMediaManager/qtiCreator/editor/styleEditor/colorSelector',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoMediaManager/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiCreator/helper/popup',\n    'lib/farbtastic/farbtastic'\n], function ($, _, __, styleEditor) {\n    'use strict';\n\n    // based on http://stackoverflow.com/a/14238466\n    // this conversion is required to communicate with farbtastic\n    function rgbToHex(color) {\n        function toHexPair(inp) {\n            return `0${parseInt(inp, 10).toString(16)}`.slice(-2);\n        }\n\n        // undefined can happen when no color is defined for a particular element\n        // isString on top of that should cover all sorts of weird input\n        if (!_.isString(color)) {\n            return color;\n        }\n\n        const rgbArr = /rgb\\s*\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/i.exec(color);\n\n        // color is not rgb\n        if (!_.isArray(rgbArr) || rgbArr.length !== 4) {\n            return color;\n        }\n\n        return `#${toHexPair(rgbArr[1])}${toHexPair(rgbArr[2])}${toHexPair(rgbArr[3])}`;\n    }\n\n    function additionalStylesToObject(additional = '') {\n        const styles = {};\n        const additionalStyles = additional.split(';');\n        additionalStyles.forEach(element => {\n            const keyValue = element.split(':');\n            styles[keyValue[0]] = keyValue[1];\n        });\n        return styles;\n    }\n\n    const colorSelector = function ($container) {\n        const colorPicker = $container.find('.item-editor-color-picker'),\n            widget = colorPicker.find('.color-picker'),\n            widgetBox = colorPicker.find('.color-picker-container'),\n            titleElement = colorPicker.find('.color-picker-title'),\n            input = colorPicker.find('.color-picker-input'),\n            resetButtons = colorPicker.find('.reset-button'),\n            colorTriggers = colorPicker.find('.color-trigger'),\n            colorTriggerLabels = colorPicker.find('label'),\n            $doc = $(document),\n            additionalStyles = {};\n        let currentProperty = 'color',\n            widgetObj;\n\n        /**\n         * Widget title\n         *\n         * @param {Object} property\n         * @param {JQueryElement} trigger\n         */\n        const setTitle = function (property, trigger) {\n            titleElement.text(trigger.parent().find('label').text());\n        };\n\n        /**\n         * Trigger button background\n         */\n        const setTriggerColor = function () {\n            colorTriggers.each(function () {\n                const $trigger = $(this);\n                let target = styleEditor.replaceHashClass($trigger.data('target'));\n                const style = styleEditor.getStyle() || {};\n                let value;\n                const targetOld = target.replace(' *', ''); // previous version was without *\n                if (style[target] && style[target][$trigger.data('value')]) {\n                    value = style[target][$trigger.data('value')].replace(' !important', '');\n                    $trigger.css('background-color', value);\n                    $trigger.attr('title', rgbToHex(value));\n                } else if (style[targetOld] && style[targetOld][$trigger.data('value')]) {\n                    value = style[targetOld][$trigger.data('value')].replace(' !important', '');\n                    $trigger.css('background-color', value);\n                    $trigger.attr('title', rgbToHex(value));\n                } else {\n                    // elements have no color at all\n                    $trigger.css('background-color', '');\n                    $trigger.attr('title', __('No value set'));\n                }\n            });\n        };\n\n        /**\n         * Trigger button background\n         */\n        const collectCommonAdditionalStyles = function () {\n            colorTriggers.each(function () {\n                const $trigger = $(this);\n                let target = styleEditor.replaceHashClass($trigger.data('target'));\n                const value = $trigger.data('value');\n                const styles = additionalStylesToObject($trigger.data('additional'));\n                Object.keys(styles).forEach(key => {\n                    if (!additionalStyles[key]) {\n                        additionalStyles[key] = [{ target, value }];\n                    } else {\n                        additionalStyles[key].push({ target, value });\n                    }\n                });\n            });\n        };\n\n        widgetObj = $.farbtastic(widget).linkTo(input);\n\n        // open color picker\n        setTriggerColor();\n        collectCommonAdditionalStyles();\n        colorTriggers\n            .add(colorTriggerLabels)\n            .off('click')\n            .on('click', function () {\n                const $tmpTrigger = $(this),\n                    $trigger =\n                        this.nodeName.toLowerCase() === 'label'\n                            ? $tmpTrigger.parent().find('.color-trigger')\n                            : $tmpTrigger;\n\n                widget.prop('target', $trigger.data('target'));\n                widget.prop('additional', $trigger.data('additional') || '');\n                widgetBox.hide();\n                currentProperty = $trigger.data('value');\n                setTitle(currentProperty, $trigger);\n                widgetObj.setColor(rgbToHex($trigger.css('background-color')));\n                widgetBox.show();\n\n                // event received from modified farbtastic\n                widget.on('colorchange.farbtastic', function (e, color) {\n                    styleEditor.apply(widget.prop('target'), currentProperty, color);\n                    if (widget.prop('additional')) {\n                        const styles = additionalStylesToObject(widget.prop('additional'));\n                        Object.keys(styles).forEach(key => {\n                            styleEditor.apply(widget.prop('target'), key, styles[key]);\n                        });\n                    }\n                    setTriggerColor();\n                });\n\n                // close color picker, when clicking somewhere outside or on the x\n                $doc.on('mouseup.colorselector', function (e) {\n                    if ($(e.target).hasClass('closer')) {\n                        widgetBox.hide();\n                        widget.off('colorchange.farbtastic');\n                        $doc.off('colorselector');\n                        return false;\n                    }\n\n                    if (!widgetBox.is(e.target) && widgetBox.has(e.target).length === 0) {\n                        widgetBox.hide();\n                        widget.off('colorchange.farbtastic');\n                        $doc.off('colorselector');\n                        return false;\n                    }\n                });\n\n                // close color picker on escape\n                $doc.on('keyup.colorselector', function (e) {\n                    if (e.keyCode === 27) {\n                        widgetBox.hide();\n                        widget.off('colorchange.farbtastic');\n                        $doc.off('colorselector');\n                        return false;\n                    }\n                });\n            });\n\n        // reset to default\n        resetButtons.off('click').on('click', function () {\n            const $this = $(this);\n            const $colorTrigger = $this.parent().find('.color-trigger');\n            let target = styleEditor.replaceHashClass($colorTrigger.data('target'));\n            const value = $colorTrigger.data('value');\n            const additional = $colorTrigger.data('additional');\n            styleEditor.apply(target, value);\n            if (additional) {\n                const styles = additionalStylesToObject(additional);\n                Object.keys(styles).forEach(key => {\n                    if (additionalStyles[key].length === 1) {\n                        styleEditor.apply(target, key);\n                    } else {\n                        // check other target: value pairs\n                        const style = styleEditor.getStyle() || {};\n                        let needToRemove = true;\n                        additionalStyles[key].forEach(element => {\n                            if (\n                                (target !== element.target || value !== element.value) &&\n                                style[target] &&\n                                style[element.target][element.value]\n                            ) {\n                                needToRemove = false;\n                            }\n                        });\n                        if (needToRemove) {\n                            styleEditor.apply(target, key);\n                        }\n                    }\n                });\n            }\n            setTriggerColor();\n        });\n\n        $doc.on('customcssloaded.styleeditor', setTriggerColor);\n    };\n\n    return colorSelector;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021-2022 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n *\n * @author dieter <dieter@taotesting.com>\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/editor/styleEditor/fontSizeChanger',['jquery', 'lodash', 'taoMediaManager/qtiCreator/editor/styleEditor/styleEditor'], function ($, _, styleEditor) {\n    'use strict';\n\n    /**\n     * Changes the font size in the Style Editor\n     * @param {JQuery} $container\n     */\n    const fontSizeChanger = function ($container) {\n        const $fontSizeChanger = $container.find('#item-editor-font-size-changer');\n        let itemSelector = styleEditor.replaceHashClass($fontSizeChanger.data('target'));\n        itemSelector = styleEditor.replaceHashClass(itemSelector);\n        const figcaptionSelector = `${itemSelector} figure figcaption`;\n        const $resetBtn = $fontSizeChanger.parents('.reset-group').find('[data-role=\"font-size-reset\"]');\n        const $input = $container.find('.item-editor-font-size-text');\n        let itemFontSize = parseInt($(itemSelector).css('font-size'), 10) || 14;\n\n        // initiate font-size for Block\n        const styles = styleEditor.getStyle() || {};\n        const itemSelectorOld = itemSelector.replace(' *', ''); // previous version was without *\n        if (styles[itemSelector] && styles[itemSelector]['font-size']) {\n            itemFontSize = parseInt(styles[itemSelector]['font-size'], 10);\n            $input.val(itemFontSize);\n        } else if (styles[itemSelectorOld] && styles[itemSelectorOld]['font-size']) {\n            itemFontSize = parseInt(styles[itemSelectorOld]['font-size'], 10);\n            $input.val(itemFontSize);\n        } else {\n            $input.val('');\n        }\n        /**\n         * Writes new font size to virtual style sheet\n         */\n        const resizeFont = function () {\n            styleEditor.apply(itemSelector, 'font-size', `${itemFontSize.toString()}px`);\n            const figcaptionSize = itemFontSize > 14 ? (itemFontSize - 2).toString() : Math.min(itemFontSize, 12).toString();\n            styleEditor.apply(figcaptionSelector, 'font-size', `${figcaptionSize}px`);\n        };\n\n        /**\n         * Handle input field\n         */\n        $fontSizeChanger\n            .find('button')\n            .off('click')\n            .on('click', function (e) {\n                e.preventDefault();\n                if ($(this).data('action') === 'reduce') {\n                    if (itemFontSize <= 10) {\n                        return;\n                    }\n                    itemFontSize--;\n                } else {\n                    itemFontSize++;\n                }\n                resizeFont();\n                $input.val(itemFontSize);\n                $(this).parent().blur();\n            });\n\n        /**\n         * Apply font size on blur\n         */\n        $input.off('blur').on('blur', function () {\n            if (this.value) {\n                itemFontSize = parseInt(this.value, 10);\n                resizeFont();\n            } else {\n                styleEditor.apply(itemSelector, 'font-size');\n                styleEditor.apply(figcaptionSelector, 'font-size');\n            }\n        });\n\n        /**\n         * Apply font size on enter\n         * Disallows invalid characters\n         */\n        $input.off('keydown').on('keydown', function (e) {\n            var c = e.keyCode;\n            if (c === 13) {\n                $input.trigger('blur');\n            }\n            return _.contains([8, 37, 39, 46], c) || (c >= 48 && c <= 57) || (c >= 96 && c <= 105);\n        });\n\n        /**\n         * Remove font size from virtual style sheet\n         */\n        $resetBtn.off('click').on('click', function () {\n            styleEditor.apply(itemSelector, 'font-size');\n            styleEditor.apply(figcaptionSelector, 'font-size');\n            $input.val('');\n            itemFontSize = parseInt($(itemSelector).css('font-size'), 10);\n        });\n\n        /**\n         * style loaded from style sheet\n         */\n        $(document).on('customcssloaded.styleeditor', function (e, style) {\n            if (style[itemSelector] && style[itemSelector]['font-size']) {\n                itemFontSize = parseInt(style[itemSelector]['font-size'], 10);\n                $input.val(itemFontSize);\n            } else if (style[itemSelectorOld] && style[itemSelectorOld]['font-size']) {\n                itemFontSize = parseInt(style[itemSelectorOld]['font-size'], 10);\n                $input.val(itemFontSize);\n            } else {\n                $input.val('');\n            }\n        });\n    };\n\n    return fontSizeChanger;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020-2021 (original work) Open Assessment Technologies SA;\n *\n */\n\ndefine('taoMediaManager/qtiCreator/editor/propertiesPanel',[\n    'jquery',\n    'taoQtiItem/qtiCreator/helper/panel',\n    'taoMediaManager/qtiCreator/editor/styleEditor/styleEditor',\n    'taoMediaManager/qtiCreator/editor/styleEditor/styleSheetToggler',\n    'taoMediaManager/qtiCreator/editor/styleEditor/fontSelector',\n    'taoMediaManager/qtiCreator/editor/styleEditor/colorSelector',\n    'taoMediaManager/qtiCreator/editor/styleEditor/fontSizeChanger'\n], function ($, panel, styleEditor, styleSheetToggler, fontSelector, colorSelector, fontSizeChanger) {\n    'use strict';\n\n    /**\n     * Set up the properties panel, including the style editor\n     * @param {jQueryElement} $container - the panel container\n     * @param {Object} widget - item Widget\n     * @param {Object} config - sharedStimulusCreator config\n     */\n    return function setUpInteractionPanel($container, widget, config) {\n        panel.initSidebarAccordion($container);\n        panel.initFormVisibilityListener();\n\n        const elementClass = { elementClass: styleEditor.getMainClass() };\n        config = Object.assign(config, elementClass);\n        styleEditor.init(widget.element, config);\n        styleSheetToggler.init(config);\n\n        const $passageEditor = $('#item-editor-item-property-bar');\n        fontSelector($passageEditor);\n        colorSelector($passageEditor);\n        fontSizeChanger($passageEditor);\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technlogies SA;\n *\n */\n\n/**\n * Config of the QTI XML renderer\n *\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoMediaManager/qtiXmlRenderer/renderers/config',[\n    'taoItems/assets/manager'\n], function(assetManagerFactory){\n    'use strict';\n\n    //all assets are normalized (relative)\n    const assetManager = assetManagerFactory([{\n        name : 'nomalize',\n        handle: function normalizeStrategy(url){\n            if(url){\n                return url.toString().replace(/^\\.?\\//, '');\n            }\n        }\n    }]);\n\n    /**\n     * The XML Renderer config\n     */\n    return {\n        name : 'xmlRenderer',\n        locations : {\n            '_container' : 'taoQtiItem/qtiXmlRenderer/renderers/Container',\n            'assessmentItem' : 'taoMediaManager/qtiXmlRenderer/renderers/Item',\n            '_tooltip' : 'taoQtiItem/qtiXmlRenderer/renderers/Tooltip',\n            'math' : 'taoQtiItem/qtiXmlRenderer/renderers/Math',\n            'figure' : 'taoQtiItem/qtiXmlRenderer/renderers/Figure',\n            'img' : 'taoQtiItem/qtiXmlRenderer/renderers/Img',\n            'figcaption' : 'taoQtiItem/qtiXmlRenderer/renderers/Figcaption',\n            'object' : 'taoQtiItem/qtiXmlRenderer/renderers/Object',\n            'table' : 'taoQtiItem/qtiXmlRenderer/renderers/Table',\n        },\n        options : {\n            assetManager : assetManager\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA;\n *\n */\n\ndefine('taoMediaManager/qtiXmlRenderer/renderers/Renderer',['taoQtiItem/qtiRunner/core/Renderer', 'taoMediaManager/qtiXmlRenderer/renderers/config'], function(Renderer, config){\n    'use strict';\n\n    return Renderer.build(config.locations, config.name, config.options);\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\ndefine('taoMediaManager/qtiCreator/helper/xmlRenderer',[\n    'core/logger',\n    'taoMediaManager/qtiXmlRenderer/renderers/Renderer',\n    'taoQtiItem/qtiItem/core/Element'\n], function(loggerFactory, XmlRenderer, Element){\n    'use strict';\n\n    const logger = loggerFactory('taoMediaManager/qtiCreator/helper/xmlRenderer');\n\n    const _xmlRenderer = new XmlRenderer().load();\n\n    const _render = function(element){\n        let xml = '';\n        try{\n            if(element instanceof Element) {\n                xml = element.render(_xmlRenderer);\n            }\n        }catch(e){\n            logger.error(e);\n        }\n        return xml;\n    };\n\n    return {\n        render : _render,\n        get : function(){\n            return _xmlRenderer;\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * This module let's you set up the interaction panel\n *\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/editor/interactionsPanel',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/editor/interactionsToolbar',\n    'taoQtiItem/qtiCreator/helper/panel'\n], function (_, __, interactionsToolbar, panel) {\n    'use strict';\n\n    /**\n     * Set up the interaction selection panel\n     * @param {jQueryElement} $container - the panel container\n     */\n    return function setUpInteractionPanel($container) {\n        const tagTitles = {\n            inlineInteractions: __('Inline Interactions')\n        };\n        const interactions = {\n            _container: {\n                label: __('Text Block'),\n                icon: 'icon-font',\n                description: __(\n                    'Block contains the content (stimulus) of the item such as text or image. It is also required for Inline Interactions.'\n                ),\n                short: __('Block'),\n                qtiClass: '_container',\n                tags: [tagTitles.inlineInteractions, 'text'],\n                group:  __('inline-interactions')\n            }\n        };\n\n        // create toolbar\n        interactionsToolbar.create($container, interactions);\n\n        // init accordions\n        panel.initSidebarAccordion($container);\n        // init special subgroup\n        panel.toggleInlineInteractionGroup();\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * The Shared Stimulus creator factory let's you create Shared Stimulus\n * The Shared Stimulus is wrapped in Item that allow reuse taoQtiItem modules\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/sharedStimulusCreator',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'core/eventifier',\n    'taoQtiItem/qtiCreator/context/qtiCreatorContext',\n    'taoMediaManager/qtiCreator/helper/sharedStimulusLoader',\n    'taoMediaManager/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/helper/commonRenderer', //for read-only element : preview + xinclude\n    'taoMediaManager/qtiCreator/editor/propertiesPanel',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoMediaManager/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiItem/helper/xmlNsHandler',\n    'core/request',\n    'util/url',\n    'taoMediaManager/qtiCreator/editor/interactionsPanel',\n    'taoMediaManager/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiItem/core/Element'\n], function (\n    $,\n    _,\n    __,\n    eventifier,\n    qtiCreatorContextFactory,\n    sharedStimulusLoader,\n    creatorRenderer,\n    commonRenderer,\n    propertiesPanel,\n    eventHelper,\n    xmlRenderer,\n    xmlNsHandler,\n    request,\n    urlUtil,\n    interactionPanel,\n    styleEditor,\n    Element\n) {\n    'use strict';\n\n    /**\n     * Load an Shared Stimulus\n     * @param {String} id - the Shared Stimulus ID\n     * @param {String} uri - the Shared Stimulus URI\n     * @param {String} assetDataUrl - the data url\n     * @param {String} assetDataStyles\n     * @returns {Promise} that resolve with the loaded item model\n     */\n    const loadSharedStimulus = function loadSharedStimulus(id, uri, assetDataUrl, assetDataStyles) {\n        return new Promise(function (resolve, reject) {\n            sharedStimulusLoader.loadSharedStimulus({ id, uri, assetDataUrl, assetDataStyles }, function (item) {\n                if (!item) {\n                    reject(new Error('Unable to load the Shared Stimulus'));\n                }\n\n                //set useful data :\n                item.data('uri', uri);\n                resolve(item);\n            });\n        });\n    };\n\n    /**\n     * Build a new Shared Stimulus Creator\n     * @param {Object} config - the creator's configuration\n     * @param {String} config.properties.uri - the URI of the Shared Stimulus to load (properties structure is kept as legacy)\n     * @param {String} config.properties.label - the label of the Shared Stimulus to load (properties structure is kept as legacy)\n     * @param {String} config.properties.baseUrl - the base URL used to resolve assets\n     * @param {String[]} [config.interactions] - the list of additional interactions to load (PCI)\n     * @param {String[]} [config.infoControls] - the list of info controls to load (PIC)\n     * @param {areaBroker} areaBroker - a mapped areaBroker\n     * @param {Function[]} pluginFactories - the plugin's factory, ready to be instantiated\n     * @returns {sharedStimulusCreator} an event emitter object, with the usual lifecycle\n     * @throws {TypeError}\n     */\n    const sharedStimulusCreatorFactory = function sharedStimulusCreatorFactory(config, areaBroker, pluginFactories) {\n        let sharedStimulusCreator;\n        const qtiCreatorContext = qtiCreatorContextFactory();\n        const plugins = {};\n\n        /**\n         * Run a method in all plugins\n         *\n         * @param {String} method - the method to run\n         * @returns {Promise} once that resolve when all plugins are done\n         */\n        const pluginRun = function pluginRun(method) {\n            const execStack = [];\n\n            _.forEach(plugins, function (plugin) {\n                if (_.isFunction(plugin[method])) {\n                    execStack.push(plugin[method]());\n                }\n            });\n\n            return Promise.all(execStack);\n        };\n\n        //validate parameters\n        if (!_.isPlainObject(config)) {\n            throw new TypeError('The shared stimulus creator configuration is required');\n        }\n        if (!config.properties || _.isEmpty(config.properties.uri) || _.isEmpty(config.properties.baseUrl)) {\n            throw new TypeError(\n                'The creator configuration must contains the required properties triples: uri, label and baseUrl'\n            );\n        }\n        if (!areaBroker) {\n            throw new TypeError('Without an areaBroker there are no chance to see something you know');\n        }\n\n        //factor the new sharedStimulusCreator\n        sharedStimulusCreator = eventifier({\n            //lifecycle\n\n            /**\n             * Initialize the Shared Stimulus creator:\n             *  - set up the registries for portable elements\n             *  - load the Shared Stimulus\n             *  - instantiate and initialize the plugins\n             *\n             * @returns {sharedStimulusCreator} chains\n             * @fires sharedStimulusCreator#init - once initialized\n             * @fires sharedStimulusCreator#error - if something went wrong\n             */\n            init() {\n                //instantiate the plugins first\n                _.forEach(pluginFactories, pluginFactory => {\n                    const plugin = pluginFactory(this, areaBroker);\n                    plugins[plugin.getName()] = plugin;\n                });\n\n                // quick-fix: clear all ghost events listeners\n                // prevent ghosting of Shared Stimulus states and other properties\n                $(document).off('.qti-widget');\n\n                /**\n                 * Save the Shared Stimulus on \"save\" event\n                 * @event sharedStimulusCreator#save\n                 * @param {Boolean} [silent] - true to not trigger the success feedback\n                 * @fires sharedStimulusCreator#saved once the save is done\n                 * @fires sharedStimulusCreator#error\n                 */\n                this.on('save', silent => {\n                    const item = this.getItem();\n                    if (!item.attributes.class) {\n                        item.attributes.class = sharedStimulusCreator.mainClass;\n                    }\n\n                    const xml = xmlNsHandler.restoreNs(xmlRenderer.render(item), item.getNamespaces());\n\n                    //do the save\n                    Promise.all([\n                        request({\n                            url: urlUtil.route('patch', 'SharedStimulus', 'taoMediaManager', {\n                                id: config.properties.id\n                            }),\n                            type: 'POST',\n                            contentType: 'application/json',\n                            dataType: 'json',\n                            data: JSON.stringify({ body: xml }),\n                            method: 'PATCH',\n                            noToken: true\n                        }),\n                        styleEditor.save()\n                    ])\n                        .then(() => {\n                            if (!silent) {\n                                this.trigger('success');\n                            }\n\n                            this.trigger('saved');\n                        })\n                        .catch(err => {\n                            this.trigger('error', err);\n                        });\n                });\n\n                this.on('exit', function () {\n                    $('.item-editor-item', areaBroker.getItemPanelArea()).empty();\n                    this.destroy();\n                });\n\n                loadSharedStimulus(config.properties.id, config.properties.uri, config.properties.assetDataUrl, config.properties.assetDataStyles)\n                    .then(item => {\n                        if (!_.isObject(item)) {\n                            this.trigger('error', new Error(`Unable to load the item ${config.properties.label}`));\n                            return;\n                        }\n\n                        this.item = item;\n                    })\n                    .then(() => pluginRun('init'))\n                    .then(() => {\n                        /**\n                         * @event sharedStimulusCreator#init the initialization is done\n                         * @param {Object} item - the loaded item\n                         */\n                        this.trigger('init', this.item);\n                    })\n                    .then(() => {\n                        // forward context error\n                        qtiCreatorContext.on('error', err => {\n                            this.trigger('error', err);\n                        });\n                        return qtiCreatorContext.init();\n                    })\n                    .catch(err => {\n                        this.trigger('error', err);\n                    });\n\n                return this;\n            },\n\n            /**\n             * Renders the creator\n             * Because of the actual structure, it also intialize some components (panels, toolbars, etc.).\n             *\n             * @returns {sharedStimulusCreator} chains\n             * @fires sharedStimulusCreator#render - once everything is in place\n             * @fires sharedStimulusCreator#ready - once the creator's components' are ready (not yet reliable)\n             * @fires sharedStimulusCreator#error - if something went wrong\n             */\n            render() {\n                const self = this;\n                const item = this.getItem();\n\n                if (!item || !_.isFunction(item.getUsedClasses)) {\n                    return this.trigger('error', new Error('We need an item to render.'));\n                }\n\n                //configure commonRenderer for the preview and initial qti element rendering\n                commonRenderer.setContext(areaBroker.getItemPanelArea());\n                commonRenderer.get(true, config).setOption('baseUrl', config.properties.baseUrl);\n\n                interactionPanel(areaBroker.getInteractionPanelArea());\n\n                //the renderers' widgets do not handle async yet, so we rely on this event\n                //TODO ready should be triggered once every renderer's widget is done (ie. promisify everything)\n                $(document).on('ready.qti-widget', (e, elt) => {\n                    if (elt.element.qtiClass === 'assessmentItem') {\n                        this.trigger('ready');\n                    }\n                });\n                // highlite passage creator container when it's in focus\n                $(document).on('afterStateInit.qti-widget', function (e, element, state) {\n                    if (element.getRootElement().data('widget')) {\n                        const $itemContainer = element.getRootElement().data('widget').$container;\n                        switch (state.name) {\n                            case 'active':\n                                if (!Element.isA(element, 'assessmentItem')) {\n                                    $itemContainer.removeClass('focus-border');\n                                }\n                                break;\n\n                            case 'sleep':\n                                if (!$itemContainer.find('.widget-box.edit-active').length) {\n                                    $itemContainer.addClass('focus-border');\n                                    styleEditor.getMainClass(item.class);\n                                }\n                                break;\n                        }\n                    }\n                });\n\n                // pass an context reference to the renderer\n                config.qtiCreatorContext = qtiCreatorContext;\n\n                creatorRenderer\n                    .get(true, config, areaBroker)\n                    .setOptions(config.properties)\n                    .load(function () {\n                        let widget;\n\n                        //set renderer\n                        item.setRenderer(this);\n\n                        //render item (body only) into the \"drop-area\"\n                        areaBroker.getItemPanelArea().append(item.render());\n\n                        //\"post-render it\" to initialize the widget\n                        Promise.all(item.postRender(_.clone(config.properties)))\n                            .then(function () {\n                                //set reference to item widget object\n                                areaBroker.getContainer().data('widget', item);\n\n                                widget = item.data('widget');\n\n                                item.attributes.class\n                                    ? styleEditor.setMainClass(item.attributes.class)\n                                    : styleEditor.generateMainClass();\n                                sharedStimulusCreator.mainClass = styleEditor.getMainClass();\n                                // set class on container for style editor\n                                widget.$container.find('.qti-itemBody').addClass(sharedStimulusCreator.mainClass);\n\n                                propertiesPanel(areaBroker.getPropertyPanelArea(), widget, config.properties);\n\n                                //init event listeners:\n                                eventHelper.initElementToWidgetListeners();\n\n                                return pluginRun('render').then(function () {\n                                    self.trigger('render');\n                                });\n                            })\n                            .catch(function (err) {\n                                self.trigger('error', err);\n                            });\n                    }, item.getUsedClasses());\n\n                return this;\n            },\n\n            /**\n             * Clean up everything and destroy the sharedStimulusCreator\n             *\n             * @returns {sharedStimulusCreator} chains\n             */\n            destroy() {\n                $(document).off('.qti-widget');\n\n                styleEditor.clearCache();\n\n                pluginRun('destroy')\n                    .then(() => qtiCreatorContext.destroy())\n                    .then(() => {\n                        this.trigger('destroy');\n                    })\n                    .catch(err => {\n                        this.trigger('error', err);\n                    });\n                return this;\n            },\n\n            //accessors\n\n            /**\n             * Give an access to the loaded item\n             * @returns {Object} the item\n             */\n            getItem() {\n                return this.item;\n            },\n\n            getSharedStimulusId() {\n                return config.properties.id;\n            },\n\n            /**\n             * Give an access to the config\n             * @returns {Object} the config\n             */\n            getConfig() {\n                return config;\n            }\n        });\n\n        return sharedStimulusCreator;\n    };\n\n    return sharedStimulusCreatorFactory;\n});\n\n","\ndefine('tpl!taoMediaManager/qtiCreator/component/tpl/sharedStimulusAuthoring', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div id=\\\"item-editor-scope\\\" data-content-target=\\\"wide\\\">\\n\\n    <nav class=\\\"action-bar plain content-action-bar horizontal-action-bar\\\">\\n        <ul class=\\\"menu-left action-group plain item-editor-menu\\\"></ul>\\n\\n        <ul class=\\\"menu action-group plain item-editor-menu\\\"></ul>\\n\\n        <ul class=\\\"menu-right action-group plain item-editor-menu\\\">\\n        </ul>\\n    </nav>\\n    <div class=\\\"wrapper clearfix content sidebar-popup-parent\\\" id=\\\"item-editor-wrapper\\\">\\n\\n        <!-- interaction panel -->\\n        <div class=\\\"item-editor-sidebar-wrapper left-bar\\\">\\n            <form class=\\\"item-editor-sidebar\\\" id=\\\"item-editor-interaction-bar\\\" autocomplete=\\\"off\\\"></form>\\n        </div>\\n\\n        <!-- item panel -->\\n        <main id=\\\"item-editor-panel\\\" class=\\\"clearfix\\\">\\n\\n            <div class=\\\"item-editor-bar\\\">\\n                <h1 class=\\\"truncate\\\"></h1>\\n                <div id=\\\"toolbar-top\\\"></div>\\n            </div>\\n\\n            <div id=\\\"item-editor-scoll-container\\\">\\n                <div id=\\\"item-editor-scroll-outer\\\">\\n                    <div id=\\\"item-editor-scroll-inner\\\">\\n                        <!-- item goes here -->\\n                    </div>\\n                </div>\\n            </div>\\n\\n        </main>\\n\\n        <!-- properties panel -->\\n        <div class=\\\"item-editor-sidebar-wrapper right-bar sidebar-popup-parent\\\">\\n            <div class=\\\"item-editor-sidebar\\\" id=\\\"item-editor-item-widget-bar\\\">\\n                <div class=\\\"item-editor-item-related sidebar-right-section-box\\\" id=\\\"item-editor-item-property-bar\\\">\\n                    <section class=\\\"tool-group clearfix\\\" id=\\\"sidebar-right-css-manager\\\" style=\\\"display: none;\\\">\\n\\n                        <h2>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Style Sheet Manager\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":28},\"end\":{\"line\":42,\"column\":56}}}))\n    + \"</h2>\\n\\n                        <div class=\\\"panel\\\">\\n\\n                            <ul class=\\\"none\\\" id=\\\"style-sheet-toggler\\\">\\n                                <!-- TAO style sheet -->\\n                            </ul>\\n                            <button id=\\\"stylesheet-uploader\\\" class=\\\"btn-info small block\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Add Style Sheet\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":90},\"end\":{\"line\":49,\"column\":114}}}))\n    + \"</button>\\n                        </div>\\n                    </section>\\n                    <section class=\\\"tool-group clearfix\\\" id=\\\"sidebar-right-passage-properties\\\">\\n                        <h2>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Passage Properties\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":53,\"column\":28},\"end\":{\"line\":53,\"column\":55}}}))\n    + \"</h2>\\n                        <div class=\\\"panel\\\"></div>\\n                    </section>\\n                    <section class=\\\"tool-group clearfix\\\" id=\\\"sidebar-right-style-editor\\\">\\n\\n                        <h2>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Passage Style\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":58,\"column\":28},\"end\":{\"line\":58,\"column\":50}}}))\n    + \"</h2>\\n\\n                        <div class=\\\"panel color-picker-panel\\\">\\n                            <div class=\\\"item-editor-color-picker sidebar-popup-container-box\\\">\\n                                <div class=\\\"color-picker-container sidebar-popup\\\">\\n                                    <div class=\\\"sidebar-popup-title\\\">\\n                                        <h3 class=\\\"color-picker-title\\\"></h3>\\n                                        <a class=\\\"closer\\\" href=\\\"#\\\" data-close=\\\"#color-picker-container\\\"></a>\\n                                    </div>\\n                                    <div class=\\\"sidebar-popup-content\\\">\\n                                        <div class=\\\"color-picker\\\"></div>\\n                                        <input class=\\\"color-picker-input\\\" type=\\\"text\\\" value=\\\"#000000\\\">\\n                                    </div>\\n                                </div>\\n                                <div class=\\\"reset-group\\\">\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-bg\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Background color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":74,\"column\":81},\"end\":{\"line\":74,\"column\":106}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"background-color\\\"\\n                                            aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom background color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":76,\"column\":56},\"end\":{\"line\":76,\"column\":95}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-bg\\\" data-value=\\\"background-color\\\"\\n                                            data-target=\\\"body div.qti-item\\\" data-additional=\\\"padding:20px\\\"></button>\\n                                    </div>\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-color\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Text color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":84},\"end\":{\"line\":81,\"column\":103}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"color\\\"\\n                                              aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom text color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":83,\"column\":58},\"end\":{\"line\":83,\"column\":91}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-color\\\" data-value=\\\"color\\\"\\n                                              data-target=\\\"body div.qti-item\\\"></button>\\n                                    </div>\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-color\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Border color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":88,\"column\":84},\"end\":{\"line\":88,\"column\":105}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"color\\\"\\n                                              aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom border color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":90,\"column\":58},\"end\":{\"line\":90,\"column\":93}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-color\\\" data-value=\\\"border-color\\\"\\n                                              data-target=\\\"body div.qti-item\\\" data-additional=\\\"border-width:4px;border-style:solid;padding:20px\\\"></button>\\n                                    </div>\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-color\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Table headings\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":95,\"column\":84},\"end\":{\"line\":95,\"column\":107}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"color\\\"\\n                                              aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom background color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":97,\"column\":58},\"end\":{\"line\":97,\"column\":97}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-color\\\" data-value=\\\"background-color\\\"\\n                                              data-target=\\\"body div.qti-item table th\\\"></button>\\n                                    </div>\\n                                </div>\\n                            </div>\\n                        </div>\\n                        <hr>\\n                        <div class=\\\"panel\\\">\\n\\n                            <div>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Font family\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":107,\"column\":33},\"end\":{\"line\":107,\"column\":53}}}))\n    + \"</div>\\n\\n                            <div class=\\\"reset-group\\\">\\n                                <select\\n                                    data-target=\\\"body div.qti-item *\\\"\\n                                    id=\\\"item-editor-font-selector\\\"\\n                                    data-has-search=\\\"false\\\"\\n                                    data-placeholder=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Default\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":114,\"column\":54},\"end\":{\"line\":114,\"column\":70}}}))\n    + \"\\\"\\n                                    class=\\\"select2 has-icon\\\"\\n                                    data-role=\\\"font-selector\\\"></select>\\n                                <button class=\\\"icon-eraser reset-button\\\" data-role=\\\"font-selector-reset\\\"\\n                                      aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom font family\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":118,\"column\":50},\"end\":{\"line\":118,\"column\":84}}}))\n    + \"\\\"></button>\\n                            </div>\\n\\n                        </div>\\n                        <div class=\\\"panel\\\">\\n                            <div>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":123,\"column\":33},\"end\":{\"line\":123,\"column\":51}}}))\n    + \"</div>\\n                            <div class=\\\"reset-group\\\">\\n                                <span id=\\\"item-editor-font-size-changer\\\" data-target=\\\"body div.qti-item *\\\">\\n                                    <button data-action=\\\"reduce\\\" aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Reduce font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":126,\"column\":77},\"end\":{\"line\":126,\"column\":102}}}))\n    + \"\\\"\\n                                        class=\\\"icon-smaller\\\"></button>\\n                                    <button data-action=\\\"enlarge\\\" aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Enlarge font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":128,\"column\":78},\"end\":{\"line\":128,\"column\":104}}}))\n    + \"\\\"\\n                                        class=\\\"icon-larger\\\"></button>\\n                                </span>\\n\\n                                <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n                                    <input type=\\\"text\\\" class=\\\"item-editor-font-size-text has-icon\\\"\\n                                            placeholder=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"e.g. 13\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":134,\"column\":57},\"end\":{\"line\":134,\"column\":73}}}))\n    + \"\\\">\\n                                    <span class=\\\"unit-indicator\\\">px</span>\\n                                </span>\\n                                <button class=\\\"icon-eraser reset-button\\\" data-role=\\\"font-size-reset\\\"\\n                                      aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":138,\"column\":50},\"end\":{\"line\":138,\"column\":82}}}))\n    + \"\\\"></button>\\n                            </div>\\n\\n                        </div>\\n\\n                    </section>\\n                </div>\\n                <div class=\\\"item-editor-item-related sidebar-right-section-box\\\" id=\\\"item-editor-text-property-bar\\\">\\n                    <section class=\\\"tool-group clearfix\\\" id=\\\"sidebar-right-style-editor\\\">\\n\\n                        <h2>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Text Block Style\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":148,\"column\":28},\"end\":{\"line\":148,\"column\":53}}}))\n    + \"</h2>\\n\\n                        <div class=\\\"panel color-picker-panel\\\">\\n                            <div class=\\\"item-editor-color-picker sidebar-popup-container-box\\\">\\n                                <div class=\\\"color-picker-container sidebar-popup\\\">\\n                                    <div class=\\\"sidebar-popup-title\\\">\\n                                        <h3 id=\\\"color-picker-title\\\"></h3>\\n                                        <a class=\\\"closer\\\" href=\\\"#\\\" data-close=\\\"#color-picker-container\\\"></a>\\n                                    </div>\\n                                    <div class=\\\"sidebar-popup-content\\\">\\n                                        <div class=\\\"color-picker\\\"></div>\\n                                        <input class=\\\"color-picker-input\\\" type=\\\"text\\\" value=\\\"#000000\\\">\\n                                    </div>\\n                                </div>\\n                                <div class=\\\"reset-group\\\">\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-bg\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Background color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":164,\"column\":81},\"end\":{\"line\":164,\"column\":106}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"background-color\\\"\\n                                              aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom background color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":166,\"column\":58},\"end\":{\"line\":166,\"column\":97}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-bg\\\" data-value=\\\"background-color\\\"\\n                                              data-target=\\\"body div.qti-item .custom-text-box.hashClass\\\" data-additional=\\\"padding:20px;margin-bottom: 0;\\\"></button>\\n                                    </div>\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-color\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Text color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":171,\"column\":84},\"end\":{\"line\":171,\"column\":103}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"color\\\"\\n                                              aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom text color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":173,\"column\":58},\"end\":{\"line\":173,\"column\":91}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-color\\\" data-value=\\\"color\\\"\\n                                              data-target=\\\"body div.qti-item .custom-text-box.hashClass\\\"></button>\\n                                    </div>\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-color\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Border color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":178,\"column\":84},\"end\":{\"line\":178,\"column\":105}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"color\\\"\\n                                              aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom border color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":180,\"column\":58},\"end\":{\"line\":180,\"column\":93}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-color\\\" data-value=\\\"border-color\\\"\\n                                              data-target=\\\"body div.qti-item .custom-text-box.hashClass\\\" data-additional=\\\"border-width:4px;border-style:solid;padding:20px\\\"></button>\\n                                    </div>\\n                                    <div class=\\\"clearfix\\\">\\n                                        <label for=\\\"initial-color\\\" class=\\\"truncate\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Table headings\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":185,\"column\":84},\"end\":{\"line\":185,\"column\":107}}}))\n    + \"</label>\\n                                        <button class=\\\"icon-eraser reset-button\\\" data-value=\\\"color\\\"\\n                                              aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom background color\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":187,\"column\":58},\"end\":{\"line\":187,\"column\":97}}}))\n    + \"\\\"></button>\\n                                        <button class=\\\"color-trigger\\\" id=\\\"initial-color\\\" data-value=\\\"background-color\\\"\\n                                              data-target=\\\"body div.qti-item .custom-text-box.hashClass table th\\\"></button>\\n                                    </div>\\n                                </div>\\n                            </div>\\n                        </div>\\n                        <hr>\\n                        <div class=\\\"panel\\\">\\n\\n                            <div>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Font family\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":197,\"column\":33},\"end\":{\"line\":197,\"column\":53}}}))\n    + \"</div>\\n\\n                            <div class=\\\"reset-group\\\">\\n                                <select\\n                                    data-target=\\\"body div.qti-item .custom-text-box.hashClass *\\\"\\n                                    id=\\\"item-editor-font-selector\\\"\\n                                    data-has-search=\\\"false\\\"\\n                                    data-placeholder=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Default\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":204,\"column\":54},\"end\":{\"line\":204,\"column\":70}}}))\n    + \"\\\"\\n                                    class=\\\"select2 has-icon\\\"\\n                                    data-role=\\\"font-selector\\\"></select>\\n                                <button class=\\\"icon-eraser reset-button\\\" data-role=\\\"font-selector-reset\\\"\\n                                      aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom font family\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":208,\"column\":50},\"end\":{\"line\":208,\"column\":84}}}))\n    + \"\\\"></button>\\n                            </div>\\n\\n                        </div>\\n                        <div class=\\\"panel\\\">\\n                            <div>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":213,\"column\":33},\"end\":{\"line\":213,\"column\":51}}}))\n    + \"</div>\\n                            <div class=\\\"reset-group\\\">\\n                                        <span id=\\\"item-editor-font-size-changer\\\" data-target=\\\"body div.qti-item .custom-text-box.hashClass *\\\">\\n                                            <button data-action=\\\"reduce\\\" aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Reduce font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":216,\"column\":85},\"end\":{\"line\":216,\"column\":110}}}))\n    + \"\\\"\\n                                               class=\\\"icon-smaller\\\"></button>\\n                                            <button data-action=\\\"enlarge\\\" aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Enlarge font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":218,\"column\":86},\"end\":{\"line\":218,\"column\":112}}}))\n    + \"\\\"\\n                                               class=\\\"icon-larger\\\"></button>\\n                                        </span>\\n\\n                                <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n                                            <input type=\\\"text\\\" class=\\\"item-editor-font-size-text has-icon\\\"\\n                                                   placeholder=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"e.g. 13\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":224,\"column\":64},\"end\":{\"line\":224,\"column\":80}}}))\n    + \"\\\">\\n                                                <span class=\\\"unit-indicator\\\">px</span>\\n                                        </span>\\n                                <button class=\\\"icon-eraser reset-button\\\" data-role=\\\"font-size-reset\\\"\\n                                      aria-label=\\\"\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Remove custom font size\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":228,\"column\":50},\"end\":{\"line\":228,\"column\":82}}}))\n    + \"\\\"></button>\\n                            </div>\\n\\n                        </div>\\n\\n                    </section>\\n                    <section class=\\\"tool-group clearfix\\\" id=\\\"sidebar-right-text-block-properties\\\">\\n                        <h2>\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Text Block Properties\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":235,\"column\":28},\"end\":{\"line\":235,\"column\":58}}}))\n    + \"</h2>\\n\\n                        <div class=\\\"panel\\\"></div>\\n                    </section>\\n                </div>\\n                <div class=\\\"item-editor-body-element-related sidebar-right-section-box\\\" id=\\\"item-editor-body-element-property-bar\\\">\\n                    <section class=\\\"tool-group clearfix\\\" id=\\\"sidebar-right-body-element-properties\\\">\\n                        <h2><?= __('Element Properties') ?></h2>\\n\\n                        <div class=\\\"panel\\\"></div>\\n                    </section>\\n                </div>\\n            </div>\\n        </div>\\n        <!-- /properties panel -->\\n\\n\\n    </div>\\n\\n    <div id=\\\"mediaManager\\\"></div>\\n    <div id=\\\"modal-container\\\"></div>\\n</div>\";\n},\"useData\":true}); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/component/sharedStimulusAuthoring',[\n    'lodash',\n    'ui/component',\n    'core/pluginLoader',\n    'taoMediaManager/qtiCreator/sharedStimulusCreator',\n    'taoQtiItem/qtiCreator/editor/areaBroker',\n    'tpl!taoMediaManager/qtiCreator/component/tpl/sharedStimulusAuthoring',\n    'context',\n    'css!taoQtiItemCss/qti-runner.css',\n    'css!taoQtiItemCss/themes/default.css',\n    'css!taoQtiItemCss/item-creator.css'\n], function (\n    _,\n    componentFactory,\n    pluginLoaderFactory,\n    sharedStimulusCreatorFactory,\n    areaBrokerFactory,\n    componentTpl,\n    context\n) {\n    'use strict';\n\n    const defaultPlugins = [\n        {\n            module: 'taoQtiItem/qtiCreator/plugins/content/title',\n            bundle: 'taoQtiItem/loader/taoQtiItem.min',\n            category: 'content'\n        },\n        {\n            module: 'taoMediaManager/qtiCreator/plugins/navigation/back',\n            bundle: 'taoMediaManager/loader/taoMediaManager.min',\n            category: 'menu'\n        },\n        {\n            module: 'taoMediaManager/qtiCreator/plugins/menu/save',\n            bundle: 'taoMediaManager/loader/taoMediaManager.min',\n            category: 'menu'\n        },\n        {\n            module: 'taoMediaManager/qtiCreator/plugins/menu/preview',\n            bundle: 'taoMediaManager/loader/taoMediaManager.min',\n            category: 'menu'\n        },\n        {\n            module: 'taoQtiItem/qtiCreator/plugins/content/changeTracker',\n            bundle: 'taoQtiItem/loader/taoQtiItem.min',\n            category: 'content'\n        },\n        {\n            module: 'taoMediaManager/qtiCreator/plugins/content/blockAdder',\n            bundle: 'taoMediaManager/loader/taoMediaManager.min',\n            category: 'content'\n        }\n    ];\n    /**\n     * Embeds the assets creator UI in a component\n     *\n     * @example\n     *  const container = $();\n     *  const config = {\n     *      plugins: [],\n     *      properties: {\n     *          uri: 'http://item#rdf-123',\n     *          baseUrl: 'http://foo/bar/',\n     *          // ...\n     *      }\n     *  };\n     *  const component = sharedStimulusAuthoringFactory(container, config)\n     *      .on('ready', function onComponentReady() {\n     *          // ...\n     *      });\n     *\n     * @param {HTMLElement|String} container\n     * @param {Object} config - The setup for the sharedStimulus creator\n     * @param {Object} config.properties - The list of properties expected by the sharedStimulus creator\n     * @param {Object} config.properties.uri - The URI of the sharedStimulus to author\n     * @param {Object} config.properties.id - The ID of the sharedStimulus to author\n     * @param {Object} config.properties.baseUrl - The base URL to retrieve the assets\n     * @param {String} config.properties.sharedStimulusDataUrl - URL for getting sharedStimulus data (passed through to sharedStimulusCreator)\n     * @param {Object[]} [config.plugins] - Additional plugins to load\n     * @returns {component}\n     * @fires ready - When the component is ready to work\n     */\n    function sharedStimulusAuthoringFactory(container, config = {}) {\n        let areaBroker;\n        let sharedStimulusCreator;\n\n        const plugins = Array.isArray(config.plugins) ? config.plugins : [];\n        config.plugins = [...defaultPlugins, ...plugins];\n\n        const pluginLoader = pluginLoaderFactory();\n\n        const api = {\n            /**\n             * Gets access to the area broker\n             * @returns {areaBroker}\n             */\n            getAreaBroker() {\n                return areaBroker;\n            }\n        };\n\n        const sharedStimulusAuthoring = componentFactory(api)\n            // set the component's layout\n            .setTemplate(componentTpl)\n\n            // auto render on init\n            .on('init', function () {\n                // load plugins dynamically\n                _.forEach(this.getConfig().plugins, plugin => {\n                    if (plugin && plugin.module) {\n                        if (plugin.exclude) {\n                            pluginLoader.remove(plugin.module);\n                        } else {\n                            pluginLoader.add(plugin);\n                        }\n                    }\n                });\n\n                // load the plugins, then render the sharedStimulus creator\n                pluginLoader\n                    .load(!!context.bundle)\n                    .then(() => this.render(container))\n                    .catch(err => this.trigger('error', err));\n            })\n\n            // renders the component\n            .on('render', function () {\n                const $container = this.getElement();\n                areaBroker = areaBrokerFactory($container, {\n                    menu: $container.find('.menu'),\n                    menuLeft: $container.find('.menu-left'),\n                    menuRight: $container.find('.menu-right'),\n                    contentCreatorPanel: $container.find('#item-editor-panel'),\n                    editorBar: $container.find('#item-editor-panel .item-editor-bar'),\n                    title: $container.find('#item-editor-panel .item-editor-bar h1'),\n                    toolbar: $container.find('#item-editor-panel .item-editor-bar #toolbar-top'),\n                    interactionPanel: $container.find('#item-editor-interaction-bar'),\n                    propertyPanel: $container.find('#item-editor-item-widget-bar'),\n                    itemPanel: $container.find('#item-editor-scroll-inner'),\n                    itemPropertyPanel: $container.find('#sidebar-right-item-properties'),\n                    itemStylePanel: $container.find('#item-style-editor-bar'),\n                    modalContainer: $container.find('#modal-container'),\n                    elementPropertyPanel: $container.find('#item-editor-body-element-property-bar .panel')\n                });\n\n                sharedStimulusCreator = sharedStimulusCreatorFactory(\n                    this.getConfig(),\n                    areaBroker,\n                    pluginLoader.getPlugins()\n                )\n                    .spread(this, 'error success ready')\n                    .on('init', function () {\n                        this.render();\n                    })\n                    .on('destroy', function () {\n                        sharedStimulusCreator = null;\n                        sharedStimulusAuthoring.destroy();\n                    })\n                    .init();\n            })\n\n            .on('destroy', function () {\n                if (sharedStimulusCreator) {\n                    sharedStimulusCreator.destroy();\n                }\n                sharedStimulusCreator = null;\n                areaBroker = null;\n            });\n\n        // initialize the component with the provided config\n        // defer the call to allow to listen to the init event\n        _.defer(() => sharedStimulusAuthoring.init(config));\n\n        return sharedStimulusAuthoring;\n    }\n\n    return sharedStimulusAuthoringFactory;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020-2021 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * @author Juan Luis Gutierrez Dos Santos <juanluis.gutierrezdossantos@taotesting.com>\n */\ndefine('taoMediaManager/controller/authoring',[\n    'i18n',\n    'lodash',\n    'jquery',\n    'uri',\n    'taoMediaManager/qtiCreator/component/sharedStimulusAuthoring',\n    'ui/feedback',\n    'util/url',\n    'core/dataProvider/request',\n    'core/logger'\n], function (__, _, $, uri, sharedStimulusAuthoringFactory, feedback, urlUtil, request, loggerFactory) {\n    'use strict';\n\n    const logger = loggerFactory('taoMediaManager/authoring');\n    const serviceController = 'SharedStimulus';\n    const serviceExtension = 'taoMediaManager';\n\n    const manageMediaController = {\n        /**\n         * Controller entry point\n         */\n        start() {\n            const $panel = $('#panel-authoring');\n            const assetDataUrl = urlUtil.route('get', serviceController, serviceExtension);\n            const assetDataStyles = urlUtil.route('getStylesheets', 'SharedStimulusStyling', serviceExtension);\n            const assetId = uri.decode($panel.attr('data-id'));\n            let previewEnabled = false;\n\n            request(assetDataUrl, { id: assetId })\n                .then((response) => {\n                    if (response.permissions.includes('READ')) {\n                        previewEnabled = true;\n                    }\n                }).then(() => {\n                    sharedStimulusAuthoringFactory($panel, {\n                        properties: {\n                            uri: $panel.attr('data-uri'),\n                            id: assetId,\n                            assetDataUrl,\n                            assetDataStyles,\n                            fileUploadUrl: urlUtil.route('upload', 'ItemContent', 'taoItems'),\n                            fileDeleteUrl: urlUtil.route('delete', 'ItemContent', 'taoItems'),\n                            fileDownloadUrl: urlUtil.route('download', 'ItemContent', 'taoItems'),\n                            fileExistsUrl: urlUtil.route('fileExists', 'ItemContent', 'taoItems'),\n                            getFilesUrl: urlUtil.route('files', 'ItemContent', 'taoItems'),\n                            baseUrl: urlUtil.route('getFile', 'MediaManager', 'taoMediaManager', { uri: '' }),\n                            path: 'taomedia://mediamanager/',\n                            root: 'mediamanager',\n                            lang: 'en-US',\n                            previewEnabled: previewEnabled,\n                            loadCssUrl: urlUtil.route('load', 'SharedStimulusStyling', 'taoMediaManager'),\n                            saveCssUrl: urlUtil.route('save', 'SharedStimulusStyling', 'taoMediaManager'),\n                            downloadCssUrl: urlUtil.route('loadStylesheet', 'SharedStimulusStyling', 'taoMediaManager')\n                        }\n                    }).on('success', () => {\n                        feedback().success(__('Your passage is saved'));\n                    })\n                    .on('error', err => {\n                        if (!_.isUndefined(err.message)) {\n                            feedback().error(err.message);\n                        }\n                        logger.error(err);\n                    });\n                });\n        }\n    };\n\n    return manageMediaController;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoMediaManager/previewer/component/qtiSharedStimulusItem',[\n    'context',\n    'taoQtiTestPreviewer/previewer/runner',\n    'css!taoQtiTestPreviewer/previewer/provider/item/css/item'\n], function (context, previewerFactory) {\n    'use strict';\n\n    /**\n     * Builds a test runner to preview test item\n     * @param {jQuery|HTMLElement|String} container - The container in which renders the component\n     * @param {Object} [config] - The testRunner options\n     * @param {String} [config.itemUri] - The ID of the SharedStimulus (for consisten with other providers)\n     * @param {Object[]} [config.plugins] - Additional plugins to load\n     * @param {String} [config.fullPage] - Force the previewer to occupy the full window.\n     * @param {String} [config.readOnly] - Do not allow to modify the previewed item.\n     * @param {Function} [template] - An optional template for the component\n     * @returns {previewer}\n     */\n    return function qtiItemPreviewerFactory(container, config = {}, template = null) {\n        const testRunnerConfig = {\n            testDefinition: 'test-container',\n            serviceCallId: 'previewer',\n            providers: {\n                runner: {\n                    id: 'qtiItemPreviewer',\n                    module: 'taoQtiTestPreviewer/previewer/provider/item/item',\n                    bundle: 'taoQtiTestPreviewer/loader/qtiPreviewer.min',\n                    category: 'runner'\n                },\n                proxy: {\n                    id: 'qtiSharedStimulusItemProxy',\n                    module: 'taoMediaManager/previewer/proxy/qtiSharedStimulusItem',\n                    bundle: 'taoMediaManager/loader/taoMediaManager.min',\n                    category: 'proxy'\n                },\n                communicator: {\n                    id: 'request',\n                    module: 'core/communicator/request',\n                    bundle: 'loader/vendor.min',\n                    category: 'communicator'\n                },\n                plugins: config.plugins || []\n            },\n            options: {\n                view: config.view,\n                readOnly: config.readOnly,\n                fullPage: config.fullPage,\n                plugins: config.pluginsOptions,\n                hideActionBars: config.hideActionBars\n            },\n            proxyProvider: 'qtiSharedStimulusItemProxy'\n        };\n\n        //extra context config\n        testRunnerConfig.loadFromBundle = !!context.bundle;\n\n        return previewerFactory(container, testRunnerConfig, template).on('ready', function(runner) {\n            runner.on('renderitem', () => {\n                if (config.itemState) {\n                    runner.itemRunner.setState(config.itemState);\n                }\n                this.trigger('preview-loaded');\n            });\n            if (config.itemUri) {\n                return runner.loadItem(config.itemUri);\n            }\n        });\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * @author Juan Luis Gutierrez Dos Santos <juanluis.gutierrezdossantos@taotesting.com>\n */\ndefine('taoMediaManager/controller/editInstance',[\n    'jquery',\n    'lodash',\n    'layout/actions/binder',\n    'ui/previewer',\n    'util/url',\n    'taoMediaManager/previewer/component/qtiSharedStimulusItem',\n    'core/logger',\n    'ui/feedback',\n    'layout/loading-bar'\n], function($, _, binder, previewer, urlUtil, qtiItemPreviewerFactory, loggerFactory, feedback, loadingBar) {\n    'use strict';\n\n    const logger = loggerFactory('taoMediaManager/editInstance');\n\n    const manageMediaController =  {\n\n        /**\n         * Controller entry point\n         */\n        start() {\n\n            const $previewer = $('.previewer');\n            let file = {};\n            file.url = $previewer.data('url');\n            file.mime = $previewer.data('type');\n\n            const isPreviewEnabled = $previewer.data('enabled');\n            const isPassage = file.mime === 'application/qti+xml';\n\n            if (isPreviewEnabled) {\n                if (!isPassage) {\n                    // to hide the loading icon, inherited from the .previewer\n                    file.containerClass = 'no-background';\n                    $previewer.previewer(file);\n                } else {\n                    loadingBar.start();\n                    qtiItemPreviewerFactory($previewer, {itemUri:  $('#edit-media').data('uri')})\n                        .on('error', function (err) {\n                            if (!_.isUndefined(err.message)) {\n                                feedback().error(err.message);\n                            }\n                            logger.error(err);\n                        })\n                        .on('preview-loaded', loadingBar.stop);\n                }\n            }\n\n            if (isPassage) {\n                $('#media-authoring').show();\n            } else {\n                $('#media-authoring').hide();\n            }\n\n            $('#edit-media').off()\n                .on('click', function() {\n                    const action = { binding : 'load' , url: urlUtil.route('editMedia', 'MediaImport', 'taoMediaManager') };\n                    binder.exec(action, { classUri : this.dataset.classuri , id : this.dataset.uri } || this._resourceContext);\n                });\n        }\n    };\n\n    return manageMediaController;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoMediaManager/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'MediaManager': {\n            'deps': 'controller/actions',\n            'actions': {\n                'editInstance' : 'controller/editInstance',\n                'authoring': 'controller/authoring'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sbastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoMediaManager/previewer/adapter/item/qtiSharedStimulusItem',['lodash', 'core/logger', 'taoMediaManager/previewer/component/qtiSharedStimulusItem', 'ui/feedback'], function (\n    _,\n    loggerFactory,\n    qtiItemPreviewerFactory,\n    feedback\n) {\n    'use strict';\n\n    const logger = loggerFactory('taoMediaManager/previewer');\n\n    /**\n     * List of required plugins that should be loaded in order to make the previewer work properly\n     * @type {Object[]}\n     */\n    const defaultPlugins = [\n        {\n            module: 'taoQtiTestPreviewer/previewer/plugins/controls/close',\n            bundle: 'taoQtiTestPreviewer/loader/qtiPreviewer.min',\n            category: 'controls'\n        },\n        {\n            module: 'taoQtiTestPreviewer/previewer/plugins/tools/scale/scale',\n            bundle: 'taoQtiTestPreviewer/loader/qtiPreviewer.min',\n            category: 'tools'\n        },\n        {\n            module: 'taoQtiTest/runner/plugins/tools/itemThemeSwitcher/itemThemeSwitcher',\n            bundle: 'taoQtiTest/loader/testPlugins.min',\n            category: 'tools'\n        }\n    ];\n\n    /**\n     * Wraps the legacy item previewer in order to be loaded by the taoItems previewer factory\n     */\n    return {\n        name: 'qtiSharedStimulusItem',\n\n        /**\n         * Builds and shows the legacy item previewer\n         *\n         * @param {String} sharedStimulusId - The ID of the SharedStimulus to load\n         * @param {Object} state - The state of the item\n         * @param {Object} [config] - Some config entries\n         * @param {Object[]} [config.plugins] - Additional plugins to load\n         * @param {String} [config.fullPage] - Force the previewer to occupy the full window.\n         * @param {String} [config.readOnly] - Do not allow to modify the previewed item.\n         * @returns {Object}\n         */\n        init(sharedStimulusId, config = {}) {\n            config.itemUri = sharedStimulusId;\n            config.plugins = Array.isArray(config.plugins) ? [...defaultPlugins, ...config.plugins] : defaultPlugins;\n            return qtiItemPreviewerFactory(window.document.body, config).on('error', function (err) {\n                if (!_.isUndefined(err.message)) {\n                    feedback().error(err.message);\n                }\n                logger.error(err);\n            });\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * Test runner proxy for the QTI item previewer\n *\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoMediaManager/previewer/proxy/qtiSharedStimulusItem',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'core/promiseQueue',\n    'core/dataProvider/request',\n    'util/url',\n    'taoMediaManager/qtiCreator/helper/createDummyItemData',\n    'taoMediaManager/qtiCreator/helper/formatStyles'\n], function ($, _, __, promiseQueue, request, urlUtil, creatorDummyItemData, formatStyles) {\n    'use strict';\n\n    const serviceController = 'SharedStimulus';\n    const serviceExtension = 'taoMediaManager';\n    /**\n     * QTI proxy definition\n     * Related to remote services calls\n     * @type {Object}\n     */\n    return {\n        name: 'qtiSharedStimulusItemProxy',\n\n        /**\n         * Installs the proxy\n         */\n        install: function install() {\n            /**\n             * A promise queue to ensure requests run sequentially\n             */\n            this.queue = promiseQueue();\n        },\n        /**\n         * Initializes the proxy\n         * @returns {Promise} - Returns a promise. The proxy will be fully initialized on resolve.\n         *                      Any error will be provided if rejected.\n         */\n        init: function init() {\n            // the method must return a promise with Object\n            return Promise.resolve({});\n        },\n\n        /**\n         * Uninstalls the proxy\n         * @returns {Promise} - Returns a promise. The proxy will be fully uninstalled on resolve.\n         *                      Any error will be provided if rejected.\n         */\n        destroy: function destroy() {\n            // no request, just a resources cleaning\n            this.queue = null;\n\n            // the method must return a promise\n            return Promise.resolve();\n        },\n\n        /**\n         * Gets an item definition by its identifier, also gets its current state\n         * @param {String} identifier - The identifier of the sharedStimulus to get\n         * @returns {Promise} - Returns a promise. The item data will be provided on resolve.\n         *                      Any error will be provided if rejected.\n         */\n        getItem: function getItem(identifier) {\n            return Promise.all([\n                request(urlUtil.route('get', serviceController, serviceExtension), { id: identifier }, 'GET'),\n                request(urlUtil.route('getStylesheets', 'SharedStimulusStyling', serviceExtension), {\n                    uri: identifier\n                })\n            ]).then(([data, styles]) => {\n                const itemData = creatorDummyItemData(data);\n                data.baseUrl = urlUtil.route('getFile', 'MediaManager', 'taoMediaManager', { uri: '' });\n                data.content = {\n                    type: 'qti',\n                    data: itemData\n                };\n                const assetStyles = $('link[data-serial*=\"preview\"]');\n                if (assetStyles.length) {\n                    assetStyles.remove();\n                }\n\n                styles.children.forEach((stylesheet, index) => {\n                    const serial = `preview_${index}`;\n                    const link = urlUtil.route('loadStylesheet', 'SharedStimulusStyling', 'taoMediaManager', {\n                        uri: identifier,\n                        stylesheet: stylesheet.name\n                    });\n                    let cssFile = Object.values(document.styleSheets).find(sheet => typeof sheet.href === 'string' && sheet.href === link);\n                    if (!cssFile) {\n                        // avoid adding the CSS file on Preview list everytime Asset is clicked\n                        data.content.data.stylesheets[serial] = {\n                            qtiClass: 'stylesheet',\n                            attributes: {\n                                href: link,\n                                media: 'all',\n                                title: '',\n                                type: 'text/css',\n                                onload: (e => formatStyles.handleStylesheetLoad(e))\n                            },\n                            serial,\n                            getComposingElements: () => ({})\n                        };\n                    }\n                });\n                return data;\n            });\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\ndefine('taoMediaManager/qtiCreator/widgets/helpers/content',[\n    'jquery',\n    'lodash',\n    'taoMediaManager/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function($, _, creatorRenderer, containerHelper, gridContentHelper){\n    'use strict';\n    // all files that use qtiCreator/helper/creatorRenderer should be copied from taoQtiItem\n    // because they should use proper locations that are binded in Renderer\n    // qtiCreator/helper/creatorRenderer use qtiCreator/renderers/Renderer\n    // qtiCreator/renderers/Renderer return Renderer with binded locations from qtiCreator/renderers/config\n\n    const contentHelper = {};\n\n    /**\n     * Create elements from a widget box having the 'data-new=true' attribute\n     *  - render the elements at their placeholder in $container\n     *  - apply callback on each widget\n     * @param {DOMElement} container - element that will contain the new ones\n     * @param {JQuery} $container - DOM container where the new elements are created\n     * @param {String} data - corresponding HTML (?)\n     * @param {function} callback - will be triggered for each new created element\n     */\n    contentHelper.createElements = function createElements(container, $container, data, callback) {\n\n        const $dummy = $('<div>').html(data);\n\n        containerHelper.createElements(container, gridContentHelper.getContent($dummy), function(newElts){\n\n            creatorRenderer.get().load(function(){\n\n                _.each(newElts, function(serial) {\n                    let $placeholder,\n                        $widget,\n                        widget;\n\n                    $placeholder = $container.find(`.widget-box[data-new][data-qti-class=${serial.qtiClass}]`);\n\n                    serial.setRenderer(this);\n                    serial.render($placeholder);\n\n                    //render widget\n                    serial.postRender();\n\n                    widget = serial.data('widget');\n                    $widget = widget.$original;\n\n                    //inform height modification\n                    $widget.trigger('contentChange.gridEdit');\n\n                    if(_.isFunction(callback)){\n                        callback(widget);\n                    }\n                }.bind(this));\n\n            }, this.getUsedClasses());\n        });\n\n    };\n\n    contentHelper.changeInnerWidgetState = function _changeInnerWidgetState(outerWidget, state){\n\n        const selector = [];\n        _.forEach(['img', 'math', 'object', 'include'], function(qtiClass){\n            selector.push(`[data-html-editable] .widget-${qtiClass}`);\n        });\n\n        outerWidget.$container.find(selector.join(',')).each(function(){\n            const innerWidget = $(this).data('widget');\n            if(innerWidget){\n                innerWidget.changeState(state);\n            }\n        });\n    };\n\n    return contentHelper;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2017 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoMediaManager/qtiCreator/widgets/helpers/content'\n], function ($, stateFactory, contentHelper) {\n    'use strict';\n\n    return stateFactory.create(\n        'active',\n        function () {\n            const _widget = this.widget,\n                container = _widget.$container[0],\n                item = _widget.element.getRootElement(),\n                areaBroker = _widget.getAreaBroker(),\n                $modalFeedbacksArea = $('#modalFeedbacks'),\n                outerContainer = document.querySelector('#item-editor-scroll-outer');\n\n            function checkIfWidgetShouldSleep(e) {\n                return (\n                    container !== e.target &&\n                    !$.contains(container, e.target) &&\n                    $.contains(outerContainer, e.target) && // in case click on scrollbar\n                    (!areaBroker ||\n                        !areaBroker.getEditorBarArea ||\n                        !$.contains(areaBroker.getEditorBarArea().get(0), e.target)) &&\n                    (!$modalFeedbacksArea.length || !$.contains($modalFeedbacksArea[0], e.target)) && //if click triggered inside the #modalFeedback then state must not be changed.\n                    $(e.target).data('role') !== 'restore' &&\n                    !$(e.target).closest('.widget-popup').length\n                );\n            }\n\n            //move to sleep state by clicking anywhere outside the interaction\n            areaBroker\n                .getContentCreatorPanelArea()\n                .on(`mousedown.active.${_widget.serial}`, function (e) {\n                    if (checkIfWidgetShouldSleep(e)) {\n                        _widget.changeState('sleep');\n                    }\n                })\n                .on('beforesave.qti-creator.active', function () {\n                    _widget.changeState('sleep');\n                })\n                .on('styleedit.active', function () {\n                    _widget.changeState('sleep');\n                });\n\n            $(document).on('open-preview.qti-item', function () {\n                _widget.changeState('sleep');\n            });\n\n            if (item && item.data('widget')) {\n                //in item editing context:\n                item.data('widget').$container.on(\n                    'resizestart.gridEdit.active beforedragoverstart.gridEdit.active',\n                    function () {\n                        _widget.changeState('sleep');\n                    }\n                );\n            }\n        },\n        function () {\n            const areaBroker = this.widget.getAreaBroker();\n\n            contentHelper.changeInnerWidgetState(this.widget, 'sleep');\n\n            this.widget.$container.off('.active');\n            areaBroker.getContentCreatorPanelArea().off(`.active.${this.widget.serial}`);\n\n            const item = this.widget.element.getRootElement();\n            if (item && item.data('widget')) {\n                item.data('widget').$container.off('.active');\n            }\n        }\n    );\n});\n\n","define('taoMediaManager/qtiCreator/widgets/static/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoMediaManager/qtiCreator/widgets/states/Active'\n], function($, stateFactory, Active){\n    'use strict';\n\n    return stateFactory.extend(Active, function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container;\n\n        _widget.beforeStateInit(function(e, element, state){\n            var serial = element.getSerial(),\n                composingElts;\n\n            if((state.name === 'active' && serial !== _widget.serial) || state.name === 'choice'){\n\n                if(_widget.element.qtiClass === 'rubricBlock'){\n                    //exclude\n                    composingElts = _widget.element.getComposingElements();\n                    if(!composingElts[element.serial]){\n                        _widget.changeState('sleep');\n                    }\n                }else{\n                    //call sleep whenever other widget is active\n                    _widget.changeState('sleep');\n                }\n\n            }\n\n        }, 'otherActive');\n\n        $container.on('mouseenter.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseleave.sleep');\n        }).on('mouseleave.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseenter.sleep');\n        }).on('click.active', function(e){\n            e.stopPropagation();\n        });\n\n    }, function(){\n        const _widget = this.widget,\n            areaBroker = _widget.getAreaBroker();\n\n        _widget.$container.off('.active');\n        areaBroker.getContentCreatorPanelArea().off(`.active.${_widget.serial}`);\n\n        _widget.offEvents('otherActive');\n    });\n\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/helper/ckConfigurator',['lodash', 'ui/ckeditor/ckConfigurator', 'mathJax'], function(_, ckConfigurator, mathJax) {\n    'use strict';\n\n    const _defaults = {\n        qtiImage : true,\n        qtiMedia : true,\n        qtiInclude : false,\n        underline : true,\n        mathJax : !!mathJax,\n        removePlugins: 'taoqtiinclude',\n        horizontalRule: true,\n        furiganaPlugin: true\n    };\n\n    /**\n     * Generate a configuration object for CKEDITOR\n     *\n     * @param {object} editor instance of ckeditor\n     * @param {String} toolbarType block | inline | flow | qtiBlock | qtiInline | qtiFlow | reset to get back to normal\n     * @param {Object} [options] - is based on the CKEDITOR config object with some additional sugar\n     *        Note that it's here you need to add parameters for the resource manager.\n     *        Some options are not covered in http://docs.ckeditor.com/#!/api/CKEDITOR.config\n     * @param {String} [options.dtdOverrides] - @see dtdOverrides which pre-defines them\n     * @param {Object} [options.positionedPlugins] - @see ckConfig.positionedPlugins\n     * @param {Boolean} [options.qtiImage] - enables the qtiImage plugin\n     * @param {Boolean} [options.qtiInclude] - enables the qtiInclude plugin\n     * @param {Boolean} [options.underline] - enables the underline plugin\n     * @param {Boolean} [options.mathJax] - enables the mathJax plugin\n     * @returns {Function} - a function for get the config\n     *\n     * @see http://docs.ckeditor.com/#!/api/CKEDITOR.config\n     */\n    const getConfig = function(editor, toolbarType = 'qtiInline', options) {\n        return ckConfigurator.getConfig(editor, toolbarType, _.defaults(options || {}, _defaults));\n    };\n\n    return {\n        getConfig : getConfig\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015-2022 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\ndefine('taoMediaManager/qtiCreator/editor/ckEditor/htmlEditor',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'ckeditor',\n    'core/promise',\n    'services/features',\n    'taoMediaManager/qtiCreator/helper/ckConfigurator',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoMediaManager/qtiCreator/widgets/helpers/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/deletingState',\n    'taoQtiItem/qtiCreator/editor/ckEditor/featureFlag',\n    'taoQtiItem/qtiCreator/helper/languages'\n], function (\n    _,\n    __,\n    $,\n    CKEditor,\n    Promise,\n    features,\n    ckConfigurator,\n    Element,\n    contentHelper,\n    deletingHelper,\n    featureFlag,\n    languages\n) {\n    'use strict';\n\n    const _defaults = {\n        placeholder: __('some text ...'),\n        shieldInnerContent: true,\n        passthroughInnerContent: false,\n        autofocus: true\n    };\n\n    const placeholderClass = 'cke-placeholder';\n    const languagePluginEnabled = features.isVisible('taoQtiItem/creator/editor/ckEditor/languagePlugin', false);\n\n    let editorFactory;\n\n    //prevent auto inline editor creation:\n    CKEditor.disableAutoInline = true;\n\n    /**\n     * @param {JQuery} $editable - the element to be transformed into an editor\n     * @param {JQuery} $editableContainer - the container of the editor\n     * @param {Object} [options]\n     * @param {String} [options.placeholder] - the place holder text\n     * @param {Boolean} [options.shieldInnerContent] - define if the inner widget content should be protected or not\n     * @param {Boolean} [options.passthroughInnerContent] - define if the inner widget content should be accessible directly or not\n     * @param {String} [options.removePlugins] - a coma-separated list of plugins that should not be loaded: 'plugin1,plugin2,plugin3'\n     * @param {Boolean} [options.autofocus] - automatically focus\n     * @returns {Object} CKEditor\n     */\n    function _buildEditor($editable, $editableContainer, options) {\n        const widget = (options.data || {}).widget,\n            areaBroker = widget && widget.getAreaBroker && widget.getAreaBroker(),\n            $toolbarArea = areaBroker && areaBroker.getToolbarArea && areaBroker.getToolbarArea(),\n            removePlugins = [];\n\n        options = _.defaults(options, _defaults);\n\n        if (!($editable instanceof $) || !$editable.length) {\n            throw new Error('invalid jquery element for $editable');\n        }\n        if (!($editableContainer instanceof $) || !$editableContainer.length) {\n            throw new Error('invalid jquery element for $editableContainer');\n        }\n\n        if (options.placeholder && options.placeholder !== '') {\n            if ($editable.is('input')) {\n                $editable.attr('placeholder', options.placeholder);\n            } else {\n                $editable.attr('data-placeholder', options.placeholder);\n            }\n        }\n\n        if (options.removePlugins) {\n            options.removePlugins.split('').forEach(removePluginName => {\n                removePlugins.push(removePluginName.trim());\n            });\n        }\n\n        if (!languagePluginEnabled) {\n            removePlugins.push('taolanguage');\n        }\n\n        const ckConfig = {\n            dtdMode: 'qti',\n            autoParagraph: false,\n            removePlugins: removePlugins.join(','),\n            enterMode: options.enterMode || CKEditor.ENTER_P,\n            floatSpaceDockedOffsetY: 10,\n            language_list: options.language_list,\n            sharedSpaces: {\n                top: ($toolbarArea && $toolbarArea.attr('id')) || 'toolbar-top'\n            },\n            taoQtiItem: {\n                /**\n                 * @param {DOM} tempWidget - this contains the DOM nodes created by a ckEditor plugin,\n                 *                           wrapped in a temporary widget container (= a widget container with a [data-new=\"true\"] attribute)\n                 */\n                insert: function (tempWidget) {\n                    const $newContent = $(tempWidget).clone(); // we keep the original content for later use\n                    if (options.data && options.data.container && options.data.widget) {\n                        const $newImgPlaceholder = $editable.find('[data-new=\"true\"][data-qti-class=\"img\"]');\n                        if ($newImgPlaceholder.length &&\n                            !$editable.closest('.qti-choice, .qti-flow-container').length &&\n                            !$newImgPlaceholder.closest('.qti-table caption').length\n                        ) {\n                            // instead img will add figure element\n                            $newImgPlaceholder.attr('data-qti-class','figure');\n                            // span after for new line\n                            $('<span>&nbsp;</span>').insertAfter($newImgPlaceholder);\n                        }\n                        contentHelper.createElements(\n                            options.data.container,\n                            $editable,\n                            _htmlEncode(this.getData()),\n                            function (createdWidget) {\n                                const createdElement = createdWidget.element;\n\n                                if (_.isFunction(createdElement.initContainer)) {\n                                    createdElement.body($newContent.html());\n                                    createdWidget.rebuild();\n                                    createdWidget = createdElement.data('widget');\n                                }\n                                _activateInnerWidget(options.data.widget, createdWidget);\n                            }\n                        );\n                        // hide toolbar to prevent double click\n                        const editor = $editable.data('editor');\n                        editor.focusManager.blur(true);\n                    }\n                }\n            },\n            on: {\n                instanceReady: function (e) {\n                    let widgets = {};\n                    const editor = e.editor;\n\n                    //store it in editable elt data attr\n                    $editable.data('editor', editor);\n                    $editable.data('editor-options', options);\n\n                    //need to debounce the callback to prevent the changes made by undo to trigger the event change twice\n                    editor.on(\n                        'change',\n                        _.debounce(\n                            function markupChanged() {\n                                _detectWidgetDeletion($editable, widgets, editor);\n                                if (_.isFunction(options.change)) {\n                                    options.change.call(editor, _htmlEncode(editor.getData()));\n                                }\n                            },\n                            100,\n                            {\n                                leading: true\n                            }\n                        )\n                    );\n\n                    managePlaceholder($editable, editor);\n\n                    if (options.data && options.data.container) {\n                        //store in data-qti-container attribute the editor instance as soon as it is ready\n                        $editable.data('qti-container', options.data.container);\n\n                        //init editable\n                        widgets = _rebuildWidgets(options.data.container, $editable, {\n                            restoreState: true\n                        });\n                        if (options.shieldInnerContent) {\n                            _shieldInnerContent($editable, options.data.widget);\n                        }\n                    }\n\n                    if (options.autofocus) {\n                        _focus(editor);\n                    }\n\n                    $editable.trigger('editorready', [editor]);\n\n                    $('.qti-item').trigger('toolbarchange');\n                },\n                blur: function () {\n                    if ($toolbarArea) {\n                        $toolbarArea.hide();\n                    }\n                },\n                focus: function () {\n                    if ($toolbarArea) {\n                        $toolbarArea.show();\n                    }\n\n                    //callback:\n                    if (_.isFunction(options.focus)) {\n                        options.focus.call(this, _htmlEncode(this.getData()));\n                    }\n\n                    $editable.trigger('editorfocus');\n\n                    $('.qti-item').trigger('toolbarchange');\n                },\n                configLoaded: function (e) {\n                    //@todo : do we really have to wait here to initialize the config?\n                    let toolbarType = options.toolbarType || '';\n                    if (options.toolbar && _.isArray(options.toolbar)) {\n                        ckConfig.toolbar = options.toolbar;\n                    } else {\n                        toolbarType = getTooltypeFromContainer($editableContainer);\n                    }\n\n                    if (typeof options.qtiMedia !== 'undefined') {\n                        ckConfig.qtiMedia = options.qtiMedia;\n                    }\n                    if (typeof options.qtiImage !== 'undefined') {\n                        ckConfig.qtiImage = options.qtiImage;\n                    }\n                    if (typeof options.qtiInclude !== 'undefined') {\n                        ckConfig.qtiInclude = options.qtiInclude;\n                    }\n                    if (typeof options.highlight !== 'undefined') {\n                        ckConfig.highlight = options.highlight;\n                    }\n\n                    e.editor.config = ckConfigurator.getConfig(e.editor, toolbarType, ckConfig);\n                },\n                afterPaste: function () {\n                    //@todo : we may add some processing on the editor after paste\n                }\n            }\n        };\n\n        return CKEditor.inline($editable[0], ckConfig);\n    }\n\n    /**\n     * Handle the placeholder for non-input elements.\n     * To avoid CK nasty side-effects of using the placeholder attribute on non-input elements,\n     * we handle the placeholder with css.\n     * @param {JQuery} $editable\n     * @param {Object} editor\n     */\n    function managePlaceholder($editable, editor) {\n        if (!$editable.is('input')) {\n            togglePlaceholder($editable);\n\n            editor.on('change', function () {\n                togglePlaceholder($editable);\n            });\n        }\n    }\n\n    /**\n     * Toggle the placeholder class on the editable depending on its content\n     * @param {JQuery} $editable\n     */\n    function togglePlaceholder($editable) {\n        const nonEmptyContent = ['img', 'table', 'math', 'object', 'printedVariable', '.tooltip-target'];\n\n        if ($editable.text().trim() === '' && !$editable.find(nonEmptyContent.join(',')).length) {\n            $editable.addClass(placeholderClass);\n        } else {\n            removePlaceholder($editable);\n        }\n    }\n\n    function removePlaceholder($editable) {\n        $editable.removeClass(placeholderClass);\n    }\n\n    /**\n     * Assess\n     * @param {type} $editableContainer\n     * @returns {String}\n     */\n    function getTooltypeFromContainer($editableContainer) {\n        let toolbarType = 'qtiFlow';\n        // build parameter for toolbar\n        if (\n            $editableContainer.hasClass('widget-blockInteraction') ||\n            $editableContainer.hasClass('widget-textBlock') ||\n            $editableContainer.hasClass('widget-rubricBlock')\n        ) {\n            toolbarType = 'qtiBlock';\n        } else if (\n            $editableContainer.hasClass('qti-prompt-container') ||\n            $editableContainer.hasClass('widget-hottext')\n        ) {\n            toolbarType = 'qtiInline';\n        } else if ($editableContainer.hasClass('widget-table') && !featureFlag.disableCellAlignment) {\n            toolbarType = 'qtiTable';\n        }\n        return toolbarType;\n    }\n\n    /**\n     * Find an inner element by its data attribute name\n     * @param {JQuery} $container\n     * @param {String} dataAttribute\n     * @returns {JQuery} collection\n     */\n    function _find($container, dataAttribute) {\n        let $collection;\n\n        if ($container.data(dataAttribute)) {\n            $collection = $container;\n        } else {\n            $collection = $container.find(`[data-${dataAttribute}=true]`);\n        }\n        return $collection;\n    }\n\n    /**\n     * Rebuild all innerwidgets located inside a container\n     *\n     * @param {Object} container\n     * @param {JQuery} $container\n     * @param {Object} options\n     * @returns {Object} widgets\n     */\n    function _rebuildWidgets(container, $container, options) {\n        const widgets = {};\n        options = options || {};\n\n        //re-init all widgets:\n        _.each(_.values(container.elements), function (elt) {\n            const widget = elt.data('widget'),\n                currentState = widget.getCurrentState().name;\n\n            widgets[elt.serial] = widget.rebuild({\n                context: $container,\n                ready: function (widgetInner) {\n                    if (options.restoreState) {\n                        //restore current state\n                        widgetInner.changeState(currentState);\n                    }\n                }\n            });\n        });\n\n        $container.trigger('widgetCreated', [widgets, container]);\n\n        return widgets;\n    }\n\n    /**\n     * Find the widget container by its serial\n     *\n     * @param {JQuery} $container\n     * @param {String} serial\n     * @returns {JQuery} $widget\n     */\n    function _findWidgetContainer($container, serial) {\n        // re-query widget container to apply changes in case of deletion\n        return $($container.selector).find(`.widget-box[data-serial=${serial}]`);\n    }\n\n    /**\n     * Detect if an inner widget has been removed\n     *\n     * @param {JQuery} $container\n     * @param {Array} widgets\n     * @param {Object} editor\n     * @returns {undefined}\n     */\n    function _detectWidgetDeletion($container, widgets, editor) {\n        const deleted = [];\n        const container = $container.data('qti-container');\n\n        _.each(widgets, function (w) {\n            if (!w.element.data('removed')) {\n                const $widget = _findWidgetContainer($container, w.serial);\n                if (!$widget.length) {\n                    deleted.push(w);\n                }\n            }\n        });\n\n        if (deleted.length) {\n            const undoCmd = editor.getCommand('undo');\n            const $messageBox = deletingHelper.createInfoBox(deleted);\n\n            $messageBox\n                .on('confirm.deleting', function () {\n                    _.each(deleted, function (w) {\n                        w.element.remove();\n                        w.destroy();\n                    });\n\n                    editor.resetUndo();\n                })\n                .on('undo.deleting', function () {\n                    editor.undoManager.undo();\n\n                    //need to rebuild the inner widgets in case the undo restored some qti elements\n                    _rebuildWidgets(container, $container, {\n                        restoreState: true\n                    });\n\n                    _shieldInnerContent($container, container.data('widget'));\n                });\n\n            if (undoCmd) {\n                //catch ckeditor's undo event to trigger the same behaviour as the undo action dialog\n                undoCmd.on('afterUndo', function () {\n                    $messageBox.find('a.undo').click();\n                });\n            }\n        }\n    }\n\n    /**\n     * @param {JQuery} $widget - the widget to be protected\n     * @returns {JQuery} The added layer (shield)\n     */\n    function addShield($widget) {\n        const $shield = $('<button>', {\n            class: 'html-editable-shield'\n        });\n\n        $widget.attr('contenteditable', false);\n        $widget.append($shield);\n        return $shield;\n    }\n\n    /**\n     * Protect the inner widgets of a container\n     *\n     * @param {JQuery} $container\n     * @param {Object} containerWidget\n     * @returns {undefined}\n     */\n    function _shieldInnerContent($container, containerWidget) {\n        $container.find('.widget-box').each(function () {\n            const $widget = $(this);\n\n            addShield($widget).on('click', function (e) {\n                //click on shield:\n                //1. this.widget.changeState('sleep');\n                //2. clicked widget.changeState('active');\n\n                e.stopPropagation();\n\n                const innerWidget = $widget.data('widget');\n                _activateInnerWidget(containerWidget, innerWidget);\n            });\n        });\n    }\n\n    /**\n     * Activate the inner widget\n     *\n     * @param {Object} containerWidget\n     * @param {Object} innerWidget\n     * @returns {undefined}\n     */\n    function _activateInnerWidget(containerWidget, innerWidget) {\n        let listenToWidgetCreation;\n        const event = `widgetCreated.${innerWidget.serial}`;\n\n        if (containerWidget && containerWidget.element && containerWidget.element.qtiClass) {\n            listenToWidgetCreation = function () {\n                containerWidget.$container.on(event, function (e, widgets) {\n                    const targetWidget = widgets[innerWidget.serial];\n                    if (targetWidget) {\n                        containerWidget.$container.off(event);\n                        //FIXME potential race condition ? (debounce the enclosing event handler ?)\n                        _.delay(function () {\n                            if (Element.isA(targetWidget.element, 'interaction')) {\n                                targetWidget.changeState('question');\n                            } else {\n                                targetWidget.changeState('active');\n                            }\n                        }, 100);\n                    }\n                });\n            };\n\n            if (Element.isA(containerWidget.element, '_container') && !containerWidget.element.data('stateless')) {\n                //only _container that are NOT stateless need to change its state to sleep before activating the new one.\n                listenToWidgetCreation();\n                containerWidget.changeState('sleep');\n            } else if (Element.isA(containerWidget.element, 'interaction')) {\n                listenToWidgetCreation();\n                containerWidget.changeState('sleep');\n            } else if (Element.isA(containerWidget.element, 'choice')) {\n                listenToWidgetCreation();\n                containerWidget.changeState('question');\n            } else if (Element.isA(containerWidget.element, 'table')) {\n                listenToWidgetCreation();\n                containerWidget.changeState('sleep');\n            } else if (Element.isA(innerWidget.element, 'choice')) {\n                innerWidget.changeState('choice');\n            } else {\n                innerWidget.changeState('active');\n            }\n        } else {\n            innerWidget.changeState('active');\n        }\n    }\n\n    /**\n     * Special encoding of ouput html generated from ie8 : moved to xmlRenderer\n     * @param {String} encodedStr\n     * @returns {String} encodedStr\n     */\n    function _htmlEncode(encodedStr) {\n        return encodedStr;\n    }\n\n    /**\n     * Focus the editor and set the cursor to the end\n     *\n     * @param {Object} editor - the ckeditor instance\n     * @returns {undefined}\n     */\n    function _focus(editor) {\n        if (editor.editable() && editor.editable().$.parentNode) {\n            editor.focus();\n            const range = editor.createRange();\n            range.moveToElementEditablePosition(editor.editable(), true);\n            editor.getSelection().selectRanges([range]);\n        }\n    }\n\n    editorFactory = {\n        /**\n         * Check if all data-html-editable has an editor\n         *\n         * @param {type} $container\n         * @returns {undefined}\n         */\n        hasEditor: function ($container) {\n            let hasEditor = false;\n\n            _find($container, 'html-editable').each(function () {\n                hasEditor = !!$(this).data('editor');\n                return hasEditor; //continue if true, break if false\n            });\n\n            return hasEditor;\n        },\n        /**\n         * Instanciate the editor\n         *\n         * @param {JQuery} $container\n         * @param {Object} [editorOptions]\n         * @param {String} [editorOptions.placeholder] - the place holder text\n         * @param {Boolean} [editorOptions.shieldInnerContent] - define if the inner widget content should be protected or not\n         * @param {Boolean} [editorOptions.passthroughInnerContent] - define if the inner widget content should be accessible directly or not\n         * @param {Boolean} [editorOptions.enterMode] - what is the behavior of the \"Enter\" key (see ENTER_MODE_xxx in ckEditor configuration)\n         * @returns {undefined}\n         */\n        buildEditor: function ($container, editorOptions) {\n            return languages\n                .getList()\n                .then(languages.useCKEFormatting)\n                .then(languagesData => {\n                    const buildTasks = [];\n\n                    editorOptions.language_list = languagesData;\n\n                    _find($container, 'html-editable-container').each(function () {\n                        const $editableContainer = $(this),\n                            $editable = $editableContainer.find('[data-html-editable]');\n\n                        buildTasks.push(\n                            new Promise(function (resolve) {\n                                //need to make the element html editable to enable ck inline editing:\n                                $editable.attr('contenteditable', true);\n\n                                //build it\n                                _buildEditor($editable, $editableContainer, editorOptions);\n\n                                $editable.on('editorready', resolve);\n                            })\n                        );\n                    });\n                    return Promise.all(buildTasks);\n                });\n        },\n        /**\n         * Destroy the editor\n         *\n         * @param {JQuery} $container\n         * @returns {undefined}\n         */\n        destroyEditor: function ($container) {\n            const destructTasks = [];\n            _find($container, 'html-editable-container').each(function () {\n                const $editableContainer = $(this);\n                const $editable = $editableContainer.find('[data-html-editable]');\n\n                $editable.removeAttr('contenteditable');\n                if ($editable.data('editor')) {\n                    destructTasks.push(\n                        new Promise(function (resolve) {\n                            const editor = $editable.data('editor');\n                            const options = $editable.data('editor-options');\n\n                            //before destroying, ensure that data is stored\n                            if (_.isFunction(options.change)) {\n                                options.change.call(editor, _htmlEncode(editor.getData()));\n                            }\n\n                            removePlaceholder($editable);\n\n                            editor.on('destroy', function () {\n                                $editable.removeData('editor').removeData('editor-options');\n                                if ($editable.data('qti-container')) {\n                                    _rebuildWidgets($editable.data('qti-container'), $editable);\n                                }\n\n                                $editable.trigger('editordestroyed');\n                                resolve();\n                            });\n\n                            editor.focusManager.blur(true);\n                            editor.destroy();\n                        })\n                    );\n                }\n            });\n            return Promise.all(destructTasks);\n        },\n        /**\n         * Get the editor content\n         *\n         * @param {JQuery} $editable\n         * @returns {String}\n         */\n        getData: function ($editable) {\n            const editor = $editable.data('editor');\n            if (editor) {\n                return _htmlEncode(editor.getData());\n            } else {\n                throw new Error('no editor attached to the DOM element');\n            }\n        },\n        /**\n         * Allow to set the editor content. Works only with plain text for now.\n         *\n         * @param {JQuery} $editable\n         * @param {String} data\n         */\n        setData: function ($editable, data) {\n            const editor = $editable.data('editor');\n            if (editor) {\n                if (_.isString(data)) {\n                    editor.setData(_.escape(data));\n                }\n            } else {\n                throw new Error('no editor attached to the DOM element');\n            }\n        },\n        /**\n         * Focus all the editors found in the given container\n         *\n         * @param {JQuery} $editable\n         * @returns {undefined}\n         */\n        focus: function ($editable) {\n            _find($editable, 'html-editable').each(function () {\n                const editor = $(this).data('editor');\n                if (editor) {\n                    _focus(editor);\n                }\n            });\n        }\n    };\n\n    return editorFactory;\n});\n\n","\ndefine('tpl!taoMediaManager/qtiCreator/tpl/forms/static/text', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel\\\">\\n    <label for=\\\"textBlockCssClass\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Text Block CSS Class\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":35},\"end\":{\"line\":2,\"column\":64}}}))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Set a CSS class name in order to customize the display style.\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":33},\"end\":{\"line\":4,\"column\":103}}}))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"textBlockCssClass\\\" value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"textBlockCssClass\") || (depth0 != null ? lookupProperty(depth0,\"textBlockCssClass\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"textBlockCssClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":55},\"end\":{\"line\":5,\"column\":76}}}) : helper)))\n    + \"\\\" />\\n</div>\";\n},\"useData\":true}); });\n","define('taoMediaManager/qtiCreator/widgets/static/text/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoMediaManager/qtiCreator/widgets/static/states/Active',\n    'taoMediaManager/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoMediaManager/qtiCreator/tpl/forms/static/text',\n    'taoMediaManager/qtiCreator/editor/styleEditor/styleEditor',\n    'taoMediaManager/qtiCreator/editor/styleEditor/fontSelector',\n    'taoMediaManager/qtiCreator/editor/styleEditor/colorSelector',\n    'taoMediaManager/qtiCreator/editor/styleEditor/fontSizeChanger'\n], function (\n    $,\n    stateFactory,\n    Active,\n    htmlEditor,\n    content,\n    formElement,\n    formTpl,\n    styleEditor,\n    fontSelector,\n    colorSelector,\n    fontSizeChanger\n) {\n    'use strict';\n\n    const wrapperCls = 'custom-text-box';\n\n    const TextActive = stateFactory.extend(\n        Active,\n        function () {\n            this.buildStylesEditor();\n            this.buildEditor();\n            this.initForm();\n        },\n        function () {\n            this.destroyEditor();\n            this.destroyStylesEditor();\n            this.widget.$form.empty();\n        }\n    );\n\n    TextActive.prototype.buildEditor = function () {\n        const widget = this.widget;\n        const $editableContainer = widget.$container;\n        const container = widget.element;\n        const changeCallback = content.getChangeCallback(container);\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if (!htmlEditor.hasEditor($editableContainer)) {\n            htmlEditor.buildEditor($editableContainer, {\n                change: function (data) {\n                    changeCallback.call(this, data);\n\n                    // remove the form value if there is no content to apply on\n                    if (!data) {\n                        widget.$form.find('[name=\"textBlockCssClass\"]').val('');\n                    }\n                },\n                blur: function () {\n                    widget.changeState('sleep');\n                },\n                data: {\n                    widget: widget,\n                    container: container\n                }\n            });\n        }\n    };\n\n    TextActive.prototype.buildStylesEditor = function () {\n        const widget = this.widget;\n        const $editableContainer = widget.$container;\n\n        let $block = $editableContainer.find(`.${wrapperCls}`);\n        if (!$block.length) {\n            // no wrapper found, insert one\n            $block = widget.$container.find('[data-html-editable=\"true\"]').wrapInner('<div />').children();\n            const hashClass = styleEditor.generateHashClass();\n            $block.attr('class', `${wrapperCls} ${hashClass}`);\n        } else {\n            const blockCls = widget.$container.find(`.${wrapperCls}`).attr('class').split(' ');\n            let hashClass = blockCls.find(className => /^tao-*/.test(className));\n            if (hashClass) {\n                styleEditor.setHashClass(hashClass);\n            } else {\n                hashClass = styleEditor.generateHashClass();\n                $block.addClass(hashClass);\n            }\n        }\n\n        const $textEditor = $('#item-editor-text-property-bar');\n        fontSelector($textEditor);\n        colorSelector($textEditor);\n        fontSizeChanger($textEditor);\n    };\n\n    TextActive.prototype.destroyEditor = function () {\n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n\n    TextActive.prototype.destroyStylesEditor = function () {\n        const hashClass = styleEditor.getHashClass();\n        const $block = this.widget.$container.find(`.${wrapperCls}`);\n        const textBlockCssClass = ($block.attr('class') || '').replace(wrapperCls, '').replace(hashClass, '').trim();\n        const styles = styleEditor.getStyle();\n        const regex = new RegExp(hashClass);\n        if (!textBlockCssClass && !Object.keys(styles).find(selector => regex.test(selector))) {\n            // no need to have a wrapper if no block class is set\n            $block.children().unwrap();\n        }\n    };\n\n    TextActive.prototype.initForm = function () {\n        const widget = this.widget;\n        const $form = widget.$form;\n        const blockCls = widget.$container.find(`.${wrapperCls}`).attr('class');\n        const hashClass = styleEditor.getHashClass();\n\n        $form.html(\n            formTpl({\n                textBlockCssClass: (blockCls || '').replace(wrapperCls, '').replace(hashClass, '').trim()\n            })\n        );\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, widget.element, {\n            textBlockCssClass: function (element, value) {\n                let $block = widget.$container.find(`.${wrapperCls}`);\n\n                // prevent to have the wrapper class twice\n                value = value.trim();\n                if (value === wrapperCls) {\n                    value = '';\n                }\n\n                if (value) {\n                    if (!$block.length) {\n                        // no wrapper found, insert one\n                        $block = widget.$container.find('[data-html-editable=\"true\"]').wrapInner('<div />').children();\n                    }\n\n                    // replace the block class\n                    $block.attr('class', `${wrapperCls} ${value}`);\n                }\n            }\n        });\n    };\n\n    return TextActive;\n});\n\n","define('taoMediaManager/qtiCreator/widgets/static/text/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/text/states/Sleep',\n    'taoMediaManager/qtiCreator/widgets/static/text/states/Active'\n], function(factory, states){\n    'use strict';\n\n    return factory.createBundle(states, arguments);\n});\n","define('taoMediaManager/qtiCreator/widgets/static/text/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoMediaManager/qtiCreator/widgets/static/text/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock'\n], function($, Widget, states, toolbarTpl){\n    'use strict';\n\n    const TextWidget = Widget.clone();\n\n    TextWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n\n    };\n\n    TextWidget.buildContainer = function(){\n\n        const $wrap = $('<div>', {'data-serial' : this.element.serial, 'data-qti-class' : '_container', 'class' : 'widget-box widget-block widget-textBlock'})\n            .append($('<div>', {'data-html-editable' : true}));\n\n        this.$original.wrapInner($wrap);\n\n        this.$container = this.$original.children('.widget-box');\n    };\n\n    TextWidget.createToolbar = function(){\n\n        const $tlb = $(toolbarTpl({\n            serial : this.serial,\n            state : 'active'\n        }));\n\n        this.$container.append($tlb);\n\n        $tlb.find('[data-role=\"delete\"]').on('click.widget-box', e => {\n            e.stopPropagation();//to prevent direct deleting;\n            this.changeState('deleting');\n        });\n\n        return this;\n    };\n\n    return TextWidget;\n});\n","define('taoMediaManager/qtiCreator/editor/blockAdder/blockAdder',[\n    'jquery',\n    'lodash',\n    'tpl!taoQtiItem/qtiCreator/editor/blockAdder/tpl/addColumnRow',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoMediaManager/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoMediaManager/qtiCreator/widgets/static/text/Widget'\n], function ($, _, adderTpl, Element, creatorRenderer, containerHelper, contentHelper, TextWidget) {\n    'use strict';\n\n    const _wrap = '<div class=\"colrow\"></div>';\n    const _placeholder = '<div class=\"placeholder\">';\n\n    /**\n     * Init the block adder on the item editor panel\n     *\n     * @param {Object} item - standard qti js object\n     * @param {JQuery} $editorPanel - the container the selector popup will be located in\n     */\n    function create(item, $editorPanel) {\n        /**\n         * Get the qti item body dom\n         *\n         * @returns {JQuery}\n         */\n        function _getItemBody() {\n            return $editorPanel.find('.qti-itemBody');\n        }\n\n        /**\n         * Init insertion relative to a widget container\n         *\n         * @param {JQuery} $widget\n         */\n        function _initInsertion($widget) {\n            const $wrap = $(_wrap);\n            let $colRow = $widget.parent('.colrow');\n\n            //trigger event to restore all currently active widget back to sleep state\n            $editorPanel.trigger('beforesave.qti-creator.active');\n\n            if (!$colRow.length) {\n                $widget.wrap(_wrap);\n                $colRow = $widget.parent('.colrow');\n            }\n            $colRow.after($wrap);\n\n            const $placeholder = $(_placeholder);\n            $wrap.addClass('tmp').prepend($placeholder);\n            _insertElement('_container', $placeholder);\n        }\n\n        /**\n         * End the current insertion state\n         *\n         * @returns {undefined}\n         */\n        function _endInsertion() {\n            //need to update item body\n            item.body(contentHelper.getContent(_getItemBody()));\n        }\n\n        /**\n         * Function to define behaviour when the insertion is completed\n         *\n         * @param {JQuery} $wrap\n         */\n        function _done($wrap) {\n            //remove tmp class\n            $wrap.removeClass('tmp');\n            _endInsertion();\n        }\n\n        /**\n         * Append the \"plus\" button into a widget\n         *\n         * @param {JQuery} $widget\n         * @returns {undefined}\n         */\n        function _appendButton($widget) {\n            //only append button to no-tmp widget and only add it once:\n            if (!$widget.children('.add-block-element').length && !$widget.parent('.colrow.tmp').length) {\n                const $adder = $(adderTpl());\n                $widget.append($adder);\n                $adder.on('click', function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    const $widgetParent = $(this).parents('.widget-box');\n                    _initInsertion($widgetParent);\n                });\n            }\n        }\n\n        $editorPanel.find('.widget-textBlock').each(function () {\n            _appendButton($(this));\n        });\n\n        //bind add event\n        $editorPanel.on('ready.qti-widget', function (e, _widget) {\n            const qtiElement = _widget.element;\n\n            if (\n                qtiElement.is('_container')\n            ) {\n                let $colRow = _widget.$container.parent('.colrow');\n                if ($colRow.hasClass('tmp')) {\n                    _done($colRow);\n                }\n                if (!$colRow.length) {\n                    _widget.$container.wrap(_wrap);\n                }\n                _appendButton(_widget.$container);\n            }\n        });\n    }\n\n    /**\n     * Create a new qti element in place of the give $placehoder\n     *\n     * @param {String} qtiClass\n     * @param {JQuery} $placeholder\n     */\n    function _insertElement(qtiClass, $placeholder) {\n        //a new qti element has been added: update the model + render\n        $placeholder.removeAttr('id'); //prevent it from being deleted\n\n        $placeholder.addClass('widget-box'); //required for it to be considered as a widget during container serialization\n        $placeholder.attr({\n            'data-new': true,\n            'data-qti-class': qtiClass\n        }); //add data attribute to get the dom ready to be replaced by rendering\n\n        const $widget = $placeholder.parent().closest('.widget-box, .qti-item');\n        const $editable = $placeholder.closest('[data-html-editable], .qti-itemBody');\n        const widget = $widget.data('widget');\n        const element = widget.element;\n        const container = Element.isA(element, '_container') ? element : element.getBody();\n\n        if (!element || !$editable.length) {\n            throw new Error('cannot create new element');\n        }\n\n        containerHelper.createElements(container, contentHelper.getContent($editable), function (newElts) {\n            const creator = creatorRenderer.get();\n            creator.load(function () {\n                for (const serial in newElts) {\n                    const elt = newElts[serial];\n                    let $widgetElem;\n                    let widgetElem;\n                    let $colParent = $placeholder.parent();\n\n                    elt.setRenderer(this);\n\n                    //the text widget is \"inner-wrapped\" so need to build a temporary container:\n                    $placeholder.replaceWith('<div class=\"text-block\"></div>');\n                    const $textBlock = $colParent.find('.text-block');\n                    $textBlock.html(elt.render());\n\n                    //build the widget\n                    widgetElem = TextWidget.build(elt, $textBlock, creator.getOption('textOptionForm'), {\n                        ready: function () {\n                            //remove the temorary container\n                            if (this.$container.parent('.text-block').length) {\n                                this.$container.unwrap();\n                            }\n                            this.changeState('active');\n                        }\n                    });\n                    $widgetElem = widgetElem.$container;\n\n                    //inform height modification\n                    $widgetElem.trigger('contentChange.gridEdit');\n                    $widgetElem.trigger('resize.gridEdit');\n                }\n            }, this.getUsedClasses());\n        });\n    }\n\n    return {\n        create: create\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2020 (original work) Open Assessment Technologies SA;\n *\n */\ndefine('taoMediaManager/qtiCreator/editor/containerEditor',[\n    'lodash',\n    'jquery',\n    'core/promise',\n    'taoQtiItem/qtiItem/core/Loader',\n    'taoQtiItem/qtiCreator/model/Container',\n    'taoQtiItem/qtiCreator/model/Item',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/qtiClasses',\n    'taoQtiItem/qtiCreator/helper/commonRenderer',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiItem/helper/simpleParser',\n    'taoMediaManager/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor'\n], function(_, $, Promise, Loader, Container, Item, event, allQtiClasses, commonRenderer, xmlRenderer, simpleParser, creatorRenderer, content, htmlEditor) {\n    'use strict';\n    // all files that use qtiCreator/helper/creatorRenderer should be copied from taoQtiItem\n    // because they should use proper locations that are binded in Renderer\n    // qtiCreator/helper/creatorRenderer use qtiCreator/renderers/Renderer\n    // qtiCreator/renderers/Renderer return Renderer with binded locations from qtiCreator/renderers/config\n\n    const _ns = 'containereditor';\n\n    const _defaults = {\n        change : _.noop,\n        markup : '',\n        markupSelector : '',\n        qtiMedia : false\n    };\n\n    event.initElementToWidgetListeners();\n\n    function parser($container){\n\n        //detect math ns :\n        const mathNs = 'm';//for 'http://www.w3.org/1998/Math/MathML'\n\n        //parse qti xml content to build a data object\n        const data = simpleParser.parse($container.clone(), {\n            ns : {\n                math : mathNs\n            }\n        });\n\n        if (data.body) {\n            return data.body;\n        } else {\n            throw new Error('invalid content for qti container');\n        }\n    }\n\n    /**\n     * Transform the given dom element into a rich-text editor\n     *\n     * @param {JQuery} $container - the container of the DOM element that is going to editable\n     * @param {Object} [options]\n     * @param {String} [options.markup] - the markup to be use as the initial editor content\n     * @param {String} [options.markupSelector] - the element in $xontainer that holds the html to be used as the initial editor content\n     * @param {Object} [options.related] - define the qti element object this editor is attached too. Very important to edit a picture or math element inside it because prevents leaving the editing state of the related element.\n     * @param {Function} [options.change] - the callback called when the editor content has been modified\n     * @param {String} [options.placeholder] - the placeholder text of the container editor when\n     * @param {Array} [options.toolbar] - the ck toolbar\n     * @param {Boolean} [options.qtiMedia=false] - allow insert media object\n     * @param {Object} [options.areaBroker] - allow to set a custom areaBroker on the renderer\n     * @param {String} [options.removePlugins] - a coma-separated plugin list that should not be loaded\n     * @param {Object} [options.metadata] - some metadata to attach to the root element (ex: { myDataName: 'myDataValue' })\n     * @param {Boolean} [options.resetRenderer] - force resetting the renderer\n     * @param {Boolean} [options.autofocus] - automatically focus the editor\n     * @returns {undefined}\n     */\n    function create($container, options){\n\n        let html, htmls, data, loader;\n\n        options = _.defaults(options || {}, _defaults);\n\n        //assign proper markup\n        if (options.markup) {\n            html = options.markup;\n            if (options.markupSelector) {\n                htmls = extractHtmlFromMarkup(html, options.markupSelector);\n                html = htmls[0] || '';\n            }\n            $container.html(html);\n        }\n\n        data = parser($container);\n        loader = new Loader().setClassesLocation(allQtiClasses);\n        loader.loadRequiredClasses(data, function() {\n\n            let item,\n                containerEditors,\n                renderer,\n                qtiClasses = ['img', 'object', 'math', 'include', 'printedVariable', '_container', '_tooltip'];\n\n            //create a new container object\n            const container = new Container();\n\n            //tag the new container as statelss, which means that its state is not supposed to change\n            container.data('stateless', true);\n\n            $container.data('container', container);\n\n            //need to attach a container to the item to enable innserElement.remove()\n            //@todo fix this\n            item = new Item().setElement(container);\n            container.setRootElement(item);\n\n            if (options.metadata) {\n                _.each(options.metadata, function (value, name) {\n                    item.data(name, value);\n                });\n            }\n\n            //associate it to the interaction?\n            if (options.related) {\n                containerEditors = options.related.data('container-editors') || [];\n                containerEditors.push(container);\n                options.related.data('container-editors', containerEditors);\n            }\n\n            this.loadContainer(container, data);\n\n            //apply common renderer :\n            renderer = creatorRenderer.get(options.resetRenderer, {}, options.areaBroker);\n            renderer.load(function() {\n                container.setRenderer(this);\n                $container.html(container.render());\n                container.postRender();\n\n                buildContainer($container);\n                buildEditor($container, container, {\n                    placeholder : options.placeholder || '',\n                    toolbar : options.toolbar || '',\n                    qtiMedia : options.qtiMedia,\n                    highlight : options.highlight,\n                    removePlugins : options.removePlugins || '',\n                    areaBroker : options.areaBroker,\n                    autofocus : options.autofocus || false\n                });\n\n                $container\n                    .off(`.${  _ns}`)\n                    .on(event.getList(_ns + event.getNs() + event.getNsModel()).join(' '), _.throttle(function(){\n                        var editorContent = container.render(xmlRenderer.get());\n                        $container.trigger(`containerchange.${  _ns}`, [editorContent]);\n\n                        if(_.isFunction(options.change)){\n                            options.change(editorContent);\n                        }\n                    }, 600));\n\n                $container.trigger('editorready.containereditor');\n\n            }, qtiClasses);\n\n        });\n\n    }\n\n    function buildContainer($container) {\n        $container.wrapInner($('<div>', {'class' : 'container-editor', 'data-html-editable' : true}));\n    }\n\n    function cleanup($container) {\n        const container = $container.data('container');\n        return new Promise(function (resolve) {\n            if(container) {\n                $(document).off(`.${  container.serial}`);\n                commonRenderer.load(['img', 'object', 'math', 'include', '_container', 'printedVariable', '_tooltip'], function(){\n                    $container.html(container.render(this));\n                    resolve();\n                });\n\n                $container.removeData('container');\n            } else {\n                resolve();\n            }\n        });\n    }\n\n    /**\n     * create a false widget that is required in html editor\n     *\n     * @param {JQuery} $editableContainer\n     * @param {Object} container\n     * @param {Object} options\n     * @param {Object} options.areaBroker\n     * @returns {Object} The fake widget object\n     */\n    function createFakeWidget($editableContainer, container, options) {\n\n        var widget = {\n            $container : $editableContainer,\n            element : container,\n            changeState : _.noop,\n            getAreaBroker : function getAreaBroker() {\n                return options.areaBroker;\n            }\n        };\n        //associate the widget to the container\n        container.data('widget', widget);\n\n        return widget;\n    }\n\n    function buildEditor($editableContainer, container, options) {\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if (!htmlEditor.hasEditor($editableContainer)) {\n\n            htmlEditor.buildEditor($editableContainer, _.defaults(options || {}, {\n                shieldInnerContent : false,\n                passthroughInnerContent : false,\n                change : content.getChangeCallback(container),\n                data : {\n                    widget : createFakeWidget($editableContainer, container, options),\n                    container : container\n                }\n            }));\n        }\n    }\n\n    function destroy($editableContainer) {\n        return htmlEditor.destroyEditor($editableContainer)\n            .then(function() {\n                $editableContainer.removeAttr('data-html-editable-container');\n                return cleanup($editableContainer);\n            });\n    }\n\n    function extractHtmlFromMarkup(markupStr, selector) {\n        const $found = $('<div>').html(markupStr).find(selector);\n        let ret = [];\n        $found.each(function(){\n            ret.push($(this).html());\n        });\n        return ret;\n    }\n\n    return {\n        create : create,\n        destroy : destroy\n    };\n});\n","\n/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * This plugin add a \"plus\" button below each content block to add content more easily.\n *\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/plugins/content/blockAdder',[\n    'i18n',\n    'core/plugin',\n    'taoMediaManager/qtiCreator/editor/blockAdder/blockAdder'\n], function(__, pluginFactory, blockAdder){\n    'use strict';\n\n    /**\n     * Returns the configured plugin\n     * @returns {Function} the plugin\n     */\n    return pluginFactory({\n\n        name : 'blockAdder',\n\n        /**\n         * Hook to the host's init\n         */\n        init : function init(){},\n\n        /**\n         * Hook to the host's render\n         */\n        render : function render(){\n\n            //set up the block adder\n            blockAdder.create(\n                this.getHost().getItem(),\n                this.getAreaBroker().getItemPanelArea()\n            );\n        }\n    });\n});\n\n","\n/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * This plugin displays add the preview button and launch it.\n * It also provides a mechanism that ask to save\n * the item before the preview (if the item has changed - should).\n *\n * @author Juan Luis Gutierrez Dos Santos <juanluis.gutierrezdossantos@taotesting.com>\n */\n\ndefine('taoMediaManager/qtiCreator/plugins/menu/preview',[\n    'jquery',\n    'i18n',\n    'core/plugin',\n    'ui/hider',\n    'taoMediaManager/previewer/adapter/item/qtiSharedStimulusItem',\n    'tpl!taoQtiItem/qtiCreator/plugins/button',\n], function($, __, pluginFactory, hider, previewerFactory, buttonTpl) {\n    'use strict';\n\n    /**\n     * Returns the configured plugin\n     * @returns {Function} the plugin\n     */\n    return pluginFactory({\n        name : 'preview',\n\n        /**\n         * Initialize the plugin (called during itemCreator's init)\n         * @fires {itemCreator#preview}\n         */\n        init() {\n            const SharedStimulusCreator = this.getHost();\n\n            /**\n             * Preview an item\n             * @event SharedStimulusCreator#preview\n             * @param {String} uri - the uri of this item to preview\n             */\n            SharedStimulusCreator.on('preview', (id) => {\n\n                // TO DO should be created empty item with shared stimulus inside\n                previewerFactory.init(id, {\n                    readOnly: false,\n                    fullPage: true\n                });\n            });\n\n            const sharedStimulusConfig = SharedStimulusCreator.getConfig();\n            if (sharedStimulusConfig.properties.previewEnabled) {\n                //creates the preview button\n                this.$element = $(buttonTpl({\n                    icon: 'preview',\n                    title: __('Preview the item'),\n                    text: __('Preview'),\n                    cssClass: 'preview-trigger',\n                    testId: 'preview-the-asset'\n                })).on('click', e => {\n                    $(document).trigger('open-preview.qti-item');\n                    e.preventDefault();\n                    this.disable();\n                    SharedStimulusCreator.trigger('preview', SharedStimulusCreator.getSharedStimulusId());\n                    this.enable();\n                });\n            }\n        },\n\n        /**\n         * Initialize the plugin (called during SharedStimulusCreator's render)\n         */\n        render() {\n            //attach the element to the menu area\n            const $container = this.getAreaBroker().getMenuArea();\n            $container.append(this.$element);\n        },\n\n        /**\n         * Called during the SharedStimulusCreator's destroy phase\n         */\n        destroy() {\n            this.$element.remove();\n        },\n\n        /**\n         * Enable the button\n         */\n        enable() {\n            this.$element\n                .removeProp('disabled')\n                .removeClass('disabled');\n        },\n\n        /**\n         * Disable the button\n         */\n        disable() {\n            this.$element\n                .prop('disabled', true)\n                .addClass('disabled');\n        },\n\n        /**\n         * Show the button\n         */\n        show() {\n            hider.show(this.$element);\n        },\n\n        /**\n         * Hide the button\n         */\n        hide() {\n            hider.hide(this.$element);\n        }\n    });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * This plugin adds a save button to the menu.\n * Could be useful, or not (Save is so 90's, we want auto-saving with undo/redo capabilities)\n *\n * @author Juan Luis Gutierrez Dos Santos <juanluis.gutierrezdossantos@taotesting.com>\n */\n\ndefine('taoMediaManager/qtiCreator/plugins/menu/save',[\n    'jquery',\n    'i18n',\n    'core/plugin',\n    'ui/hider',\n    'tpl!taoQtiItem/qtiCreator/plugins/button'\n], function($, __, pluginFactory, hider, buttonTpl) {\n    'use strict';\n\n    /**\n     * Returns the configured plugin\n     * @returns {Function} the plugin\n     */\n    return pluginFactory({\n        name : 'save',\n\n        /**\n         * Initialize the plugin (called during itemCreator's init)\n         */\n        init() {\n            const sharedStimulusCreator = this.getHost();\n\n            this.$element = $(buttonTpl({\n                icon: 'save',\n                title: __('Save the asset'),\n                text : __('Save'),\n                cssClass: 'save-trigger',\n                testId: 'save-the-asset'\n            })).on('click', e => {\n                e.preventDefault();\n                this.disable();\n                $('#item-editor-panel').trigger('beforesave.qti-creator');\n                sharedStimulusCreator.trigger('save');\n            });\n\n            this.hide();\n            this.disable();\n\n            sharedStimulusCreator.on('ready saved error', () => {\n                this.enable();\n            });\n        },\n\n        /**\n         * Called during the sharedStimulusCreator's render phase\n         */\n        render() {\n            //attach the element to the menu area\n            const $container = this.getAreaBroker().getMenuArea();\n            $container.append(this.$element);\n            this.show();\n        },\n\n        /**\n         * Called during the sharedStimulusCreator's destroy phase\n         */\n        destroy() {\n            this.$element.remove();\n        },\n\n        /**\n         * Enable the button\n         */\n        enable() {\n            this.$element\n                .removeProp('disabled')\n                .removeClass('disabled');\n        },\n\n        /**\n         * Disable the button\n         */\n        disable() {\n            this.$element\n                .prop('disabled', true)\n                .addClass('disabled');\n        },\n\n        /**\n         * Show the button\n         */\n        show() {\n            hider.show(this.$element);\n        },\n\n        /**\n         * Hide the button\n         */\n        hide() {\n            hider.hide(this.$element);\n        }\n    });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * This plugin adds a \"back\" button that does a History.go(-1)\n * (like your browser's back button).\n *\n * @author Juan Luis Gutierrez Dos Santos <juanluis.gutierrezdossantos@taotesting.com>\n */\n\ndefine('taoMediaManager/qtiCreator/plugins/navigation/back',[\n    'jquery',\n    'i18n',\n    'core/plugin',\n    'ui/hider',\n    'tpl!taoQtiItem/qtiCreator/plugins/button'\n], function($, __, pluginFactory, hider, buttonTpl) {\n    'use strict';\n\n    /**\n     * Returns the configured plugin\n     * @returns {Function} the plugin\n     */\n    return pluginFactory({\n        name : 'back',\n\n        /**\n         * Initialize the plugin\n         */\n        init() {\n            const sharedStimulusCreator = this.getHost();\n\n            sharedStimulusCreator.on('exit', function(){\n                window.history.back();\n            });\n\n            this.$element = $(buttonTpl({\n                icon: 'left',\n                title: __('Back to Manage Assets'),\n                text : __('Manage Assets'),\n                cssClass: 'back-action',\n                testId: 'manage-assets'\n            })).on('click', function backHandler(e){\n                e.preventDefault();\n                sharedStimulusCreator.trigger('exit');\n            });\n            this.hide();\n        },\n\n        /**\n         * Called during the sharedStimulusCreator's render phase\n         */\n        render() {\n            //attach the element to the menu area\n            const $container = this.getAreaBroker().getMenuLeftArea();\n            $container.append(this.$element);\n            this.show();\n        },\n\n        /**\n         * Called during the sharedStimulusCreator's destroy phase\n         */\n        destroy() {\n            this.$element.remove();\n        },\n\n        /**\n         * Enable the button\n         */\n        enable() {\n            this.$element\n                .removeProp('disabled')\n                .removeClass('disabled');\n        },\n\n        /**\n         * Disable the button\n         */\n        disable() {\n            this.$element\n                .prop('disabled', true)\n                .addClass('disabled');\n        },\n\n        /**\n         * Show the button\n         */\n        show() {\n            hider.show(this.$element);\n        },\n\n        /**\n         * Hide the button\n         */\n        hide(){\n            hider.hide(this.$element);\n        }\n    });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA\n *\n */\ndefine('taoMediaManager/qtiCreator/renderers/Figcaption',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Figcaption'\n], function(_, Figcaption){\n    'use strict';\n\n    const CreatorFigcaption = _.clone(Figcaption);\n\n    return CreatorFigcaption;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/figure/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/figure',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'ui/figure/FigureStateActive',\n], function (stateFactory, ActiveState, formTpl, formElement, inlineHelper,FigureStateActive) {\n    'use strict';\n    return FigureStateActive({ stateFactory, ActiveState, formTpl, formElement, inlineHelper });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/figure/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/figure/states/Sleep',\n    'taoMediaManager/qtiCreator/widgets/static/figure/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/figure/Widget',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoMediaManager/qtiCreator/widgets/static/figure/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'ui/mediaEditor/plugins/mediaAlignment/helper'\n], function ($, _, Widget, states, helper, toolbarTpl, inlineHelper, alignmentHelper) {\n    'use strict';\n\n    const FigureWidget = Widget.clone();\n\n    FigureWidget.initCreator = function initCreator(options) {\n        const figure = this.element;\n        const img = _.find(figure.getBody().elements, elem => elem.is('img'));\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        inlineHelper.togglePlaceholder(this);\n        // Resets classes for dom elements: figure and wrapper on initial load and in sleep / inactive mode\n        alignmentHelper.initAlignment(this);\n\n        //check file exists:\n        inlineHelper.checkFileExists(this, img, 'src', options.baseUrl);\n        $('#item-editor-scope').on(`filedelete.resourcemgr.${this.element.serial}`, (e, src) => {\n            if (this.getAssetManager().resolve(img.attr('src')) === this.getAssetManager().resolve(src)) {\n                img.attr('src', '');\n                inlineHelper.togglePlaceholder(this);\n            }\n        });\n    };\n\n    FigureWidget.destroy = function destroy() {\n        $('#item-editor-scope').off(`.${this.element.serial}`);\n    };\n\n    FigureWidget.getRequiredOptions = function () {\n        return ['baseUrl', 'uri', 'lang', 'mediaManager', 'assetManager'];\n    };\n\n    FigureWidget.buildContainer = function buildContainer() {\n        if (this.element.attr('showFigure')) {\n            // If it is aligned to left or right, it will have FigCaption and will need Figure tag\n            helper.buildBlockContainer(this);\n        } else {\n            // On inline aligment, it must be an Image\n            helper.buildInlineContainer(this);\n        }\n        const img = _.find(this.element.getBody().elements, elem => elem.is('img'));\n        const $img = this.$original.find('img');\n        if ($img.length) {\n            // move width from image to figure\n            this.$container.css({ width: img.attr('width') });\n            $img.attr('width', '100%');\n            $img.removeAttr('style');\n        }\n        return this;\n    };\n\n    FigureWidget.createToolbar = function createToolbar() {\n        helper.createToolbar(this, toolbarTpl);\n        return this;\n    };\n\n    return FigureWidget;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2022 (original work) Open Assessment Technologies SA\n *\n */\ndefine('taoMediaManager/qtiCreator/renderers/Figure',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Figure',\n    'taoMediaManager/qtiCreator/widgets/static/figure/Widget'\n], function(_, Figure, FigureWidget){\n    'use strict';\n\n    const CreatorFigure = _.clone(Figure);\n\n    CreatorFigure.render = function(figure, options){\n        const imageElem = _.find(figure.getBody().elements, elem => elem.is('img'));\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        options.assetManager = this.getAssetManager();\n        options.state = imageElem.metaData.widget && imageElem.metaData.widget.getCurrentState().name;\n\n        FigureWidget.build(\n            figure,\n            Figure.getContainer(figure),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorFigure;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2021 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/img/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/img',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'ui/image/ImgStateActive',\n], function (stateFactory, ActiveState, formTpl, formElement, inlineHelper, ImgStateActive) {\n    'use strict';\n    return ImgStateActive(stateFactory, ActiveState, formTpl, formElement, inlineHelper);\n});\n\n","define('taoMediaManager/qtiCreator/widgets/static/img/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/img/states/Sleep',\n    'taoMediaManager/qtiCreator/widgets/static/img/states/Active'\n], function (factory, states) {\n    'use strict';\n\n    return factory.createBundle(states, arguments);\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/img/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoMediaManager/qtiCreator/widgets/static/img/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'ui/mediaEditor/plugins/mediaAlignment/helper'\n], function ($, Widget, states, helper, toolbarTpl, inlineHelper, alignmentHelper) {\n    'use strict';\n\n    const ImgWidget = Widget.clone();\n\n    ImgWidget.initCreator = function initCreator(options) {\n        const img = this.element;\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        inlineHelper.togglePlaceholder(this);\n        // Resets classes for dom elements: img and wrapper on initial load and in sleep / inactive mode\n        alignmentHelper.initAlignment(this);\n\n        //check file exists:\n        inlineHelper.checkFileExists(this, img, 'src', options.baseUrl);\n        $('#item-editor-scope').on(`filedelete.resourcemgr.${this.element.serial}`, (e, src) => {\n            if (this.getAssetManager().resolve(img.attr('src')) === this.getAssetManager().resolve(src)) {\n                img.attr('src', '');\n                inlineHelper.togglePlaceholder(self);\n            }\n        });\n    };\n\n    ImgWidget.destroy = function destroy() {\n        $('#item-editor-scope').off(`.${this.element.serial}`);\n    };\n\n    ImgWidget.getRequiredOptions = function getRequiredOptions() {\n        return ['baseUrl', 'uri', 'lang', 'mediaManager', 'assetManager'];\n    };\n\n    ImgWidget.buildContainer = function buildContainer() {\n        helper.buildInlineContainer(this);\n\n        this.$container.css({\n            width: this.element.attr('width'),\n            height: this.element.attr('height')\n        });\n        if (this.$original[0]) {\n            this.$original[0].setAttribute('width', '100%');\n            this.$original[0].removeAttribute('height');\n        }\n\n        return this;\n    };\n\n    ImgWidget.createToolbar = function createToolbar() {\n        helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n\n    return ImgWidget;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\ndefine('taoMediaManager/qtiCreator/renderers/Img',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Img',\n    'taoMediaManager/qtiCreator/widgets/static/img/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/figure/Widget',\n    'taoQtiItem/qtiCreator/model/Figure',\n    'taoQtiItem/qtiCreator/helper/findParentElement'\n], function (_, Renderer, Widget, FigureWidget, FigureModel, findParentElement) {\n    'use strict';\n\n    const CreatorImg = _.clone(Renderer);\n\n    CreatorImg.render = function render(img, options) {\n        const $container = Renderer.getContainer(img);\n        if ($container.parent('figure').length || $container.parent('span').length && $container.parent('span').data('figure')) {\n            // don't create widget if has figure parent\n            if (!$container.parent('figure').length && $container.siblings('figcaption').length) {\n                $container.siblings('figcaption').remove();\n            }\n            return CreatorImg;\n        }\n\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        options.assetManager = this.getAssetManager();\n\n        if (\n            !$container.closest('.qti-choice, .qti-flow-container').length &&\n            !$container.closest('.qti-table caption').length\n        ) {\n            const parent = findParentElement(img.rootElement, img.serial);\n            parent.removeElement(img);\n            const figure = new FigureModel();\n            parent.setElement(figure);\n            const figureRenderer = parent.getRenderer();\n            if (figureRenderer) {\n                figure.setRenderer(figureRenderer);\n                figureRenderer.load(() => { }, ['figure']);\n            }\n            figure.setElement(img);\n            const $wrap = $container.wrap(`<span data-serial=\"${figure.serial}\">`).parent();\n            FigureWidget.build(\n                figure,\n                $wrap,\n                this.getOption('bodyElementOptionForm'),\n                options\n            );\n        } else {\n            Widget.build(\n                img,\n                Renderer.getContainer(img),\n                this.getOption('bodyElementOptionForm'),\n                options\n            );\n        }\n    };\n\n    return CreatorImg;\n});\n\n","\ndefine('tpl!taoMediaManager/qtiCreator/tpl/forms/item', ['handlebars'], function(hb){ return hb.template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"panel\\\">\\n        <label for=\\\"xml:lang\\\">\\n            \"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Language\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":12},\"end\":{\"line\":4,\"column\":29}}}))\n    + \"\\n        </label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + container.escapeExpression((lookupProperty(helpers,\"__\")||(depth0 && lookupProperty(depth0,\"__\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"Define item language.\",{\"name\":\"__\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":12},\"end\":{\"line\":8,\"column\":42}}}))\n    + \"\\n        </span>\\n        <select name=\\\"xml:lang\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"languagesList\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":12},\"end\":{\"line\":13,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"        </select>\\n    </div>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <option value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"key\") || (data && lookupProperty(data,\"key\"))) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"key\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":31},\"end\":{\"line\":12,\"column\":39}}}) : helper)))\n    + \"\\\"\"\n    + ((stack1 = (lookupProperty(helpers,\"equal\")||(depth0 && lookupProperty(depth0,\"equal\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),(data && lookupProperty(data,\"key\")),(depths[1] != null ? lookupProperty(depths[1],\"xml:lang\") : depths[1]),{\"name\":\"equal\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":40},\"end\":{\"line\":12,\"column\":97}}})) != null ? stack1 : \"\")\n    + \">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</option>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \" selected=\\\"selected\\\"\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"languagesList\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":16,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true,\"useDepths\":true}); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2020 (original work) Open Assessment Technologies SA ;\n *\n */\n\ndefine('taoMediaManager/qtiCreator/widgets/item/states/Active',[\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoMediaManager/qtiCreator/widgets/states/Active',\n    'tpl!taoMediaManager/qtiCreator/tpl/forms/item',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement'\n], function(_, stateFactory, Active, formTpl, formElement){\n    'use strict';\n\n    const ItemStateActive = stateFactory.create(Active, function enterActiveState() {\n        const _widget = this.widget;\n        const item = _widget.element;\n        const $form = _widget.$form;\n\n        //build form:\n        $form.html(formTpl({\n            'xml:lang' : item.attr('xml:lang'),\n            languagesList : item.data('languagesList')\n        }));\n\n        //init widget\n        formElement.initWidget($form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks($form, item, {\n            'xml:lang' : formElement.getAttributeChangeCallback()\n        });\n\n    }, _.noop);\n\n    return ItemStateActive;\n});\n\n","define('taoMediaManager/qtiCreator/widgets/item/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoMediaManager/qtiCreator/widgets/item/states/Active'\n], function(factory){\n    'use strict';\n\n    return factory.createBundle(arguments);\n});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n *\n */\n\ndefine('taoMediaManager/qtiCreator/widgets/item/Widget',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'core/promise',\n    'util/url',\n    'taoQtiItem/qtiCreator/widgets/Widget',\n    'taoMediaManager/qtiCreator/widgets/item/states/states',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoMediaManager/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiCreator/helper/devTools',\n    'taoMediaManager/qtiCreator/widgets/static/text/Widget',\n    'taoQtiItem/qtiItem/helper/xmlNsHandler',\n    'taoQtiItem/qtiCreator/editor/jquery.gridEditor'\n], function(\n    _,\n    __,\n    $,\n    Promise,\n    urlUtil,\n    Widget,\n    states,\n    Element,\n    creatorRenderer,\n    containerHelper,\n    contentHelper,\n    xmlRenderer,\n    devTools,\n    TextWidget,\n    xmlNsHandler\n){\n    'use strict';\n\n    const ItemWidget = Widget.clone();\n\n    ItemWidget.initCreator = function(config) {\n        const self = this;\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        if (!config || !config.uri) {\n            throw new Error('missing required config parameter uri in item widget initialization');\n        }\n\n        this.saveItemUrl = config.saveItemUrl;\n\n        this.renderer = config.renderer;\n\n        this.itemUri = config.uri;\n\n        //this.initUiComponents();\n\n        return new Promise(function(resolve) {\n            self.initTextWidgets(function() {\n\n                //when the text widgets are ready:\n                this.initGridEditor();\n\n                //active debugger\n                this.debug({\n                    state : false,\n                    xml : false\n                });\n\n                resolve();\n            });\n        });\n    };\n\n    ItemWidget.buildContainer = function() {\n        this.$container = this.$original;\n    };\n\n    ItemWidget.initUiComponents = function() {\n\n        const element = this.element,\n            $saveBtn = $('#save-trigger');\n\n        //listen to invalid states:\n        this.on('metaChange', function(data){\n            if (data.element.getSerial() === element.getSerial() && data.key === 'invalid') {\n                const invalid = element.data('invalid');\n                if (_.size(invalid)) {\n                    $saveBtn.addClass('disabled');\n                } else {\n                    $saveBtn.removeClass('disabled');\n                }\n            }\n        }, true);\n\n    };\n\n    ItemWidget.initGridEditor = function() {\n\n        const self = this,\n            item = this.element,\n            $itemBody = this.$container.find('.qti-itemBody'),\n            $itemEditorPanel = $('#item-editor-panel');\n\n        $itemBody.gridEditor();\n        $itemBody.gridEditor('resizable');\n        $itemBody.gridEditor('addInsertables', $('.tool-list > [data-qti-class]:not(.disabled)'), {\n            helper : function() {\n                return $(this).find('.icon').clone().addClass('dragging');\n            }\n        });\n\n        $itemBody.on('beforedragoverstart.gridEdit', function() {\n\n            $itemEditorPanel.addClass('dragging');\n            $itemBody.removeClass('hoverable').addClass('inserting');\n\n        }).on('dragoverstop.gridEdit', function() {\n\n            $itemEditorPanel.removeClass('dragging');\n            $itemBody.addClass('hoverable').removeClass('inserting');\n\n        }).on('dropped.gridEdit.insertable', function(e, qtiClass, $placeholder) {\n\n            //a new qti element has been added: update the model + render\n            $placeholder.removeAttr('id');//prevent it from being deleted\n\n            if (qtiClass === 'rubricBlock') {\n                //qti strange exception: a rubricBlock must be the first child of itemBody, nothing else...\n                //so in this specific case, consider the whole row as the rubricBlock\n                //by the way, in our grid system, rubricBlock can only have a width of col-12\n                $placeholder = $placeholder.parent('.col-12').parent('.grid-row');\n            }\n\n            $placeholder.addClass('widget-box');//required for it to be considered as a widget during container serialization\n            $placeholder.attr({\n                'data-new' : true,\n                'data-qti-class' : qtiClass\n            });//add data attribute to get the dom ready to be replaced by rendering\n\n            const $widget = $placeholder.parent().closest('.widget-box, .qti-item');\n            const $editable = $placeholder.closest('[data-html-editable], .qti-itemBody');\n            const widget = $widget.data('widget');\n            const element = widget.element;\n            const container = Element.isA(element, '_container') ? element : element.getBody();\n\n            if (!element || !$editable.length) {\n                throw new Error('cannot create new element');\n            }\n\n            containerHelper.createElements(container, contentHelper.getContent($editable), function(newElts) {\n\n                creatorRenderer.get().load(function() {\n\n                    _.forEach(newElts, (elt) => {\n                        let $eltWidget,\n                            eltwWdget,\n                            $colParent = $placeholder.parent();\n\n\n                        elt.setRenderer(this);\n\n                        if (Element.isA(elt, '_container')) {\n                            $colParent.empty();//clear the col content, and leave an empty text field\n                            $colParent.html(elt.render());\n                            eltwWdget = self.initTextWidget(elt, $colParent);\n                            $eltWidget = eltwWdget.$container;\n                        } else {\n                            elt.render($placeholder);\n\n                            //TODO resolve the promise it returns\n                            elt.postRender();\n                            eltwWdget = elt.data('widget');\n                            if (Element.isA(elt, 'blockInteraction')) {\n                                $eltWidget = eltwWdget.$container;\n                            } else {\n                                //leave the container in place\n                                $eltWidget = eltwWdget.$original;\n                            }\n                        }\n\n                        //inform height modification\n                        $eltWidget.trigger('contentChange.gridEdit');\n                        $eltWidget.trigger('resize.gridEdit');\n\n                        //active it right away:\n                        if (Element.isA(elt, 'interaction')) {\n                            eltwWdget.changeState('question');\n                        } else {\n                            eltwWdget.changeState('active');\n                        }\n\n                    });\n                }, this.getUsedClasses());\n            });\n\n        }).on('resizestop.gridEdit', function() {\n\n            item.body($itemBody.gridEditor('getContent'));\n\n        });\n\n    };\n\n    const _detachElements = function(container, elements) {\n\n        const containerElements = {};\n        _.each(elements, function(elementSerial){\n            containerElements[elementSerial] = container.elements[elementSerial];\n            delete container.elements[elementSerial];\n        });\n        return containerElements;\n    };\n\n    ItemWidget.initTextWidgets = function(callback) {\n\n        let self = this,\n            item = this.element,\n            $originalContainer = this.$container,\n            i = 1,\n            subContainers = [];\n\n        callback = callback || _.noop;\n\n        //temporarily tag col that need to be transformed into\n        $originalContainer.find('.qti-itemBody > .grid-row').each(function() {\n\n            const $row = $(this);\n\n            if (!$row.hasClass('widget-box')) {//not a rubricBlock\n                $row.children().each(function() {\n\n                    let $col = $(this),\n                        isTextBlock = false;\n\n                    $col.contents().each(function() {\n                        if(this.nodeType === 3 && this.nodeValue && this.nodeValue.trim()){\n                            isTextBlock = true;\n                            return false;\n                        }\n                    });\n\n                    const $widget = $col.children();\n                    if ($widget.length > 1 || !$widget.hasClass('widget-blockInteraction')) {//not an immediate qti element\n                        if ($widget.hasClass('colrow')) {\n                            $widget.each(function() {\n                                const $subElement = $(this);\n                                const $subWidget = $subElement.children();\n                                if ($subWidget.length > 1 || !$subWidget.hasClass('widget-blockInteraction')) {\n                                    $subElement.attr('data-text-block-id', `text-block-${i}`);\n                                    i++;\n                                }\n                            });\n                        } else {\n                            isTextBlock = true;\n                        }\n                    }\n\n                    if (isTextBlock) {\n                        $col.attr('data-text-block-id', `text-block-${i}`);\n                        i++;\n                    }\n                });\n            }\n        });\n\n        //clone the container to create the new container model:\n        const $clonedContainer = $originalContainer.clone();\n        $clonedContainer.find('.qti-itemBody > .grid-row [data-text-block-id]').each(function() {\n\n            const $originalTextBlock = $(this),\n                textBlockId = $originalTextBlock.data('text-block-id'),\n                $subContainer = $originalTextBlock.clone(),\n                subContainerElements = contentHelper.serializeElements($subContainer),\n                subContainerBody = $subContainer.html();//get serialized body\n\n            $originalTextBlock.removeAttr('data-text-block-id').html('{{_container:new}}');\n\n            subContainers.push({\n                body : subContainerBody,\n                elements : subContainerElements,\n                $original : $originalContainer.find(`[data-text-block-id=\"${textBlockId}\"]`).removeAttr('data-text-block-id')\n            });\n        });\n\n        //create new container model with the created sub containers\n        contentHelper.serializeElements($clonedContainer);\n\n        const serializedItemBody = $clonedContainer.find('.qti-itemBody').html(),\n            itemBody = item.getBody();\n\n        if (subContainers.length) {\n\n            containerHelper.createElements(itemBody, serializedItemBody, function(newElts) {\n\n                if (_.size(newElts) !== subContainers.length) {\n\n                    throw new Error(\"number of sub-containers mismatch\");\n\n                } else {\n\n                    _.each(newElts, function(container){\n\n                        const containerData = subContainers.shift();//get data in order\n                        const containerElements = _detachElements(itemBody, containerData.elements);\n\n                        container.setElements(containerElements, containerData.body);\n\n                        self.initTextWidget(container, containerData.$original);\n\n                    });\n\n                    _.defer(function(){\n                        callback.call(self);\n                    });\n                }\n            });\n\n        } else {\n\n            callback.call(self);\n        }\n\n    };\n\n    ItemWidget.initTextWidget = function(container, $col) {\n        return TextWidget.build(container, $col, this.renderer.getOption('textOptionForm'), {});\n    };\n\n    /**\n     * Enable debugging\n     *\n     * @param {Object} [options] - log state change in console\n     * @param {Boolean} [options.state = false] - log state change in console\n     * @param {Boolean} [options.xml = false] - real-time qti xml display under the creator\n     */\n    ItemWidget.debug = function(options) {\n\n        options = options || {};\n\n        if (options.state) {\n            devTools.listenStateChange();\n        }\n\n        if (options.xml) {\n            const $code = $('<code>', {'class' : 'language-markup'}),\n                $pre = $('<pre>', {'class' : 'line-numbers'}).append($code);\n\n            $('#item-editor-wrapper').append($pre);\n            devTools.liveXmlPreview(this.element, $code);\n        }\n\n    };\n\n    function hasUnsupportedInteraction(xml) {\n        const $qti = $(xml);\n        return ($qti.find('div.qti-interaction.qti-customInteraction[data-serial]').length > 0);\n    }\n\n    return ItemWidget;\n});\n\n","\ndefine('tpl!taoMediaManager/qtiCreator/renderers/tpl/wrap', ['handlebars'], function(hb){ return hb.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"grid-row\\\"><div class=\\\"col-12\\\"></div></div>\";\n},\"useData\":true}); });\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\ndefine('taoMediaManager/qtiCreator/renderers/Item',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Item',\n    'taoMediaManager/qtiCreator/widgets/item/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/item',\n    'tpl!taoMediaManager/qtiCreator/renderers/tpl/wrap'\n], function($, _, CommonRenderer, Widget, tpl, wrapTpl) {\n    'use strict';\n\n    const CreatorItem = _.clone(CommonRenderer);\n\n    const _normalizeItemBody = function _normalizeItemBody($itemBody) {\n\n        $itemBody.children().each(function(){\n            const $child = $(this);\n            //must be a grid-row for editing:\n            if (!$child.hasClass('grid-row') && !$child.hasClass('qti-infoControl')) {\n                $child.wrap(wrapTpl());\n            }\n        });\n\n        return $itemBody;\n    };\n\n    CreatorItem.template = tpl;\n\n    CreatorItem.render = function render(item, options) {\n\n        const $itemContainer = CommonRenderer.getContainer(item);\n\n        _normalizeItemBody($itemContainer.find('.qti-itemBody'));\n\n        options = options || {};\n        options.state = 'active';//the item widget never sleeps ! <- this sounds very scary!\n        options.renderer = this;\n\n        return Widget.build(\n            item,\n            $itemContainer,\n            this.getOption('itemOptionForm'),\n            options\n        );\n    };\n\n    return CreatorItem;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/object/states/Active',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/object',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'ui/mediaEditor/mediaEditorComponent',\n    'ui/previewer',\n    'ui/resourcemgr',\n    'ui/tooltip'\n], function (_, $, __, stateFactory, Active, formTpl, formElement, inlineHelper, mediaEditorComponent) {\n    'use strict';\n    /**\n     * media Editor instance if has been initialized\n     * @type {null}\n     */\n    let mediaEditor = null;\n    let $panelObjectSize = null;\n    let $panelMediaSize = null;\n\n    const _config = {\n        renderingThrottle: 1000,\n        fileFilters:\n            'image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/avi,video/ogv,video/mpeg,video/ogg,video/quicktime,video/webm,video/x-ms-wmv,video/x-flv,audio/mp3,audio/vnd.wav,audio/ogg,audio/vorbis,audio/webm,audio/mpeg,application/ogg,audio/aac,application/pdf'\n    };\n\n    const ObjectStateActive = stateFactory.extend(\n        Active,\n        function () {\n            this.initForm();\n        },\n        function () {\n            if (mediaEditor) {\n                mediaEditor.destroy();\n            }\n            mediaEditor = null;\n            $panelObjectSize = null;\n            $panelMediaSize = null;\n            this.widget.$original.off('playerready');\n            this.widget.$form.empty();\n        }\n    );\n\n    const refreshRendering = _.throttle(function refreshRendering(widget) {\n        const obj = widget.element;\n        const $container = widget.$original;\n        const previewOptions = {\n            url: obj.renderer.resolveUrl(obj.attr('data')),\n            mime: obj.attr('type')\n        };\n        if (obj.attr('height')) {\n            previewOptions.height = obj.attr('height');\n        }\n        if (obj.attr('width')) {\n            previewOptions.width = obj.attr('width');\n        }\n        if (previewOptions.url && previewOptions.mime) {\n            $container.previewer(previewOptions);\n        }\n    }, _config.renderingThrottle);\n\n    const setMediaSizeEditor = widget => {\n        const qtiObject = widget.element;\n        const type = qtiObject.attr('type');\n        if (/video/.test(type)) {\n            const $container = widget.$original;\n            const mediaplayer = $container.data('player');\n            let width = qtiObject.attr('width');\n            let height = qtiObject.attr('height');\n            if (!/%/.test(width)) {\n                // if we don't have % width we need calculate default % width\n                const originalSize = mediaplayer.getMediaOriginalSize();\n                if (!originalSize.width) {\n                    // video is not loaded yet\n                    return;\n                }\n                const containerWidth = $container.closest('.widget-textBlock').width();\n                // the default % and by that the size of the video is based on the original video size compared to the container size\n                if (!width) {\n                    width = Math.round(100 / (containerWidth / originalSize.width));\n                    height = 0;\n                } else if (height) {\n                    // for old format (px and height is set) the default % is calculated on rendered width and height\n                    const scaleHeight =\n                        (Math.max(height || 0, 200) - $container.find('.mediaplayer .controls').height()) /\n                        originalSize.height;\n                    const scaleWidth = Math.max(width || 0, 200) / originalSize.width;\n                    const scale = Math.min(scaleHeight, scaleWidth);\n                    width = Math.round(100 / (containerWidth / (scale * originalSize.width)));\n                    qtiObject.removeAttr('height');\n                    height = 0;\n                }\n            }\n            const onChange = _.debounce(nMedia => {\n                if (qtiObject.attr('width') !== `${nMedia['width']}%`) {\n                    const newWidth = `${Math.round(nMedia['width'])}%`;\n                    qtiObject.attr('width', newWidth);\n                    mediaplayer.resize(newWidth, 'auto');\n                }\n            }, 200);\n            if (mediaEditor) {\n                mediaEditor.destroy();\n            }\n            mediaEditor = mediaEditorComponent(\n                $panelMediaSize,\n                {\n                    $node: $container.find('.mediaplayer .media'),\n                    $container: $container,\n                    type: qtiObject.attr('type'),\n                    width,\n                    height,\n                    responsive: true\n                },\n                {\n                    mediaDimension: {\n                        active: true,\n                        showResponsiveToggle: false\n                    }\n                }\n            ).on('change', onChange);\n        }\n    };\n    const hideShowPanels = type => {\n        if (/video/.test(type)) {\n            $panelObjectSize.hide();\n            $panelMediaSize.show();\n        } else {\n            if (mediaEditor) {\n                mediaEditor.destroy();\n            }\n            $panelObjectSize.show();\n            $panelMediaSize.hide();\n        }\n    };\n    const _initUpload = function (widget) {\n        const $form = widget.$form,\n            options = widget.options,\n            qtiObject = widget.element,\n            $uploadTrigger = $form.find('[data-role=\"upload-trigger\"]'),\n            $src = $form.find('input[name=src]');\n\n        const _openResourceMgr = function _openResourceMgr() {\n            $uploadTrigger.resourcemgr({\n                title: __(\n                    'Please select a media file from the resource manager. You can add files from your computer with the button \"Add file(s)\".'\n                ),\n                appendContainer: options.mediaManager.appendContainer,\n                mediaSourcesUrl: options.mediaManager.mediaSourcesUrl,\n                browseUrl: options.mediaManager.browseUrl,\n                uploadUrl: options.mediaManager.uploadUrl,\n                deleteUrl: options.mediaManager.deleteUrl,\n                downloadUrl: options.mediaManager.downloadUrl,\n                fileExistsUrl: options.mediaManager.fileExistsUrl,\n                params: {\n                    uri: options.uri,\n                    lang: options.lang,\n                    filters: _config.fileFilters\n                },\n                pathParam: 'path',\n                path: options.mediaManager.path,\n                root: options.mediaManager.root,\n                select: function (e, files) {\n                    let file, type;\n                    if (files && files.length) {\n                        file = files[0].file;\n                        type = files[0].mime;\n                        qtiObject.attr('type', type);\n                        $src.val(file).trigger('change');\n                    }\n                },\n                open: function () {\n                    //hide tooltip if displayed\n                    if ($src.data('$tooltip')) {\n                        $src.blur().data('$tooltip').hide();\n                    }\n                },\n                close: function () {\n                    //triggers validation :\n                    $src.blur();\n                }\n            });\n        };\n\n        $uploadTrigger.on('click', _openResourceMgr);\n\n        //if empty, open file manager immediately\n        if (!$src.val()) {\n            _openResourceMgr();\n        }\n    };\n\n    ObjectStateActive.prototype.initForm = function initForm() {\n        const _widget = this.widget,\n            $form = _widget.$form,\n            qtiObject = _widget.element,\n            baseUrl = _widget.options.baseUrl;\n        const $container = _widget.$original;\n\n        $form.html(\n            formTpl({\n                baseUrl: baseUrl || '',\n                src: qtiObject.attr('data'),\n                alt: qtiObject.attr('alt'),\n                height: qtiObject.attr('height'),\n                width: qtiObject.attr('width')\n            })\n        );\n\n        //init resource manager\n        _initUpload(_widget);\n\n        //init standard ui widget\n        formElement.initWidget($form);\n\n        $panelObjectSize = $('.size-panel', $form);\n        $panelMediaSize = $('.media-size-panel', $form);\n        hideShowPanels(qtiObject.attr('type'));\n\n        $container.off('playerready').on('playerready', function () {\n            setMediaSizeEditor(_widget);\n        });\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, qtiObject, {\n            src: function (object, value) {\n                if (value !== qtiObject.attr('data')) {\n                    qtiObject.attr('data', value);\n                    qtiObject.removeAttr('width');\n                    qtiObject.removeAttr('height');\n                    $form.find('input[name=width]').val('');\n                    $form.find('input[name=height]').val('');\n                    $container.removeData('ui.previewer');\n                    hideShowPanels(qtiObject.attr('type'));\n                    inlineHelper.togglePlaceholder(_widget);\n                    refreshRendering(_widget);\n                }\n            },\n            width: function (object, value) {\n                const val = parseInt(value, 10);\n                if (_.isNaN(val)) {\n                    qtiObject.removeAttr('width');\n                } else {\n                    qtiObject.attr('width', val);\n                }\n                refreshRendering(_widget);\n            },\n            height: function (object, value) {\n                const val = parseInt(value, 10);\n                if (_.isNaN(val)) {\n                    qtiObject.removeAttr('height');\n                } else {\n                    qtiObject.attr('height', val);\n                }\n                refreshRendering(_widget);\n            },\n            alt: function (qtiObjectAlt, value) {\n                qtiObjectAlt.attr('alt', value);\n            },\n            align: function (qtiObjectAlign, value) {\n                inlineHelper.positionFloat(_widget, value);\n            }\n        });\n    };\n\n    return ObjectStateActive;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/object/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/object/states/Sleep',\n    'taoMediaManager/qtiCreator/widgets/static/object/states/Active'\n], function (factory, states) {\n    'use strict';\n\n    return factory.createBundle(states, arguments);\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/object/Widget',[\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoMediaManager/qtiCreator/widgets/static/object/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline'\n], function (Widget, states, helper, toolbarTpl, inlineHelper) {\n    'use strict';\n\n    const ObjectWidget = Widget.clone();\n\n    ObjectWidget.initCreator = function initCreator() {\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        inlineHelper.togglePlaceholder(this);\n    };\n\n    ObjectWidget.getRequiredOptions = function getRequiredOptions() {\n        return ['baseUrl', 'uri', 'lang', 'mediaManager'];\n    };\n\n    ObjectWidget.buildContainer = function buildContainer() {\n        helper.buildBlockContainer(this);\n\n        return this;\n    };\n\n    ObjectWidget.createToolbar = function createToolbar() {\n        helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n\n    return ObjectWidget;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\ndefine('taoMediaManager/qtiCreator/renderers/Object',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Object',\n    'taoMediaManager/qtiCreator/widgets/static/object/Widget'\n], function (_, Renderer, Widget) {\n    'use strict';\n\n    const CreatorObject = _.clone(Renderer);\n\n    CreatorObject.render = function render(object, options) {\n        //initial rendering:\n        Renderer.render(object);\n\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        options.assetManager = this.getAssetManager();\n\n        Widget.build(object, Renderer.getContainer(object), this.getOption('bodyElementOptionForm'), options);\n    };\n\n    return CreatorObject;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017-2022 (original work) Open Assessment Technologies SA ;\n *\n */\n/**\n * @author Christophe Nol <christophe@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/table/states/Active',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'ckeditor',\n    'ui/tableModel',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoMediaManager/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/widgets/static/table/components/tableActions',\n    'taoMediaManager/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/table'\n], function (\n    _,\n    $,\n    __,\n    ckEditor,\n    tableModelFactory,\n    stateFactory,\n    Active,\n    tableActionsFactory,\n    htmlEditor,\n    contentHelper,\n    formElement,\n    formTpl\n) {\n    'use strict';\n\n    let tableModel, colActions, rowActions;\n\n    const css = {\n        deleteColRow: 'hoverDelete',\n        insertRowAfter: 'insertRowAfter',\n        insertColAfter: 'insertColAfter',\n\n        hAlignCenter: 'table-center',\n        hAlignRight: 'table-right'\n    };\n\n    const TableStateActive = stateFactory.extend(\n        Active,\n        function create() {\n            this.initForm();\n            this.buildEditor();\n        },\n        function exit() {\n                        // fix a caption on exit\n            // on Enter ckeditor creates an additional caption\n            // move all contents from second caption and others to the first caption\n            // second caption and others will be removed\n            const $editableContainer = this.widget.$container;\n            const $caption = $('caption', $editableContainer);\n            if ($caption.length > 1) {\n                const $first = $caption.first();\n                $caption.each(function (i) {\n                    if (i > 0) {\n                        const $curCap = $(this);\n                        if ($first.html() !== '<br>') {\n                            $first.append('<br>');\n                        }\n                        $first.append($curCap);\n                        replaceElementByItsContent($curCap);\n                    }\n                });\n                $first.focus();\n            }\n            // on alignment ckeditor adds a paragraph\n            // move content from the paragraph to the caption, the paragraph will be removed\n            // set alignment's class to the caption\n            const $paragraphsInCaption = $('caption > p', $editableContainer);\n            if ($paragraphsInCaption.length > 0) {\n                $paragraphsInCaption.each(function () {\n                    const $p = $(this);\n                    const classNames = $p.attr('class');\n                    if (classNames) {\n                        $caption.removeClass();\n                        $caption.addClass(classNames);\n                    }\n                    replaceElementByItsContent($p);\n                });\n            }\n            // after exit will be called getChangeCallback by ckeditor to update container.body with new html\n            this.widget.$form.empty();\n            this.destroyEditor();\n        }\n    );\n\n    function replaceElementByItsContent($elem) {\n        if ($elem.children().length) {\n            $elem.children(0).unwrap();\n        } else {\n            $elem.replaceWith($elem.html());\n        }\n    }\n    // the element body should only contain the <table> tag content, and not the <table> tag itself.\n    // as the ckeditor instance is bound to a wrapping <div>, we need to go through an extra step to remove the <table> tag.\n    function getChangeCallback(container) {\n        return _.throttle(function (data) {\n            const $tableTagContent = $(data).children(), // might a mix of tbody / thead / tfoot\n                $pseudoContainer = $('<div>').html($tableTagContent),\n                newBody = contentHelper.getContent($pseudoContainer);\n            container.body(newBody);\n        }, 400);\n    }\n\n    TableStateActive.prototype.initForm = function initForm() {\n        const _widget = this.widget,\n            $form = _widget.$form,\n            table = _widget.element,\n            $container = _widget.$container;\n\n        const hAlignOptions = [\n            {\n                name: __('Left'),\n                value: 'left'\n            },\n            {\n                name: __('Center'),\n                value: 'center',\n                selected: table.hasClass(css.hAlignCenter)\n            },\n            {\n                name: __('Right'),\n                value: 'right',\n                selected: table.hasClass(css.hAlignRight)\n            }\n        ];\n\n        $form.html(\n            formTpl({\n                hAlignOptions: hAlignOptions\n            })\n        );\n\n        //... init standard ui widget\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, table, {\n            hAlign: function (t, value) {\n                hideTableActions();\n                t.removeClass(css.hAlignRight);\n                t.removeClass(css.hAlignCenter);\n                $container.removeClass(`${css.hAlignRight} ${css.hAlignCenter}`);\n                switch (value) {\n                    case 'center': {\n                        t.addClass(css.hAlignCenter);\n                        $container.addClass(css.hAlignCenter);\n                        break;\n                    }\n                    case 'right': {\n                        t.addClass(css.hAlignRight);\n                        $container.addClass(css.hAlignRight);\n                        break;\n                    }\n                }\n            }\n        });\n    };\n\n    TableStateActive.prototype.buildEditor = function buildEditor() {\n        const _widget = this.widget,\n            container = _widget.element.getBody(),\n            $itemPanel = _widget.getAreaBroker().getItemPanelArea(),\n            $editableContainer = _widget.$container,\n            $editable = $editableContainer.find('.qti-table-container'),\n            $tablePropTrigger = $editableContainer.find('[data-role=\"cke-table-properties\"]');\n        const areaBroker = _widget && _widget.getAreaBroker && _widget.getAreaBroker(),\n            $toolbarArea = areaBroker && areaBroker.getToolbarArea && areaBroker.getToolbarArea();\n\n        $editableContainer.attr('data-html-editable-container', true);\n        $editable.attr('data-html-editable', true); // DO NOT move in template to avoid creation of nested ckInstances when container editor is created\n\n        if (!htmlEditor.hasEditor($editableContainer)) {\n            htmlEditor.buildEditor($editableContainer, {\n                placeholder: '',\n                change: getChangeCallback(container),\n                removePlugins: 'magicline',\n                data: {\n                    container: container,\n                    widget: _widget\n                },\n                blur: function () {\n                    _widget.changeState('sleep');\n                }\n            });\n        }\n\n        $editable\n            .on('editorready.tableActive', function (event, editor) {\n                tableModel = tableModelFactory($editable.find('table'));\n\n                // listener for table properties\n                $tablePropTrigger.on('click.tableActive', function openTableProperties(e) {\n                    e.stopPropagation();\n                    hideTableActions();\n                    editor.execCommand('taoqtitableProperties');\n                });\n\n                // listeners for columns actions\n                colActions = tableActionsFactory({\n                    insertCol: true,\n                    deleteTitle: 'Delete column'\n                })\n                    .on('delete', function () {\n                        editor.execCommand('columnDelete');\n                        updateTable(editor, $editableContainer);\n                        hideTableActions();\n                    })\n                    .on('deleteMouseEnter', function () {\n                        addClassOnCurrentCol(editor, css.deleteColRow);\n                    })\n                    .on('deleteMouseLeave', function () {\n                        clearCellClasses($editable, css.deleteColRow);\n                    })\n                    .on('insertCol', function () {\n                        editor.execCommand('columnInsertAfter');\n                        clearCellClasses($editable, css.insertColAfter); // this is because ck clone the current cells to insert the new ones\n                        this.trigger('insertColMouseEnter'); // so we don't want him to clone the \"insert style\"\n                        updateTable(editor, $editableContainer);\n                    })\n                    .on('insertColMouseEnter', function () {\n                        addClassOnCurrentCol(editor, css.insertColAfter);\n                    })\n                    .on('insertColMouseLeave', function () {\n                        clearCellClasses($editable, css.insertColAfter);\n                    })\n                    .render($itemPanel);\n\n                // listeners for row actions\n                rowActions = tableActionsFactory({\n                    insertRow: true,\n                    deleteTitle: 'Delete row'\n                })\n                    .on('delete', function () {\n                        editor.execCommand('rowDelete');\n                        updateTable(editor, $editableContainer);\n                        hideTableActions();\n                    })\n                    .on('deleteMouseEnter', function () {\n                        addClassOnCurrentRow(editor, css.deleteColRow);\n                    })\n                    .on('deleteMouseLeave', function () {\n                        clearCellClasses($editable, css.deleteColRow);\n                    })\n                    .on('insertRow', function () {\n                        editor.execCommand('rowInsertAfter');\n                        clearCellClasses($editable, css.insertRowAfter); // this is because ck clone the current cells to insert the new ones\n                        this.trigger('insertRowMouseEnter'); // so we don't want him to clone the \"insert style\"\n                        updateTable(editor, $editableContainer);\n                    })\n                    .on('insertRowMouseEnter', function () {\n                        addClassOnCurrentRow(editor, css.insertRowAfter);\n                    })\n                    .on('insertRowMouseLeave', function () {\n                        clearCellClasses($editable, css.insertRowAfter);\n                    })\n                    .render($itemPanel);\n\n                // When the table is clicked,\n                // Set focus at the end of the last cell\n                // and show the table, column, and row toolbars\n                displayTableActions(editor, $editableContainer);\n\n                $editableContainer.on('keyup.tableActive mouseup.tableActive', function () {\n                    displayTableActions(editor, $editableContainer);\n                    const currentSelection = getSelection(editor);\n                    const $toolbars = $toolbarArea.find('.cke_toolbar');\n                    // According 'ui/ckeditor/ckConfigurator' for table 2nd toolbar is Insert\n                    // and 3rd is Links\n                    // for multiselection they shouldd be hidden\n                    if (currentSelection.length > 1) {\n                        $toolbars.eq(1).hide();\n                        $toolbars.eq(2).hide();\n                    } else {\n                        $toolbars.eq(1).show();\n                        $toolbars.eq(2).show();\n                    }\n                });\n            })\n            .on('editordestroyed.tableActive', function () {\n                if ($tablePropTrigger.length) {\n                    $tablePropTrigger.off('.tableActive');\n                }\n            });\n    };\n\n    TableStateActive.prototype.destroyEditor = function destroyEditor() {\n        const _widget = this.widget,\n            $editableContainer = _widget.$container,\n            $editable = $editableContainer.find('[data-html-editable=\"true\"]');\n\n        clearCellClasses($editable, css.insertColAfter);\n        clearCellClasses($editable, css.insertRowAfter);\n        clearCellClasses($editable, css.deleteColRow);\n\n        //search and destroy the editor\n        htmlEditor.destroyEditor($editableContainer);\n        $editableContainer.off('.tableActive');\n        $editable.off('.tableActive');\n\n        $editable.attr('data-html-editable', false);\n        $editableContainer.attr('data-html-editable-container', false);\n\n        tableModel = null;\n\n        // destroy the actions toolbars\n        if (colActions) {\n            colActions.destroy();\n            colActions = null;\n        }\n\n        if (rowActions) {\n            rowActions.destroy();\n            rowActions = null;\n        }\n    };\n\n    function addClassOnCurrentRow(editor, className) {\n        const currentCellPos = getCurrentCellPos(editor);\n        if (currentCellPos) {\n            const $currentCol = tableModel.getRowCells(currentCellPos.y);\n            $currentCol.addClass(className);\n        }\n    }\n\n    function addClassOnCurrentCol(editor, className) {\n        const currentCellPos = getCurrentCellPos(editor);\n        if (currentCellPos) {\n            const $currentCol = tableModel.getColCells(currentCellPos.x);\n            $currentCol.addClass(className);\n        }\n    }\n\n    function clearCellClasses($editable, className) {\n        $editable.find('th, td').removeClass(className);\n    }\n\n    /**\n     * Update the table model and the available actions on rows/columns\n     * @param {Object} editor\n     * @param {JQueryElement} $editableContainer\n     */\n    function updateTable(editor, $editableContainer) {\n        tableModel.update();\n        if (tableModel.getRowCount() === 1) {\n            rowActions.hideDelete();\n        } else {\n            rowActions.showDelete();\n        }\n        if (tableModel.getColCount() === 1) {\n            colActions.hideDelete();\n        } else {\n            colActions.showDelete();\n        }\n        // reposition toolbars as their dimensions might have change\n        displayTableActions(editor, $editableContainer);\n    }\n\n    /**\n     * hide components containing row and column actions\n     */\n    function hideTableActions() {\n        if (colActions) {\n            colActions.hide();\n        }\n        if (rowActions) {\n            rowActions.hide();\n        }\n    }\n\n    /**\n     * Display row and columns actions at the correct position, depending of where the user has the cursor\n     * @param {ckEditor} editor - editor instance to access the current selection\n     * @param {jQuery} $tableContainer - the table DOM element, so we can align the toolbars on it\n     */\n    function displayTableActions(editor, $tableContainer) {\n        const selectedCells = getSelection(editor);\n\n        if (selectedCells && selectedCells.length !== 1) {\n            // when none or more than one cells are selected, then we do not display the toolbars as the expected behavior is not obvious.\n            // for example, it's difficult to define the expected behavior of deleting a column when cells from multiple columns are selected...\n            hideTableActions();\n        } else {\n            const $currentCell = $(selectedCells[0].$);\n\n            colActions.show().hAlignWith($currentCell, 'center').vAlignWith($tableContainer, 'top');\n\n            rowActions.show().hAlignWith($tableContainer, 'left').vAlignWith($currentCell, 'center');\n        }\n    }\n\n    /**\n     * only works when a single cell is selected\n     * @param {Object} editor\n     * @returns {Object} x,y cell position\n     */\n    function getCurrentCellPos(editor) {\n        const selectedCells = getSelection(editor);\n\n        if (selectedCells && selectedCells.length === 1) {\n            const currentCell = selectedCells[0].$;\n\n            return {\n                x: currentCell.cellIndex,\n                y: currentCell.parentNode.rowIndex\n            };\n        }\n    }\n\n    /**\n     * Get the current selected cells in the table\n     * @param {Object} editor - CkEditor instance\n     * @returns {ckEditor.dom.element[]}\n     */\n    function getSelection(editor) {\n        const selection = editor.getSelection(),\n            tabletools = window.CKEDITOR.plugins.tabletools;\n\n        if (selection && tabletools) {\n            return tabletools.getSelectedCells(selection);\n        }\n    }\n\n    return TableStateActive;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/table/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/table/states/Sleep',\n    'taoMediaManager/qtiCreator/widgets/static/table/states/Active'\n], function(factory, states){\n    'use strict';\n\n    return factory.createBundle(states, arguments);\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA;\n */\n/**\n * @author Christophe Nol <christophe@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/widgets/static/table/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoMediaManager/qtiCreator/widgets/static/table/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/table'\n], function($, Widget, states, helper, toolbarTpl) {\n    'use strict';\n\n    var TableWidget = Widget.clone();\n\n    TableWidget.initCreator = function() {\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n    };\n\n    TableWidget.buildContainer = function(){\n        var table = this.element;\n\n        helper.buildBlockContainer(this);\n\n        if (table.attr('class')) {\n            this.$container.addClass(table.attr('class'));\n        }\n\n        return this;\n    };\n\n    TableWidget.createToolbar = function(){\n\n        const self = this,\n            $tlb = $(toolbarTpl({\n                serial : this.serial,\n                state : 'active'\n            }));\n\n        this.$container.append($tlb);\n\n        $tlb.find('[data-role=\"delete\"]').on('click.widget-box', function(e){\n            e.stopPropagation();//to prevent direct deleting;\n            self.changeState('deleting');\n        });\n\n        return this;\n    };\n\n    return TableWidget;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA;\n */\n/**\n * @author Christophe Nol <christophe@taotesting.com>\n */\ndefine('taoMediaManager/qtiCreator/renderers/Table',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Table',\n    'taoMediaManager/qtiCreator/widgets/static/table/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/table'\n], function(_, Renderer, Widget, tpl) {\n    'use strict';\n\n    const CreatorTable = _.clone(Renderer);\n\n    CreatorTable.template = tpl;\n\n    CreatorTable.render = function render(table, options){\n\n        Widget.build(\n            table,\n            Renderer.getContainer(table),\n            this.getOption('bodyElementOptionForm'),\n            options || {}\n        );\n    };\n\n    return CreatorTable;\n});\n\n","\ndefine('tpl!taoMediaManager/qtiXmlRenderer/tpl/item', ['handlebars'], function(hb){ return hb.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(data && lookupProperty(data,\"key\")),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":24},\"end\":{\"line\":3,\"column\":86}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"xmlns:\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"key\") || (data && lookupProperty(data,\"key\"))) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"key\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":42},\"end\":{\"line\":3,\"column\":50}}}) : helper)))\n    + \"=\\\"\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"\\\"\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"xmlns=\\\"\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"\\\"\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = (lookupProperty(helpers,\"join\")||(depth0 && lookupProperty(depth0,\"join\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"attributes\") : depth0),\"=\",\" \",\"\\\"\",{\"name\":\"join\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":22},\"end\":{\"line\":4,\"column\":55}}})) != null ? stack1 : \"\");\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \"        <div class=\\\"empty\\\"></div>\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        \"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"body\") || (depth0 != null ? lookupProperty(depth0,\"body\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"body\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":8},\"end\":{\"line\":8,\"column\":18}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<div\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"namespaces\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":4},\"end\":{\"line\":3,\"column\":96}}})) != null ? stack1 : \"\")\n    + \"\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"attributes\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":4},\"end\":{\"line\":4,\"column\":62}}})) != null ? stack1 : \"\")\n    + \">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"empty\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.program(10, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":4},\"end\":{\"line\":9,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"</div>\";\n},\"useData\":true}); });\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA;\n *\n */\n\ndefine('taoMediaManager/qtiXmlRenderer/renderers/Item',['lodash', 'tpl!taoMediaManager/qtiXmlRenderer/tpl/item'], function(_, tpl){\n    'use strict';\n\n    return {\n        qtiClass : 'assessmentItem',\n        template : tpl,\n        getData : function getData(item, data){\n            const defaultData = {\n                'class' : data.attributes.class || '',\n                namespaces : item.getNamespaces(),\n                schemaLocations : '',\n                xsi: 'xsi:',//the standard namespace prefix for xml schema\n                empty : item.isEmpty(),\n            };\n\n            _.forIn(item.getSchemaLocations(), (url, uri) => {\n                defaultData.schemaLocations += `${uri} ${url} `;\n            });\n            defaultData.schemaLocations = defaultData.schemaLocations.trim();\n\n            data = _.merge({}, data, defaultData);\n            delete data.attributes.title;\n            delete data.attributes.adaptive;\n            delete data.attributes.timeDependent;\n            delete data.attributes.identifier;\n\n            data.attributes = _.mapValues(data.attributes, function (val) {\n                return _.isString(val) ? _.escape(val) : val;\n            });\n\n            return data;\n        }\n    };\n});\n\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('.previewer{position:relative}.previewer iframe{min-height:400px;width:100%}.previewer .previewer-component{background-color:#fff;text-align:initial}.previewer .previewer-component .item-previewer-scope{height:calc(100vh - 250px)}.previewer .previewer-component .item-previewer-scope .action-bar,.previewer .previewer-component .item-previewer-scope .test-sidebar{display:none}.previewer.no-background{background:none}#item-editor-scope .left-bar .tool-group ._accordion{display:none}#item-editor-scope .focus-border{box-shadow:1px 1px 3px 2px #3e7da7}#item-editor-scope .qti-itemBody.item-editor-drop-area{margin-top:0}#item-editor-scope .qti-item{padding:20px}#item-editor-scope .item-editor-sidebar #item-editor-font-size-changer .icon-smaller,#item-editor-scope .item-editor-sidebar #item-editor-font-size-changer .icon-larger{background:none;color:#000;height:21px;width:20px}#item-editor-scope .item-editor-sidebar #item-editor-font-size-changer .icon-smaller{margin-left:30px}#item-editor-scope .item-editor-sidebar #item-editor-font-size-changer .icon-smaller:before{font-size:1.2rem}#item-editor-scope .item-editor-sidebar #item-editor-font-size-changer .icon-larger:before{font-size:1.8rem}#item-editor-scope .item-editor-sidebar .item-editor-color-picker .color-trigger{background:none}#item-editor-scope .item-editor-sidebar .item-editor-color-picker .reset-button{top:0}#item-editor-scope .item-editor-sidebar .reset-group .reset-button{background:none;color:#000}#item-editor-scope .item-editor-sidebar #style-sheet-toggler .file-label{cursor:default}#item-editor-scope .item-editor-sidebar #style-sheet-toggler .file-label:hover{color:inherit}#item-editor-scope .item-editor-sidebar #style-sheet-toggler [data-custom-css=custom-css] span:last-child{cursor:default}#mediaManager .stylesheets .file-selector ul{display:flex;flex-direction:column-reverse;justify-content:flex-end}#mediaManager .stylesheets .file-selector li{order:2;box-sizing:initial;margin:0 0 5px 0}#mediaManager .stylesheets .file-selector li .actions{text-align:right}#mediaManager .stylesheets .file-selector li[data-file=\\\"/tao-user-styles.css\\\"]{order:1;margin:5px 0}#mediaManager .stylesheets .file-selector li[data-file=\\\"/tao-user-styles.css\\\"]:before{border-top:1px solid #ddd;width:100%;left:0;text-indent:8px;top:-5px;line-height:2.8}#mediaManager .stylesheets .file-selector li[data-file=\\\"/tao-user-styles.css\\\"] .actions a.tlb-button-off{display:none}#mediaManager .stylesheets .file-selector li[data-file=\\\"/tao-user-styles.css\\\"] .actions a.download{display:block}#mediaManager .stylesheets .file-selector .files>li[data-file=\\\"/tao-user-styles.css\\\"]:only-child:before{border:none}#mediaManager .stylesheets .file-preview h2[data-toggle*=\\\".actions\\\"]{display:none}#mediaManager .stylesheets .file-preview h2[data-toggle*=\\\".actions\\\"]+.actions{display:none}div.item-editor-item{border-color:rgba(0,0,0,0)}\\n\\n/*# sourceMappingURL=../../../taoMediaManager/views/css/media.css.map */');\n","\ndefine(\"taoMediaManager/loader/taoMediaManager.bundle\", function(){});\n","define(\"taoMediaManager/loader/taoMediaManager.min\", [\"taoItems/loader/taoItemsRunner.min\",\"taoTests/loader/taoTestsRunner.min\",\"taoQtiItem/loader/taoQtiItemRunner.min\",\"taoQtiItem/loader/taoQtiItem.min\",\"taoQtiTestPreviewer/loader/qtiPreviewer.min\"], function(){});\n"],"mappings":"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"}